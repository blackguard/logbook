/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e,t,n,r,a,i,o={6354:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),a=n.n(r),i=n(3645),o=n.n(i)()(a());o.push([e.id,'/* fix display of errors from TeXZilla */\n/* !!! review this later !!! */\nmerror > mtext {\n    display: block;  /* was "block math", but this prevents display beyond line 1 of the error message */\n    margin: 0.25em;  /* expand the margin on error messages from texzilla */\n}\n\np,\nh1, h2, h3, h4, h5, h6, h7, h8, h9 {\n    margin-block-start: 0.1em;\n    margin-block-end:   0.1em;\n}\n',"",{version:3,sources:["webpack://./src/style-hacks.css"],names:[],mappings:"AAAA,wCAAwC;AACxC,8BAA8B;AAC9B;IACI,cAAc,GAAG,mFAAmF;IACpG,cAAc,GAAG,sDAAsD;AAC3E;;AAEA;;IAEI,yBAAyB;IACzB,yBAAyB;AAC7B",sourcesContent:['/* fix display of errors from TeXZilla */\n/* !!! review this later !!! */\nmerror > mtext {\n    display: block;  /* was "block math", but this prevents display beyond line 1 of the error message */\n    margin: 0.25em;  /* expand the margin on error messages from texzilla */\n}\n\np,\nh1, h2, h3, h4, h5, h6, h7, h8, h9 {\n    margin-block-start: 0.1em;\n    margin-block-end:   0.1em;\n}\n'],sourceRoot:""}]);const s=o},5426:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),a=n.n(r),i=n(3645),o=n.n(i)()(a());o.push([e.id,'/* all other stylesheets have been incorporated into this one (except no editor-cell-element) */\n\n/* See settings/theme-settings.js for definition of --theme-* properties */\n\n:root {\n    --input-output-split: 50vw;  /* must specify absolute amount, not %, otherwise .resize-handle will be misaligned */\n\n    --is-stacked: ;  /* is input/output displayed stacked or side-by-side (default) */\n\n    --resize-handle-size:          8px;   /* handle is a downward-pointing triangle with this height and twice this width */\n    --resize-handle-hairline-size: 1px;   /* (half) width of hairline displayed when dragging resize-handle */\n\n    --resize-handle-center-h: calc(var(--input-output-split) + (2 * var(--theme-cl-bdw)));\n}\n\nbody {\n    overflow: hidden;  /* inhibit scrolling for body */\n    margin: 0;\n    background-color: var(--theme-by-bgc);\n}\n\nheader {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-start;\n\n    height: var(--theme-hd-h);\n    background-color: var(--theme-hd-bgc);\n}\n\nheader > tool-bar {  /* next to menu */\n    visibility: visible;\n    align-self: center;\n\n    max-height: fit-content;\n    padding: 0 0.5em;\n    border: 0;\n    background-color: transparent;  /* use underlying color from header */\n}\n\nmain {\n    margin: 2px 0 0 1px;  /* prevent top and left borders from getting absorbed into surrounding element */\n\n    /* enable scrolling for main element */\n    overflow: auto;\n    max-height: calc(100vh - var(--theme-hd-h));\n    max-width:  100vw;\n}\nmain > :first-child {\n    padding-top: 0;\n}\nmain > :not(:first-child) {\n    padding-top: var(--theme-cl-p-inter);\n}\n\n.cell-container {\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n}\n\n.cell-input-container {\n    overflow: hidden;\n\n    border-width:  var(--theme-cl-bdw);\n    border-radius: var(--theme-cl-bdr);\n    border-style:  var(--theme-cl-bds);\n    border-color:  var(--theme-cl-bdc);\n}\n.cell-container[data-active] .cell-input-container {\n    border-color:  var(--theme-cl-bdc-active);\n}\n.cell-container[data-active]:focus-within .cell-input-container {\n    border-color:  var(--theme-cl-bdc-focus);\n}\n\n.resize-handle {\n    position: absolute;\n    left: calc(var(--resize-handle-center-h) - var(--resize-handle-size));\n    /* form a down-pointing arrow with a centered tip */\n    border-style: solid;\n    border-color: var(--theme-rh-bgc) transparent transparent transparent;\n    border-width: var(--resize-handle-size) var(--resize-handle-size) 0 var(--resize-handle-size);\n }\n.resize-handle:hover,\n.resize-handle.dragging {\n    border-color: var(--theme-rh-bgc-hover) transparent transparent transparent;\n}\n.resize-handle:hover::after,\n.resize-handle.dragging::after {\n    content: " ";\n    position: absolute;\n    left: calc(0px - var(--resize-handle-hairline-size));\n    min-width: calc(2 * var(--resize-handle-hairline-size));\n    max-width: calc(2 * var(--resize-handle-hairline-size));\n    min-height: 100vh;\n    background-color: var(--theme-rh-bgc-hover);\n}\n\n.collapse-cells tool-bar,\n.collapse-cells eval-cell {\n    display: none;\n}\n.collapse-cells .cell-input-container {\n    border: 0;\n}\n\n.cell-input-container {\n    min-width: var(--input-output-split);\n    max-width: var(--input-output-split);\n}\n\n@media screen and (max-width: 40em) {\n    /* responsive: input/output stacked vs side-by-side */\n\n    :root {\n        --is-stacked: yes;\n    }\n\n    .cell-container {\n        flex-direction: column;\n    }\n    .cell-input-container {\n        min-width: unset;\n        max-width: unset;\n    }\n    .resize-handle {\n        display: none;\n    }\n}\n\n.eval-cell-output {\n    display: block;\n    overflow: auto;  /* enable h/v scrolling */\n\n    height: fit-content;\n\n    padding: var(--theme-ou-p);\n    color:            var(--theme-ou-fgc);\n    background-color: var(--theme-ou-bgc);\n}\n.eval-cell-output:empty,\n.eval-cell-output:not(:has(> *:not(:empty))) {\n    display: none;\n}\n\n.plain-text {\n    white-space: pre-wrap;  /* display white-space properly */\n    line-height: 140%;\n}\n\ntool-bar {\n    overflow: hidden;\n\n    visibility: visible;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    gap: var(--theme-tl-g);\n\n    max-height: fit-content;\n    padding: var(--theme-tl-p);\n    border: 0;\n\n    background-color: var(--theme-tl-bgc);\n}\n\neval-cell {\n    overflow: hidden;\n\n    display: block;\n    margin:  0;\n\n    caret-color: var(--theme-cl-ctc);\n    outline: 0px solid transparent;  /* disable default contenteditable outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: var(--theme-cl-ff);\n    line-height: var(--theme-cl-lh);\n\n    color:            var(--theme-cl-fgc);\n    background-color: var(--theme-cl-bgc);\n\n    max-height:   fit-content;\n    padding:      var(--theme-cl-p);\n    border-width: 0;\n    border-top-color:    transparent;\n    border-left-color:   var(--theme-cl-bdc);\n    border-bottom-color: var(--theme-cl-bdc);\n    border-right-color:  var(--theme-cl-bdc);\n\n    border-radius: 0 0 var(--theme-cl-bdr) var(--theme-cl-bdr);\n    border-style:  var(--theme-cl-bds);\n}\n\neval-cell > textarea {\n    color:            var(--theme-cl-fgc);\n    background-color: var(--theme-cl-bgc);\n    resize: none;  /* remove resize control */\n    outline: none;  /* handled by parent eval-cell */\n    width: 100%;\n    padding: 0 0 1px 0;  /* 1px on bottom to prevent "_" from being hidden on bottom line */\n    border: 0;\n    margin: 0;\n}\n\n\n/* color selected by eval-cell input-type */\n\ntool-bar select {\n    border-radius: 0.5rem 0.5rem 0 0 / 30% 30% 0 0;\n    border-width: 0;\n}\n\ntool-bar select,  /* markdown is default */\ntool-bar > select:has(> option[value="markdown"]:checked) {\n    color:            var(--theme-ty-fgc-markdown);\n    background-color: var(--theme-ty-bgc-markdown);\n}\n\ntool-bar > select:has(> option[value="javascript"]:checked) {\n    color:            var(--theme-ty-fgc-javascript);\n    background-color: var(--theme-ty-bgc-javascript);\n}\n\ntool-bar > select:has(> option[value="tex"]:checked) {\n    color:            var(--theme-ty-fgc-tex);\n    background-color: var(--theme-ty-bgc-tex);\n}\n\ntool-bar option {\n    color: initial;  /* setting other color causes poor drop-down list display; seen in Chromium 116 */\n}\n\ntool-bar:has(option),  /* markdown is default */\ntool-bar:has(option[value="markdown"]:checked) {\n    border-bottom-color: var(--theme-ty-bgc-markdown);\n    background-color: color-mix(in srgb, var(--theme-tl-bgc), var(--theme-ty-bgc-markdown) var(--theme-tl-bgc-mix));\n}\n\ntool-bar:has(option[value="javascript"]:checked) {\n    border-bottom-color: var(--theme-ty-bgc-javascript);\n    background-color: color-mix(in srgb, var(--theme-tl-bgc), var(--theme-ty-bgc-javascript) var(--theme-tl-bgc-mix));\n}\n\ntool-bar:has(option[value="tex"]:checked) {\n    border-bottom-color: var(--theme-ty-bgc-tex);\n    background-color: color-mix(in srgb, var(--theme-tl-bgc), var(--theme-ty-bgc-tex) var(--theme-tl-bgc-mix));\n}\n\n\n/* === tool-bar indicators and controls === */\n\ntool-bar > * {\n    margin: 0;  /* pack controls within tool-bar; let flex gap handle spacing */\n}\n\n.tool-bar-indicator {\n    display: block;\n    width:  0.5em;\n    height: 0.5em;\n    margin: 0;\n    padding: 0;\n    border-radius: 50%;\n    border: 1px solid var(--theme-ti-bdc);\n    background-color: var(--theme-ti-bgc);\n}\n\n.tool-bar-indicator.running[data-indicator-value="on"] {\n    border: 1px solid var(--theme-ti-bdc-running);\n    background-color: var(--theme-ti-bgc-running);\n}\n.tool-bar-indicator.modified[data-indicator-value="on"] {\n    border: 1px solid var(--theme-ti-bdc-modified);\n    background-color: var(--theme-ti-bgc-modified);\n}\n\ntool-bar > select > option {\n    background-color: var(--theme-ty-bgc);\n}\n\n\n/* === toggle-switch === */\n\ntoggle-switch {\n    appearance: none;\n    border: 0;\n    width:  var(--theme-ts-w);\n    height: var(--theme-ts-h);\n}\n\ntoggle-switch svg {\n    width:  auto;\n    height: 100%;\n    background-color: transparent;\n}\n\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-fill   { fill:   var(--theme-ts-flc-autoeval); }\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-stroke { stroke: var(--theme-ts-stc-autoeval); }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-fill   { fill:   var(--theme-ts-flc-autoeval-checked); }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-stroke { stroke: var(--theme-ts-stc-autoeval-checked); }\n\n\n/* theme-aware graphics */\n\n[data-type="graphviz"] svg polygon {\n    fill:   var(--theme-gr-bgc);\n    stroke: var(--theme-gr-fgc);\n}\n[data-type="graphviz"] svg path,\n[data-type="graphviz"] svg ellipse {\n    stroke: var(--theme-gr-fgc);\n}\n[data-type="graphviz"] svg text {\n    fill: var(--theme-gr-fgc);\n}\n\n\n/* === menu === */\n\n.menu:not(.active) {\n    display: none;\n}\n\n.menubar {\n    margin: 0;\n    padding: 0.1rem 0 0.1rem 0;\n    background-color: var(--theme-mu-bgc);\n}\n\n.menubar > li {\n    display: inline;  /* horizontal orientation for top-level items of menubar */\n    padding: 0 0.5rem 0 0.5rem;\n}\n\n.menubar .menuitem {\n    list-style-type: none;\n    min-width: max-content;\n}\n\n.menuitem * {\n    user-select: none;\n}\n\n.menuitem .menuitem-label {\n    font-family: sans-serif;\n    font-size: 90%;\n}\n\n.menubar .menuitem.checked::before {\n    content: "\\2713";  /* unicode check mark */\n    position: absolute;\n    left: 0.5em;\n}\n\n.menubar div {\n    display: inline;\n}\n\n.menu {\n    position: absolute;\n    z-index: 999;\n    background-color: var(--theme-mu-bgc);\n    padding: 0.25rem 0 0.25rem 0;  /* override standard ul/li padding */\n    border-radius: 0.25rem;\n    border: 1px solid var(--theme-mu-bdc);\n    box-shadow: 3px 3px 16px var(--theme-mu-shc);\n\n    /* eliminate default styling for menu elements */\n    margin-block-start:   0;\n    margin-block-end:     0;\n    margin-inline-start:  0;\n    margin-inline-end:    0;\n    padding-inline-start: 0;\n}\n\n.menuitem {\n    color: var(--theme-mi-fgc);\n}\n\n.menuitem.disabled {\n    color: var(--theme-mi-fgc-disabled);\n}\n\n.menuitem.selected {\n    background-color: var(--theme-mi-bgc-selected);\n}\n\n.menu .menuitem:not(.menuitem-separator) {\n    padding: 0 0.5rem 0 1.5rem;\n}\n\n.menu .menuitem.menuitem-separator {\n    margin: 0.2rem 0 0.2rem 0;\n    height: 0px;\n    color: transparent;\n    border-bottom: 1px solid var(--theme-ms-bgc);\n}\n\n.menu .menuitem .menuitem-annotation {\n    margin-left: 2rem;\n    float: right;\n}\n\n.menu .menuitem kbd {\n    margin: 0 0 0 0.5rem;\n}\n\n\n/* === dialog === */\n\ndialog {\n    border-radius: 0.5em;\n    box-shadow: 3px 3px 16px var(--theme-dg-shc);\n}\n\ndialog button,\ndialog input[type="button"] {\n    margin: 1.75em 0 0 0;\n}\n\ndialog .dialog_decline {\n    display: inline;\n}\n\ndialog .dialog_accept {\n    display: inline;\n}\n\n\n/* === settings-dialog === */\n\n.settings-dialog {\n    background-color: var(--theme-st-bgc);\n}\n\n.settings-dialog .dialog-text {\n    font-style: italic;\n}\n\n.settings-dialog [data-section] {\n    position: relative;\n    display: grid;\n    grid-template-columns: min-content min-content;\n    min-width: max-content;\n    margin: 1.75em 0 0 0;\n    padding: 1em 0.5em 0.5em;\n    border-radius: 8px;\n    border: 1px solid var(--theme-st-bdc-section);\n    color:            var(--theme-st-fgc-section);\n    background-color: var(--theme-st-bgc-section);\n}\n\n.settings-dialog [data-section]::before {  /* named section heading */\n    position: absolute;\n    content: attr(data-section);\n    left: 0.8em;\n    top: -0.7em;\n    padding: 0 1em;\n    border-radius: 4px;\n    border: 1px solid var(--theme-st-bdc-section-heading);\n    color:            var(--theme-st-fgc-section-heading);\n    background-color: var(--theme-st-bgc-section-heading);\n    font-style: italic;\n}\n\n.settings-dialog [data-section] label {\n    align-self: center;\n    justify-self: end;\n    white-space: nowrap;\n    user-select: none;\n}\n\n.settings-dialog [data-section] input,\n.settings-dialog [data-section] select {\n    align-self: center;\n    justify-self: start;\n    color:            var(--theme-st-fgc-section-setting);\n    background-color: var(--theme-st-bgc-section-setting);\n    margin: 0.25em;\n}\n\n.settings-dialog [data-section] input[type="text"] {\n    width: 5em;\n}\n\n.settings-dialog .warning {\n    display: none;\n    width: 13em;\n    margin: 1.75em 0 0 1em;\n    padding: 0.5em;\n    border-radius: 8px;\n    border: 1px solid var(--theme-st-bdc-warning);\n    color:            var(--theme-st-fgc-warning);\n    background-color: var(--theme-st-bgc-warning);\n}\n.settings-dialog .warning p:first-child {\n    margin-block-start: 0;\n}\n.settings-dialog .warning p:last-child {\n    margin-block-end: 0;\n}\n.settings-dialog .show-emacs-warning .emacs-warning {\n    display: block;\n}\n\n.settings-dialog .error-message {\n    display: none;\n    width: 13em;\n    margin: 1.75em 0 0 1em;\n    padding: 0.5em;\n    border-radius: 5pt;\n    border: 1px solid var(--theme-st-bdc-error);\n    color:            var(--theme-st-fgc-error);\n    background-color: var(--theme-st-bgc-error);\n}\n.settings-dialog .error-message.active {\n    display: block;\n}\n\n\n/* === global error messages === */\n\nbody > .error-message {\n    display: block;\n    margin: 1.75em;\n    padding: 0.5em;\n    border-radius: 5pt;\n    border: 1px solid var(--theme-by-bdc-error);\n    color:            var(--theme-by-fgc-error);\n    background-color: var(--theme-by-bgc-error);\n}\n\n\n/* === print media queries === */\n\n@media not print {\n    /* nothing for now */\n}\n\n@media print {\n\n    header {\n        display: none;\n    }\n\n    main {\n        overflow: visible;\n    }\n\n    .resize-handle,\n    .resize-handle::after {\n        display: none;\n    }\n\n}\n',"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"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",sourcesContent:['/* all other stylesheets have been incorporated into this one (except no editor-cell-element) */\n\n/* See settings/theme-settings.js for definition of --theme-* properties */\n\n:root {\n    --input-output-split: 50vw;  /* must specify absolute amount, not %, otherwise .resize-handle will be misaligned */\n\n    --is-stacked: ;  /* is input/output displayed stacked or side-by-side (default) */\n\n    --resize-handle-size:          8px;   /* handle is a downward-pointing triangle with this height and twice this width */\n    --resize-handle-hairline-size: 1px;   /* (half) width of hairline displayed when dragging resize-handle */\n\n    --resize-handle-center-h: calc(var(--input-output-split) + (2 * var(--theme-cl-bdw)));\n}\n\nbody {\n    overflow: hidden;  /* inhibit scrolling for body */\n    margin: 0;\n    background-color: var(--theme-by-bgc);\n}\n\nheader {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-start;\n\n    height: var(--theme-hd-h);\n    background-color: var(--theme-hd-bgc);\n}\n\nheader > tool-bar {  /* next to menu */\n    visibility: visible;\n    align-self: center;\n\n    max-height: fit-content;\n    padding: 0 0.5em;\n    border: 0;\n    background-color: transparent;  /* use underlying color from header */\n}\n\nmain {\n    margin: 2px 0 0 1px;  /* prevent top and left borders from getting absorbed into surrounding element */\n\n    /* enable scrolling for main element */\n    overflow: auto;\n    max-height: calc(100vh - var(--theme-hd-h));\n    max-width:  100vw;\n}\nmain > :first-child {\n    padding-top: 0;\n}\nmain > :not(:first-child) {\n    padding-top: var(--theme-cl-p-inter);\n}\n\n.cell-container {\n    display: flex;\n    flex-direction: row;\n    overflow: hidden;\n}\n\n.cell-input-container {\n    overflow: hidden;\n\n    border-width:  var(--theme-cl-bdw);\n    border-radius: var(--theme-cl-bdr);\n    border-style:  var(--theme-cl-bds);\n    border-color:  var(--theme-cl-bdc);\n}\n.cell-container[data-active] .cell-input-container {\n    border-color:  var(--theme-cl-bdc-active);\n}\n.cell-container[data-active]:focus-within .cell-input-container {\n    border-color:  var(--theme-cl-bdc-focus);\n}\n\n.resize-handle {\n    position: absolute;\n    left: calc(var(--resize-handle-center-h) - var(--resize-handle-size));\n    /* form a down-pointing arrow with a centered tip */\n    border-style: solid;\n    border-color: var(--theme-rh-bgc) transparent transparent transparent;\n    border-width: var(--resize-handle-size) var(--resize-handle-size) 0 var(--resize-handle-size);\n }\n.resize-handle:hover,\n.resize-handle.dragging {\n    border-color: var(--theme-rh-bgc-hover) transparent transparent transparent;\n}\n.resize-handle:hover::after,\n.resize-handle.dragging::after {\n    content: " ";\n    position: absolute;\n    left: calc(0px - var(--resize-handle-hairline-size));\n    min-width: calc(2 * var(--resize-handle-hairline-size));\n    max-width: calc(2 * var(--resize-handle-hairline-size));\n    min-height: 100vh;\n    background-color: var(--theme-rh-bgc-hover);\n}\n\n.collapse-cells tool-bar,\n.collapse-cells eval-cell {\n    display: none;\n}\n.collapse-cells .cell-input-container {\n    border: 0;\n}\n\n.cell-input-container {\n    min-width: var(--input-output-split);\n    max-width: var(--input-output-split);\n}\n\n@media screen and (max-width: 40em) {\n    /* responsive: input/output stacked vs side-by-side */\n\n    :root {\n        --is-stacked: yes;\n    }\n\n    .cell-container {\n        flex-direction: column;\n    }\n    .cell-input-container {\n        min-width: unset;\n        max-width: unset;\n    }\n    .resize-handle {\n        display: none;\n    }\n}\n\n.eval-cell-output {\n    display: block;\n    overflow: auto;  /* enable h/v scrolling */\n\n    height: fit-content;\n\n    padding: var(--theme-ou-p);\n    color:            var(--theme-ou-fgc);\n    background-color: var(--theme-ou-bgc);\n}\n.eval-cell-output:empty,\n.eval-cell-output:not(:has(> *:not(:empty))) {\n    display: none;\n}\n\n.plain-text {\n    white-space: pre-wrap;  /* display white-space properly */\n    line-height: 140%;\n}\n\ntool-bar {\n    overflow: hidden;\n\n    visibility: visible;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-start;\n    gap: var(--theme-tl-g);\n\n    max-height: fit-content;\n    padding: var(--theme-tl-p);\n    border: 0;\n\n    background-color: var(--theme-tl-bgc);\n}\n\neval-cell {\n    overflow: hidden;\n\n    display: block;\n    margin:  0;\n\n    caret-color: var(--theme-cl-ctc);\n    outline: 0px solid transparent;  /* disable default contenteditable outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: var(--theme-cl-ff);\n    line-height: var(--theme-cl-lh);\n\n    color:            var(--theme-cl-fgc);\n    background-color: var(--theme-cl-bgc);\n\n    max-height:   fit-content;\n    padding:      var(--theme-cl-p);\n    border-width: 0;\n    border-top-color:    transparent;\n    border-left-color:   var(--theme-cl-bdc);\n    border-bottom-color: var(--theme-cl-bdc);\n    border-right-color:  var(--theme-cl-bdc);\n\n    border-radius: 0 0 var(--theme-cl-bdr) var(--theme-cl-bdr);\n    border-style:  var(--theme-cl-bds);\n}\n\neval-cell > textarea {\n    color:            var(--theme-cl-fgc);\n    background-color: var(--theme-cl-bgc);\n    resize: none;  /* remove resize control */\n    outline: none;  /* handled by parent eval-cell */\n    width: 100%;\n    padding: 0 0 1px 0;  /* 1px on bottom to prevent "_" from being hidden on bottom line */\n    border: 0;\n    margin: 0;\n}\n\n\n/* color selected by eval-cell input-type */\n\ntool-bar select {\n    border-radius: 0.5rem 0.5rem 0 0 / 30% 30% 0 0;\n    border-width: 0;\n}\n\ntool-bar select,  /* markdown is default */\ntool-bar > select:has(> option[value="markdown"]:checked) {\n    color:            var(--theme-ty-fgc-markdown);\n    background-color: var(--theme-ty-bgc-markdown);\n}\n\ntool-bar > select:has(> option[value="javascript"]:checked) {\n    color:            var(--theme-ty-fgc-javascript);\n    background-color: var(--theme-ty-bgc-javascript);\n}\n\ntool-bar > select:has(> option[value="tex"]:checked) {\n    color:            var(--theme-ty-fgc-tex);\n    background-color: var(--theme-ty-bgc-tex);\n}\n\ntool-bar option {\n    color: initial;  /* setting other color causes poor drop-down list display; seen in Chromium 116 */\n}\n\ntool-bar:has(option),  /* markdown is default */\ntool-bar:has(option[value="markdown"]:checked) {\n    border-bottom-color: var(--theme-ty-bgc-markdown);\n    background-color: color-mix(in srgb, var(--theme-tl-bgc), var(--theme-ty-bgc-markdown) var(--theme-tl-bgc-mix));\n}\n\ntool-bar:has(option[value="javascript"]:checked) {\n    border-bottom-color: var(--theme-ty-bgc-javascript);\n    background-color: color-mix(in srgb, var(--theme-tl-bgc), var(--theme-ty-bgc-javascript) var(--theme-tl-bgc-mix));\n}\n\ntool-bar:has(option[value="tex"]:checked) {\n    border-bottom-color: var(--theme-ty-bgc-tex);\n    background-color: color-mix(in srgb, var(--theme-tl-bgc), var(--theme-ty-bgc-tex) var(--theme-tl-bgc-mix));\n}\n\n\n/* === tool-bar indicators and controls === */\n\ntool-bar > * {\n    margin: 0;  /* pack controls within tool-bar; let flex gap handle spacing */\n}\n\n.tool-bar-indicator {\n    display: block;\n    width:  0.5em;\n    height: 0.5em;\n    margin: 0;\n    padding: 0;\n    border-radius: 50%;\n    border: 1px solid var(--theme-ti-bdc);\n    background-color: var(--theme-ti-bgc);\n}\n\n.tool-bar-indicator.running[data-indicator-value="on"] {\n    border: 1px solid var(--theme-ti-bdc-running);\n    background-color: var(--theme-ti-bgc-running);\n}\n.tool-bar-indicator.modified[data-indicator-value="on"] {\n    border: 1px solid var(--theme-ti-bdc-modified);\n    background-color: var(--theme-ti-bgc-modified);\n}\n\ntool-bar > select > option {\n    background-color: var(--theme-ty-bgc);\n}\n\n\n/* === toggle-switch === */\n\ntoggle-switch {\n    appearance: none;\n    border: 0;\n    width:  var(--theme-ts-w);\n    height: var(--theme-ts-h);\n}\n\ntoggle-switch svg {\n    width:  auto;\n    height: 100%;\n    background-color: transparent;\n}\n\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-fill   { fill:   var(--theme-ts-flc-autoeval); }\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-stroke { stroke: var(--theme-ts-stc-autoeval); }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-fill   { fill:   var(--theme-ts-flc-autoeval-checked); }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-stroke { stroke: var(--theme-ts-stc-autoeval-checked); }\n\n\n/* theme-aware graphics */\n\n[data-type="graphviz"] svg polygon {\n    fill:   var(--theme-gr-bgc);\n    stroke: var(--theme-gr-fgc);\n}\n[data-type="graphviz"] svg path,\n[data-type="graphviz"] svg ellipse {\n    stroke: var(--theme-gr-fgc);\n}\n[data-type="graphviz"] svg text {\n    fill: var(--theme-gr-fgc);\n}\n\n\n/* === menu === */\n\n.menu:not(.active) {\n    display: none;\n}\n\n.menubar {\n    margin: 0;\n    padding: 0.1rem 0 0.1rem 0;\n    background-color: var(--theme-mu-bgc);\n}\n\n.menubar > li {\n    display: inline;  /* horizontal orientation for top-level items of menubar */\n    padding: 0 0.5rem 0 0.5rem;\n}\n\n.menubar .menuitem {\n    list-style-type: none;\n    min-width: max-content;\n}\n\n.menuitem * {\n    user-select: none;\n}\n\n.menuitem .menuitem-label {\n    font-family: sans-serif;\n    font-size: 90%;\n}\n\n.menubar .menuitem.checked::before {\n    content: "\\2713";  /* unicode check mark */\n    position: absolute;\n    left: 0.5em;\n}\n\n.menubar div {\n    display: inline;\n}\n\n.menu {\n    position: absolute;\n    z-index: 999;\n    background-color: var(--theme-mu-bgc);\n    padding: 0.25rem 0 0.25rem 0;  /* override standard ul/li padding */\n    border-radius: 0.25rem;\n    border: 1px solid var(--theme-mu-bdc);\n    box-shadow: 3px 3px 16px var(--theme-mu-shc);\n\n    /* eliminate default styling for menu elements */\n    margin-block-start:   0;\n    margin-block-end:     0;\n    margin-inline-start:  0;\n    margin-inline-end:    0;\n    padding-inline-start: 0;\n}\n\n.menuitem {\n    color: var(--theme-mi-fgc);\n}\n\n.menuitem.disabled {\n    color: var(--theme-mi-fgc-disabled);\n}\n\n.menuitem.selected {\n    background-color: var(--theme-mi-bgc-selected);\n}\n\n.menu .menuitem:not(.menuitem-separator) {\n    padding: 0 0.5rem 0 1.5rem;\n}\n\n.menu .menuitem.menuitem-separator {\n    margin: 0.2rem 0 0.2rem 0;\n    height: 0px;\n    color: transparent;\n    border-bottom: 1px solid var(--theme-ms-bgc);\n}\n\n.menu .menuitem .menuitem-annotation {\n    margin-left: 2rem;\n    float: right;\n}\n\n.menu .menuitem kbd {\n    margin: 0 0 0 0.5rem;\n}\n\n\n/* === dialog === */\n\ndialog {\n    border-radius: 0.5em;\n    box-shadow: 3px 3px 16px var(--theme-dg-shc);\n}\n\ndialog button,\ndialog input[type="button"] {\n    margin: 1.75em 0 0 0;\n}\n\ndialog .dialog_decline {\n    display: inline;\n}\n\ndialog .dialog_accept {\n    display: inline;\n}\n\n\n/* === settings-dialog === */\n\n.settings-dialog {\n    background-color: var(--theme-st-bgc);\n}\n\n.settings-dialog .dialog-text {\n    font-style: italic;\n}\n\n.settings-dialog [data-section] {\n    position: relative;\n    display: grid;\n    grid-template-columns: min-content min-content;\n    min-width: max-content;\n    margin: 1.75em 0 0 0;\n    padding: 1em 0.5em 0.5em;\n    border-radius: 8px;\n    border: 1px solid var(--theme-st-bdc-section);\n    color:            var(--theme-st-fgc-section);\n    background-color: var(--theme-st-bgc-section);\n}\n\n.settings-dialog [data-section]::before {  /* named section heading */\n    position: absolute;\n    content: attr(data-section);\n    left: 0.8em;\n    top: -0.7em;\n    padding: 0 1em;\n    border-radius: 4px;\n    border: 1px solid var(--theme-st-bdc-section-heading);\n    color:            var(--theme-st-fgc-section-heading);\n    background-color: var(--theme-st-bgc-section-heading);\n    font-style: italic;\n}\n\n.settings-dialog [data-section] label {\n    align-self: center;\n    justify-self: end;\n    white-space: nowrap;\n    user-select: none;\n}\n\n.settings-dialog [data-section] input,\n.settings-dialog [data-section] select {\n    align-self: center;\n    justify-self: start;\n    color:            var(--theme-st-fgc-section-setting);\n    background-color: var(--theme-st-bgc-section-setting);\n    margin: 0.25em;\n}\n\n.settings-dialog [data-section] input[type="text"] {\n    width: 5em;\n}\n\n.settings-dialog .warning {\n    display: none;\n    width: 13em;\n    margin: 1.75em 0 0 1em;\n    padding: 0.5em;\n    border-radius: 8px;\n    border: 1px solid var(--theme-st-bdc-warning);\n    color:            var(--theme-st-fgc-warning);\n    background-color: var(--theme-st-bgc-warning);\n}\n.settings-dialog .warning p:first-child {\n    margin-block-start: 0;\n}\n.settings-dialog .warning p:last-child {\n    margin-block-end: 0;\n}\n.settings-dialog .show-emacs-warning .emacs-warning {\n    display: block;\n}\n\n.settings-dialog .error-message {\n    display: none;\n    width: 13em;\n    margin: 1.75em 0 0 1em;\n    padding: 0.5em;\n    border-radius: 5pt;\n    border: 1px solid var(--theme-st-bdc-error);\n    color:            var(--theme-st-fgc-error);\n    background-color: var(--theme-st-bgc-error);\n}\n.settings-dialog .error-message.active {\n    display: block;\n}\n\n\n/* === global error messages === */\n\nbody > .error-message {\n    display: block;\n    margin: 1.75em;\n    padding: 0.5em;\n    border-radius: 5pt;\n    border: 1px solid var(--theme-by-bdc-error);\n    color:            var(--theme-by-fgc-error);\n    background-color: var(--theme-by-bgc-error);\n}\n\n\n/* === print media queries === */\n\n@media not print {\n    /* nothing for now */\n}\n\n@media print {\n\n    header {\n        display: none;\n    }\n\n    main {\n        overflow: visible;\n    }\n\n    .resize-handle,\n    .resize-handle::after {\n        display: none;\n    }\n\n}\n'],sourceRoot:""}]);const s=o},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},7537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(a," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},7451:(e,t,n)=>{var r=n(3379),a=n.n(r),i=n(7795),o=n.n(i),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),m=n(9216),h=n.n(m),u=n(4589),_=n.n(u),p=n(6354),g={};g.styleTagTransform=_(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=h(),a()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},7654:(e,t,n)=>{var r=n(3379),a=n.n(r),i=n(7795),o=n.n(i),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),m=n(9216),h=n.n(m),u=n(4589),_=n.n(u),p=n(5426),g={};g.styleTagTransform=_(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=h(),a()(p.Z,g),p.Z&&p.Z.locals&&p.Z.locals},3379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],d=i[c]||0,m="".concat(c," ").concat(d);i[c]=d+1;var h=n(m),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var _=a(u,r);r.byIndex=s,t.splice(s,0,{identifier:m,updater:_,references:1})}o.push(m)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var l=r(e,a),c=0;c<i.length;c++){var d=n(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},9886:(e,t,n)=>{n.d(t,{w:()=>r});class r{constructor(e=!1){this.#e=[],this.#t=!!e}#e;#t;empty(){return this.#e.length<=0}attached(){return this.#t}add(e,t,n,r){const a={target:e,type:t,listener:n,options:r};if(this.constructor.#n(a),-1!==this.#r(a))throw new Error("equivalent event handler already added");this.#t&&e.addEventListener(t,n,r),this.#e.push(a)}remove(e,t,n,r){const a={target:e,type:t,listener:n,options:r};this.constructor.#n(a);const i=this.#r(a);if(-1===i)throw new Error("specified event handler not found");this.#e.splice(i,1),this.#t&&e.removeEventListener(e,t,r)}remove_all(){if(this.#t)for(const e of this.#e){const{target:t,type:n,listener:r,options:a}=e;t.removeEventListener(n,r,a)}this.#e.splice(0)}attach(){if(!this.#t){for(const e of this.#e){const{target:t,type:n,listener:r,options:a}=e;t.removeEventListener(n,r,a),t.addEventListener(n,r,a)}this.#t=!0}}detach(){if(this.#t){for(const e of this.#e){const{target:t,type:n,listener:r,options:a}=e;t.removeEventListener(n,r,a),t.addEventListener(n,r,a)}this.#t=!1}}#r(e){for(let t=0;t<this.#e.length;t++)if(this.constructor.#a(e,this.#e[t]))return t;return-1}static#n(e){if("object"!=typeof e)throw new Error("spec must be an object");let t=!1;const{target:n,type:r,listener:a,options:i}=e;if(!(n instanceof EventTarget))throw new Error("target must be an instance of EventTarget");if("string"!=typeof r)throw new Error("type in spec must be a string");if("function"!=typeof a)throw new Error("listener in spec must be a function");if("boolean"==typeof i)t=i;else if("object"==typeof i)t=!!i.capture;else if(void 0!==i)throw new Error("options in spec must be a undefined, boolean, or an object");return t}static#a(e,t){return this.#n(e)===this.#n(t)&&e.target===t.target&&e.type===t.type&&e.listener===t.listener}}},345:(e,t,n)=>{n.d(t,{H:()=>i});var r=n(4889);class a{static fsaapi_available=globalThis.FileSystemHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemDirectoryHandle&&"function"==typeof globalThis.showOpenFilePicker&&"function"==typeof globalThis.showSaveFilePicker&&"function"==typeof globalThis.showDirectoryPicker;static ensure_fsaapi_available(){if(!this.fsaapi_available)throw new Error("unexpected: File System API is not available")}get fsaapi_available(){return this.constructor.fsaapi_available}async verify_permission(e,t=!1){this.constructor.ensure_fsaapi_available();const n={};return t&&(n.writable=!0,n.mode="readwrite"),"granted"===await e.queryPermission(n)||"granted"===await e.requestPermission(n)}async save(e,t){if(!this.fsaapi_available)return this.legacy_save(e,t);let n=(t=t??{}).file_handle;if(!n){const e=await this.prompt_for_save(t.prompt_options);if(e.canceled)return{canceled:!0};n=e.file_handle}await this.verify_permission(n,!0);const r=e(),a=await n.createWritable();return await a.write(r),await a.close(),{file_handle:n,stats:await this.get_fs_stats_for_file_handle(n)}}async open(e){if(!this.fsaapi_available)return this.legacy_open(e);let t=(e=e??{}).file_handle;if(!t){const n=await this.prompt_for_open(e.prompt_options);if(n.canceled)return{canceled:!0};t=n.file_handle}await this.verify_permission(t,!1);const n=await t.getFile();return{file_handle:t,text:await n.text(),stats:this.get_fs_stats_for_file(n)}}async get_fs_stats_for_file_handle(e){this.constructor.ensure_fsaapi_available(),await this.verify_permission(e);const t=await e.getFile();return this.get_fs_stats_for_file(t)}get_fs_stats_for_file(e){const{lastModified:t,lastModified:n,name:r,size:a,type:i}=e;return{lastModified:t,last_modified:n,name:r,size:a,type:i}}async prompt_for_save(e=void 0){this.constructor.ensure_fsaapi_available();const t=await this._prompt(globalThis.showSaveFilePicker,e);return t?{file_handle:t}:{canceled:!0}}async prompt_for_open(e=void 0){this.constructor.ensure_fsaapi_available(),e=e??{};const t=await this._prompt(globalThis.showOpenFilePicker,{...e,multiple:!1});return t?{file_handle:t[0]}:{canceled:!0}}async _prompt(e,t){t=t??{};try{return await e(t)}catch(e){return}}async legacy_save(e,t){return new Promise(((n,r)=>{const a=e(),i=document.createElement("a");i.download=t?.name??"Untitled.logbook",i.href=URL.createObjectURL(new Blob([a],{type:"text/plain"})),document.body.onfocus=e=>{document.body.onfocus=null,URL.revokeObjectURL(i.href),i.href=null,n({})},i.click()}))}async legacy_open(e){const t=this._convert_options_for_legacy(e);let n=document.getElementById(this.constructor.legacy_file_input_element_id);n||(n=document.createElement("input"),n.id=this.constructor.legacy_file_input_element_id,n.classList.add("hidden-fs-interface-element"),n.type="file",t&&(n.accept=t),document.body.insertBefore(n,document.body.firstChild));const a=new r.i;return n.onchange=async e=>{if(n.files.length<=0)a.resolve({canceled:!0});else{const e=n.files[0],t=await e.text(),r=this.get_fs_stats_for_file(e);a.resolve({text:t,stats:r})}},n.click(),a.promise}static legacy_file_input_element_id="legacy_file_input_element_id";_convert_options_for_legacy(e){e=e??{};const t=e?.prompt_options?.types?.[0]?.accept;return t?Object.keys(t):void 0}}const i=new a},2007:(e,t,n)=>{function r(e,t){for(const n of t)e=(e??{})[n];return e}function a(e,t,n){if(t.length<1)throw new Error("path must contain at least one segment");for(const n of t.slice(0,-1))void 0===e[n]&&(e[n]={}),e=e[n];e[t.slice(-1)[0]]=n}n.d(t,{$:()=>a,Z:()=>r})},4889:(e,t,n)=>{n.d(t,{i:()=>r});class r{constructor(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));Object.defineProperties(this,{promise:{value:n},resolve:{value:e},reject:{value:t},then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},finally:{value:n.finally.bind(n)}})}async await(){return await this.promise}}},6660:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>e});var a=n(984),i=n(6973);await(0,a.h0)(document.head,(0,i.h)("dist/rxjs.umd.min.js"));const e={...globalThis.rxjs};globalThis.rxjs=void 0,r()}catch(e){r(e)}}),1)},6227:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{g:()=>e});var a=n(984),i=n(6973);await(0,a.h0)(document.head,(0,i.h)("dist/sprintf.min.js"));const e=globalThis.sprintf;r()}catch(e){r(e)}}),1)},4429:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{T:()=>s,X:()=>o});var a=n(6092),i=e([a]);a=(i.then?(await i)():i)[0];class o{constructor(e,t=null,n=!1){if(null==e)throw new Error("target must not be null or undefined");if(t??=e=>e.stop(),"function"!=typeof t)throw new Error("stopper must be a function taking target as a parameter");Object.defineProperties(this,{target:{value:e,enumerable:!0},stopper:{value:t,enumerable:!0},multiple_stops:{value:n,enumerable:!0}}),this.#i=0}#i;get stop_count(){return this.#i}get stopped(){return this.#i>0}stop(){return!(!this.multiple_stops&&this.stopped||(this.stopper(this.target),this.#i++,0))}}class s{constructor(){this.#o=[],this.#s=!1,this.#l=new a.l}#o;#s;#l;get stopped(){return this.#s}get stop_states(){return this.#l}add_stoppable(e){if(!(e instanceof o))throw new Error("stoppable must be an instance of Stoppable");this.#o.push(e)}remove_stoppable(e){const t=this.#o.indexOf(e);-1!==t&&this.#o.splice(t,1)}stop(){const e=!this.#s;for(this.#s=!0;this.#o.length>0;){const e=this.#o.pop();try{e.stop()}catch(t){console.warn("error while stopping",e,t)}}e&&this.stop_states.dispatch({manager:this,stopped:this.#s})}}r()}catch(e){r(e)}}))},6092:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{l:()=>o});var a=n(6660),i=e([a]);a=(i.then?(await i)():i)[0];class o extends a.Z.Subject{dispatch(e){this.next(e)}}r()}catch(e){r(e)}}))},1896:(e,t,n)=>{n.d(t,{pk:()=>c,kE:()=>d,k$:()=>l});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let a;const i=new Uint8Array(16);function o(){if(!a&&(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(i)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));const l=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();const a=(e=e||{}).random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(a)};function c(){return`id-${l()}`}function d(){return l()}},1951:(e,t,n)=>{n.d(t,{V:()=>a});const r="data:audio/wav;base64,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qJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=";async function a(){return new Audio(r).play()}},7165:(e,t,n)=>{function r(e,t,n,r,a=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");const{a0:i=0,a1:o=2*Math.PI,counterclockwise:s=!1,no_close_path:l=!1,no_fill:c=!1,no_stroke:d=!1}=a??{};e.beginPath(),e.arc(t,n,r,i,o,s),l||e.closePath(),c||e.fill(),d||e.stroke()}n.r(t),n.d(t,{default_arrowhead_length_to_line_width_ratio:()=>h,default_dot_size_to_line_width_ratio:()=>a,default_tick_length_to_line_width_ratio:()=>l,draw_arc:()=>r,draw_arrow:()=>_,draw_arrowhead:()=>u,draw_dot:()=>i,draw_flipped_text:()=>m,draw_line:()=>s,draw_tick:()=>c,draw_ticks:()=>d,heading_angle:()=>o});const a=3;function i(e,t,n,i=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");const{r:o=a*e.lineWidth}=i??{},s=e.fillStyle;e.fillStyle=e.strokeStyle;try{r(e,t,n,o,i)}finally{e.fillStyle=s}}function o(e,t){return 0===e?t<0?-Math.PI/2:t>0?Math.PI/2:0:Math.atan(t/e)}function s(e,t,n,r,a){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");e.beginPath(),e.moveTo(t,n),e.lineTo(r,a),e.stroke()}const l=8;function c(e,t,n,r,a,i=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");const{len:o=l*e.lineWidth}=i??{},c=Math.sqrt(r*r+a*a),d=-o*a/c,m=o*r/c;s(e,t-d/2,n-m/2,t+d/2,n+m/2)}function d(e,t,n,r,a,i,o=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");if("number"!=typeof i||i<=0)throw new Error("inc must be a positive number");const{draw_initial:s=!1}=o??{},l=r-t,d=a-n,m=Math.sqrt(l*l+d*d),h=i*l/m,u=i*d/m;for(let i=t,m=n,_=!0;i<=r&&m<=a;i+=h,m+=u,_=!1)!s&&_||c(e,i,m,l,d,o)}function m(e,t,n,r,a=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");const{stroke_only:i,angle:o,dxr:s,dyr:l}=a??{},c=e.getTransform();try{const a=e.measureText(t),c=a.actualBoundingBoxAscent-a.actualBoundingBoxDescent;e.translate(n,r),e.scale(1,-1),o&&e.rotate(-o),e.translate(-a.width/2,c/2),s&&e.translate(s*a.width,0),l&&e.translate(0,-l*c),e[i?"strokeText":"fillText"](t,0,0)}finally{e.setTransform(c)}}const h=10;function u(e,t,n,r,a,i=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");const o=2*Math.PI,{len:s=h*e.lineWidth,reversed:l=!1,tick:d=!1}=i??{};let m=i?.tip_angle??Math.PI/6;if(m-=Math.floor(m/o),l&&(m=o-m),d){const i={};"number"==typeof d&&(i.len=d),c(e,t,n,r,a,i)}}function _(e,t,n,r,a,i=null){if(!(e instanceof CanvasRenderingContext2D))throw new Error("ctx must be an instance of CanvasRenderingContext2D");const{double:o}=i??{};s(e,t,n,r,a);const l=r-t,c=a-n;u(e,r,a,l,c,i),o&&u(e,t,n,-l,-c,i)}},7569:(e,t,n)=>{n.d(t,{L_:()=>d,QH:()=>c,Vq:()=>s,aR:()=>l,cK:()=>m});var r=n(984),a=n(1896),i=n(4889);n(6973);const o=new WeakMap;class s{static run(e,t){return(new this).run(e,t)}static is_modal_active(){return[...document.querySelectorAll(`dialog.${this._modal_dialog_css_class}`)].some((e=>e.open))}static instance_from_element(e){return o.get(e.closest("dialog"))}static _modal_dialog_css_class="modal_dialog";constructor(){this._completed=!1,this._promise=new i.i,this._promise.promise.finally((()=>{try{this._destroy_dialog_element()}catch(e){console.warn("ignoring error when finalizing dialog promise",e)}}));try{this._dialog_element_id=`dialog-${(0,a.k$)()}`,this._create_dialog_element(),o.set(this._dialog_element,this)}catch(e){this._cancel(e)}}get promise(){return this._promise.promise}run(...e){return this._populate_dialog_element(...e),this._dialog_element.showModal(),this.promise}_populate_dialog_element(...e){throw new Error("unimplemented")}_complete(e){this._completed=!0,this._promise.resolve(e)}_cancel(e){this._promise.reject(e??new Error("canceled"))}_create_dialog_element(){if("string"!=typeof this._dialog_element_id)throw new Error("this._dialog_element_id must already be set to a string before calling this method");if(void 0!==this._dialog_element)throw new Error("this._dialog_element must be undefined when calling this method");const e=document.querySelector("header")??(0,r.T1)({parent:document.body,tag:"header"});if(e.parentElement!==document.body)throw new Error("pre-existing header element is not a direct child of document.body");const t=document.getElementById("ui")??(0,r.T1)({before:e.firstChild,attrs:{id:"ui"}});if("DIV"!==t.tagName||t.parentElement!==e)throw new Error("pre-existing #ui element is not a <div> that is a direct child of the header element");if(document.getElementById(this._dialog_element_id))throw new Error(`unexpected: dialog with id ${this._dialog_element_id} already exists`);const n=(0,r.T1)({parent:t,tag:"dialog",attrs:{id:this._dialog_element_id,class:this.constructor._modal_dialog_css_class}});this._dialog_text_container=(0,r.T1)({parent:n,tag:"h2",attrs:{class:"dialog-text"}}),this._dialog_form=(0,r.T1)({parent:n,tag:"form",attrs:{method:"dialog"}}),this._dialog_element=n}_destroy_dialog_element(){this._dialog_element&&(o.delete(this._dialog_element),this._dialog_element.remove()),this._dialog_element.oncancel=null,this._dialog_element.onclose=null,this._dialog_element=void 0}}class l extends s{_populate_dialog_element(e,t){const{accept_button_label:n="Ok"}=t??{};this._dialog_text_container.innerText=e,(0,r.T1)({parent:this._dialog_form,tag:"input",attrs:{type:"submit",value:n}}),this._dialog_element.onclose=e=>this._complete()}}class c extends s{_populate_dialog_element(e,t){const{decline_button_label:n="No",accept_button_label:a="Yes"}=t??{};this._dialog_text_container.innerText=e;const i=(0,r.T1)({parent:this._dialog_form,tag:"input",attrs:{type:"button",value:n}});i.innerText=n,i.onclick=e=>this._complete(!1),(0,r.T1)({parent:this._dialog_form,tag:"input",attrs:{type:"submit",value:a}}),this._dialog_element.oncancel=e=>this._complete(!1),this._dialog_element.onclose=e=>this._complete(this._dialog_element.returnValue===a)}}function d(e,t,n){if("string"!=typeof t||""===t)throw new Error("id must be a non-empty string");const{tag:a="input",type:i="text",label:o,label_after:s,attrs:l={}}=n??{};if("id"in l||"type"in l)throw new Error('attrs must not contain "id" or "type"');const c={id:t,...l};"input"===a&&(c.type=i);const d=(0,r.T1)({tag:a,attrs:c});let m;return o&&(m=(0,r.T1)({tag:"label",attrs:{for:t}}),m.innerText=o),s?(e.appendChild(d),e.appendChild(m)):(e.appendChild(m),e.appendChild(d)),d}function m(e,t,n){if("tag"in(n=n??{})||"type"in n)throw new Error('opts must not contain "tag" or "type"');const a=[];if(n.options)for(const{value:e,label:t}of n.options){const n={value:e??t},i=(0,r.T1)({tag:"option",attrs:n});i.innerText=t,a.push(i)}const i=d(e,t,{...n,tag:"select"});for(const e of a)i.appendChild(e);return i}},984:(e,t,n)=>{n.d(t,{Aj:()=>A,Dz:()=>_,Hp:()=>p,T1:()=>b,V1:()=>v,V6:()=>o,Xc:()=>y,Yf:()=>d,gX:()=>h,h0:()=>k,li:()=>s,pX:()=>c,rT:()=>m,rb:()=>w,rf:()=>l,v0:()=>u});var r=n(1896),a=n(6973);const i="file:///home/ed/code/logbook/lib/ui/dom-util.js";function o(e){return e.replaceAll("<","&lt;").replaceAll(">","&gt;")}async function s(e,t=void 0){return new Promise((n=>setTimeout(n,e??0,t)))}async function l(){return new Promise((e=>setTimeout(e)))}async function c(){return new Promise((e=>queueMicrotask(e)))}function d(e,t=null){if(!(e instanceof HTMLTextAreaElement))throw new Error("textarea must be an instance of HTMLTextAreaElement");if(null!=t&&("number"!=typeof t||t<=0))throw new Error("max_height_px must be undefined, null, or a positive number");const n=e.scrollHeight>0?`${e.scrollHeight}px`:"0.5em";e.setAttribute("style",`height:${n}; overflow-y:hidden;`),e.oninput=function(e){const n=e.target.closest("textarea");n.style.height="1px";const r=window.getComputedStyle(n),a=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i=n.scrollHeight-a,o=t&&i>t?t:i;n.style.height=`${o}px`}}function m(e){if(!(e instanceof HTMLTextAreaElement))throw new Error("textarea must be an instance of HTMLTextAreaElement");e.dispatchEvent(new Event("input"))}function h(e){if(e instanceof HTMLElement)e.innerText="";else{if(!(e instanceof Node))throw new Error("element must be an instance of Node");for(;e.firstChild;)e.removeChild(e.firstChild)}return e}function u(e){const t=e.getBoundingClientRect();return t.bottom>window.innerHeight&&window.scrollBy(0,t.bottom-window.innerHeight),e}function _(e,t){if(t){if("id"in t&&document.getElementById(g(t.id)))throw new Error(`element already exists with id ${t.id}`);for(const n in t){const r=t[n];null!=r?e.setAttribute(n,g(r)):e.removeAttribute(n)}}return e}function p(e,t){for(const n in t){const r=t[n];void 0!==r&&(null===r?e.style.removeProperty(n):e.style.setProperty(n,r))}return e}function g(e){return void 0===e?"":e.toString()}function A(e,t=null){const{parent:n=null,before:r=null}=e??{};let a=n;if(r&&!(r instanceof Node))throw new Error("before must be null, undefined, or an instance of Node");if(r&&!r.parentNode)throw new Error("before must have a parent");if(a){if(r&&r.parentElement!==a)throw new Error("inconsistent parent and before nodes specified")}else r&&(a=r.parentNode);if(a&&t&&!(a instanceof t))throw new Error(`parent must be null, undefined, or an instance of ${t.name}`);return{parent:a,before:r}}const f="default";function b(e=null,t=!1){if(e??={},"object"!=typeof e)throw new Error("options must be null, undefined, or an object");const{_key:n,tag:a="div",namespace:i,attrs:o,style:s,set_id:l,children:c}=e,{parent:d,before:m}=A(e);if(!(null==c||Array.isArray(c)&&c.every((e=>["object","string"].includes(typeof e)))))throw new Error("children must be an array of objects");const h=i?document.createElementNS(i,a):document.createElement(a);let u=!1;if(o)for(const e in o){let t=o[e];if("class"===e&&Array.isArray(t)){if(!t.every((e=>!e.match(/\s/))))throw new Error("attrs.class must be a string or an array of strings not containing whitespace");t=t.join(" ")}null!=t&&h.setAttribute(e,t),"id"==e&&(u=!0)}!u&&l&&(h.id=(0,r.pk)()),s&&p(h,s);const _=t?{}:void 0;if(c)for(const e of c)if("string"==typeof e)h.appendChild(document.createTextNode(e));else{(e.parent||e.before)&&console.warn('ignoring "parent" and/or "before" specified in child descriptor');const n=b({...e,parent:h,before:void 0},t);t&&Object.assign(_,n)}return t&&(_[f]=h,["string","symbol"].includes(typeof n)&&(_[n]=h)),d&&d.insertBefore(h,m),t?_:h}function v(e,t=null){if(!(e instanceof Node))throw new Error("node must be an instance of Node");const{parent:n,before:r}=A(t);if(!n)throw new Error('options must specify either "parent" or "before"');n.insertBefore(e,r)}function y(e,t,n=null){if(!(e instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");const{before:r=null,prevent_coalesce_next:a}=n??{};if(null!==r&&!(r instanceof Node))throw new Error("before must be null or an instance of Node");if(r&&r.parentNode!==e)throw new Error("before must be a child of element");if("string"!=typeof t&&(t=`${t??""}`),!t)return null;let i;if(!i){const n=r?r.previousSibling:e.lastChild;n?.nodeType===Node.TEXT_NODE&&(n.nodeValue+=t,i=n)}if(!i&&r&&!a){const e=r;e.nodeType===Node.TEXT_NODE&&(e.nodeValue=t+e.nodeValue,i=e)}return i||(i=document.createTextNode(t),e.insertBefore(i,r)),i}function w(e){return e.normalize(),e}const C={};async function k(e,t,n=null,r=!1){const o=new URL(t,(0,a.h)(i)),{promise_data:s,initial:l}=function(e){const t=e.toString();let n,r=C[t];return r?n=!1:(r={},r.promise=new Promise(((e,t)=>{r.resolve=e,r.reject=t})),C[t]=r,n=!0),{initial:n,promise_data:r}}(o);if(l){let c;function d(e){s.resolve?.(),h()}function m(e){s.reject?.(new Error(`error loading script ${o}`)),h()}function h(){c&&(c.removeEventListener("load",d),c.removeEventListener("error",m)),s.resolve=null,s.reject=null}try{c=function(e,t,n=null,r=!1){if(!(e instanceof Element))throw new Error("parent must be an Element");if("src"in(n=n??{}))throw new Error('attrs must not contain "src"');let a;return r||(a=e.querySelector(`script[src="${t.toString().replaceAll('"','\\"')}"]`),a?.parentElement!==e&&(a=null)),a??b({parent:e,tag:"script",attrs:{src:t,...n}})}(e,o,n,r),c.addEventListener("load",d,{once:!0}),c.addEventListener("error",m,{once:!0})}catch(u){s.reject?.(u),h()}}return s.promise}},2050:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Qm:()=>o.Q,d4:()=>i.d,k7:()=>a.k});var a=n(6306),i=n(8395),o=n(9091),s=e([o]);o=(s.then?(await s)():s)[0],r()}catch(e){r(e)}}))},9091:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Q:()=>d});var a=n(6306),i=n(8395),o=n(9886),s=n(1951),l=n(6092),c=e([l]);l=(c.then?(await c)():c)[0];class d{constructor(e,t){if(!(e instanceof EventTarget))throw new Error("event_target must be and instance of EventTarget");if("function"!=typeof t)throw new Error("command_observer must be a function");this.#c=new o.w;const n=new l.l;this.#d=n.subscribe(t),this.#m=[],this.#h=null,Object.defineProperties(this,{event_target:{value:e,enumerable:!0},command_observer:{value:t,enumerable:!0},commands:{value:n,enumerable:!0}})}#c;#d;#m;#h;#u;reset_key_map_stack(){this.#m.length>0&&(this.#m.splice(0),this.#_())}push_key_map(e){if(!(e instanceof i.d))throw new Error("key_map must be an instance of KeyMap");if(-1!==this.#m.indexOf(e))throw new Error("key_map already exists in stack");this.#m.unshift(e),this.#_()}pop_key_map(){const e=this.#m.shift();return e&&this.#_(),e}remove_key_map(e,t=!1){const n=this.#m.indexOf(e);return-1!==n&&(t?this.#m.splice(0,n+1):this.#m.splice(n,1),this.#_(),!0)}get is_attached(){return!!this.#h}attach(){if(this.is_attached)throw new Error("attach() called when already attached");if(this.#m.length<=0)return!1;this.#h=i.d.multi_mapper(...this.#m);const e=this.#h;let t,n;function r(){t=e,n=[]}r();const o=r,l=i=>{switch(i.key){case"Alt":case"AltGraph":case"CapsLock":case"Control":case"Fn":case"FnLock":case"Hyper":case"Meta":case"NumLock":case"ScrollLock":case"Shift":case"Super":case"Symbol":case"SymbolLock":case"OS":break;default:{const o=a.k.from_keyboard_event(i);n.push(o);const l=t.consume(o);if(l)if(i.preventDefault(),"string"==typeof l){const e={command:l,event:i,target:i.target,key_spec:o};this.commands.dispatch(e),r()}else t=l;else t!==e&&(i.preventDefault(),(0,s.V)()),r();break}}};this.#u=l,this.#c.remove_all();const c=[[this.event_target,"blur",o,{capture:!0}],[this.event_target,"keydown",l,{capture:!0}]];for(const[e,t,n,r]of c)this.#c.add(e,t,n,r);return this.#c.attach(),!0}detach(){this.#c.remove_all(),this.#h=null,this.#u=void 0}inject_key_event(e){this.#u?.(e)}#_(){const e=this.is_attached;this.detach(),e&&this.attach()}}r()}catch(e){r(e)}}))},8395:(e,t,n)=>{n.d(t,{d:()=>a});var r=n(6306);class a{constructor(e=null,t=null){Object.defineProperties(this,{bindings:{value:e,enumerable:!0},mapping:{value:this.constructor.#p(e),enumerable:!0},recognizer:{value:t,enumerable:!0}})}create_mapper(e=null){return new this.constructor.Mapper(this.mapping,this.recognizer,e)}static multi_mapper(...e){if(e.length<=0)throw new Error("at least one KeyMap instance must be given");if(!e.every((e=>e instanceof this)))throw new Error("arguments must all be KeyMap instances");return e.reduce(((e,t)=>t.create_mapper(e)),null)}static#p(e){if(null!=e&&"object"!=typeof e)throw new Error("bindings must be null/undefined or an object");const t={};for(const n in e){if(n.length<=0)throw new Error("bindings keys (command names) must not be empty strings");for(const a of e[n]){let e=t;const i=a.split(r.k.canonical_key_string_separator);for(let t=0;t<i.length;t++){const a=i[t],o=t>=i.length-1,s=new r.k(a).canonical,l=e[s];if("string"==typeof l||"object"==typeof l&&o){const e=i.slice(0,t+1).join(r.k.canonical_key_string_separator);throw new Error(`duplicate bindings specified for key sequence: ${e}`)}o?e[s]=n:e=l??(e[s]={})}}}return t}static Mapper=class e{constructor(e,t,n=null){if(null!=e&&"object"!=typeof e)throw new Error("mapping must be null/undefined or an object");if(null!=t&&"function"!=typeof t)throw new Error("recognizer must be null/undefined or a function");if(null!=n&&!(n instanceof this.constructor))throw new Error("fallback_mapper must be null/undefined or a KeyMap instance");if(!e&&!n)throw new Error("at least one of mapping or fallback_mapper must be given");Object.defineProperties(this,{mapping:{value:e,enumerable:!0},recognizer:{value:t,enumerable:!0},fallback_mapper:{value:n,enumerable:!0}})}consume(t){const n=t instanceof r.k?t:new r.k(t),a=this.recognizer?.(n);if("string"==typeof a)return a;const i=n.canonical,o=this.mapping?.[i];if("string"==typeof o)return o;const s=this.fallback_mapper?.consume(n);return"string"==typeof s?s:o||s?o?new e(o,null,s):s:void 0}}}},6306:(e,t,n)=>{n.d(t,{k:()=>r});class r{constructor(e,t=null){if("string"!=typeof e||e.length<=0)throw new Error("key_string must be a non-empty string");Object.defineProperties(this,{key_string:{value:e,enumerable:!0},context:{value:t,enumerable:!0}}),this.#g()}static canonical_key_modifier_separator="+";static canonical_key_string_separator=" ";static#A={meta:{code:"m",event_prop:"metaKey",glyph:"⌘",display_order:3,alternates:["cmd","command"]},ctrl:{code:"c",event_prop:"ctrlKey",glyph:"⌃",display_order:1,alternates:["control"]},shift:{code:"s",event_prop:"shiftKey",glyph:"⇧",display_order:2,alternates:[]},alt:{code:"a",event_prop:"altKey",glyph:"⌥",display_order:4,alternates:[]}};static#f={arrowleft:"←",arrowup:"↑",arrowright:"→",arrowdown:"↓",enter:"Enter",backspace:"Backspace",delete:"Delete"};static from_keyboard_event(e){const t=[];for(const n in this.#A){const r=this.#A[n];e[r.event_prop]&&t.push(r)}return new this([...t.map((e=>this.#b[e.code])),event.key].join(this.canonical_key_modifier_separator),e)}get glyphs(){if(void 0===this.#v){const e=this.key,t=e.toLowerCase(),n=this.modifier_descs.map((e=>e.glyph));t in this.constructor.#f?n.push(this.constructor.#f[t]):e.match(/^[a-zA-Z]$/)||e.match(/^[fF][0-9]{1,2}$/)?n.push(e.toUpperCase()):n.push(e),this.#v=n.join("")}return this.#v}#v;#g(){const e=this.key_string.split(/[+-]/);if(e.length<1||e.some((e=>e.length<=0)))if(this.key_string.match(/^[+-]$/))e.splice(0),e.push(this.key_string);else{if(!this.key_string.match(/[+-][+-]$/))throw new Error(`invalid key_string ${this.key_string}`);e.splice(-1),e[e.length-1]=this.key_string[this.key_string.length-1]}let t=e.at(-1);e.splice(-1);for(let t=0;t<e.length;t++)e[t]=e[t].toLowerCase();let n=t.toLowerCase();["up","down","left","right"].includes(n)&&(t=`Arrow${t}`,n=`arrow${n}`);const r=[];for(const t of e){const e=this.constructor.#y(t);if(!e)throw new Error(`invalid modifier "${t}" in key_string ${this.key_string}`);if(e.code in r)throw new Error(`redundant modifier "${t}" in key_string ${this.key_string}`);r.push(e)}r.sort(((e,t)=>e.display_order-t.display_order));const a=Object.values(r).reduce(((e,t)=>e|this.constructor.#w[t.code]),0),i=r.map((e=>e.code)).join("");let o=!0;o=0==(a&~this.constructor.shift_flag)&&!(1!==t.length||t.match(/^[\p{C}]$/u));const s=`${i}${this.constructor.canonical_key_modifier_separator}${o?t:n}`;Object.freeze(e),Object.freeze(r),Object.defineProperties(this,{key:{value:t,enumerable:!0},modifiers:{value:e,enumerable:!0},modifier_descs:{value:r,enumerable:!0},modifier_flags:{value:a,enumerable:!0},canonical_modifiers:{value:i,enumerable:!0},canonical:{value:s,enumerable:!0},is_printable:{value:o,enumerable:!0}});for(const e in this.constructor.#A)Object.defineProperty(this,`has_${e}`,{value:this.modifiers.includes(e),enumerable:!0})}static#C;static#k;static#E;static#y(e){return e=e.toLowerCase(),["cmdorctrl","commandorctrl"].includes(e)&&(e=(this.#E?"meta":"ctrl").toLowerCase()),this.#C[e]}static#b;static#x;static#I;static#w;static _init_static(){this.#E=(globalThis.navigator?.userAgentData?.platform??globalThis.navigator?.platform??"").toLowerCase().startsWith("mac"),this.#b={};for(const e in this.#A){const t=this.#A[e];this.#b[t.code]=e}this.#x=Object.fromEntries(Object.entries(this.#A).map((([e,{code:t,glyph:n}])=>[t,n]))),this.#I=Object.fromEntries(Object.entries(this.#A).map((([e,{code:t,display_order:n}])=>[t,n]))),this.#C=this.#B(),this.#k=Object.freeze(Object.fromEntries(Object.keys(this.#A).map((e=>this.#C[e])).map((e=>[e.code,e]))));let e=1;this.#w={};for(const t in this.#A){const n=this.#A[t];this.#w[t]=e,this.#w[n.code]=e,e<<=1}Object.freeze(this.#w);for(const e in this.#A)Object.defineProperty(this,`${e}_flag`,{value:this.#w[e],enumerable:!0})}static#B(){{const e="+-"+this.canonical_key_modifier_separator+this.canonical_key_string_separator,t=Object.keys(this.#A);if(t.some((e=>e!==e.toLowerCase())))throw new Error("KeySpec.#basic_modifier_desc_map keys must be lowercase");const n=t.map((e=>this.#A[e].alternates)).reduce(((e,t)=>[...e,...t]));if(n.some((e=>e!==e.toLowerCase())))throw new Error("KeySpec.#basic_modifier_desc_map alternates must be lowercase");if(new Set([...t,...n]).size!==t.length+n.length)throw new Error("KeySpec.#basic_modifier_desc_map keys and alternates must all be distinct");const r=t.map((e=>this.#A[e].code));for(const t of r){if(1!==t.length)throw new Error("KeySpec.#basic_modifier_desc_map codes must be single characters");if(e.includes(t))throw new Error(`KeySpec.#basic_modifier_desc_map codes are not allowed to be any of following: ${e}`)}if(new Set(r).size!==r.length)throw new Error("KeySpec.#basic_modifier_desc_map code values must be distinct");const a=t.map((e=>this.#A[e].event_prop));if(new Set(a).size!==a.length)throw new Error("KeySpec.#basic_modifier_desc_map event_prop values must be distinct")}const e={};function t(e,t,n){const r={modifier:t,basic_modifier:e,...n,alternates:[...new Set([e,t,...n.alternates])]};return Object.freeze(r)}for(const n in this.#A){const r=this.#A[n];e[n]=t(n,n,r);for(const a of r.alternates)e[a]=t(n,a,r)}return Object.freeze(e)}}r._init_static()},3231:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{j:()=>l});var a=n(6092),i=n(984),o=n(2050),s=(n(6973),e([a,o]));[a,o]=s.then?(await s)():s;class l{static menu_element_tag_name="menu";static menuitem_element_tag_name="li";static find_previous_menuitem(e){let t=e.previousElementSibling;for(;t&&(!t.classList.contains("menuitem")||t.classList.contains("disabled"));)t=t.previousElementSibling;return t}static find_next_menuitem(e){let t=e.nextElementSibling;for(;t&&(!t.classList.contains("menuitem")||t.classList.contains("disabled"));)t=t.nextElementSibling;return t}static create(e,t,n){return new this(e,t,n)}constructor(e,t,n){if(!(e instanceof Element))throw new Error("parent must be an instance of Element");if(null!=n&&"function"!=typeof n)throw new Error("get_command_bindings must be null, undefined, or a function");n??=()=>[];const r=new a.l,i=new a.l;Object.defineProperties(this,{get_command_bindings:{value:n,enumerable:!0},commands:{value:r,enumerable:!0},selects:{value:i,enumerable:!0}}),this.#T={},this.#j=this.#z(e,t)}#T;#j;get element(){return this.#j}#S(e){const t=this.#T[e];if(!t)throw new Error(`no element found for menu id "${e}"`);if(!t.classList.contains("menuitem"))throw new Error(`element for menu id "${e}" is not a menuitem`);return t}async activate(e=null){if(!(this.#j instanceof Element&&this.#j.classList.contains("menubar")))throw new Error('this.#menubar_container must be an Element with class "menubar"');const{set_focus:t}=e??{};if(!this.#j.querySelector(".selected")){const e=this.#j.querySelector(".menuitem");e&&this.#L(e)}if(t)return new Promise((e=>setTimeout((()=>{this.#j.focus(),e()}))))}deactivate(){this.#D(this.#j)}set_menu_state(e,t){if(t??={},"object"!=typeof t)throw new Error("state_specs must be an object");const n=this.#S(e);for(const[e,r]of Object.entries(t??{}))switch(e){case"enabled":r?n.classList.remove("disabled"):n.classList.add("disabled");break;case"checked":r?n.classList.add("checked"):n.classList.remove("checked");break;default:throw new Error("unknown state name")}}#D(e){if(e){if(!(e instanceof Element)||!e.classList.contains("menubar")&&!e.classList.contains("menu"))throw new Error('menu_element must be an Element with class "menubar" or "menu"');e.classList.remove("active"),e.classList.remove("selected");for(const t of e.children)t.classList.remove("selected"),t.classList.contains("collection")&&this.#D(t.querySelector(".menu"));e.classList.contains("menubar")&&this.selects.dispatch({select:!1,target:e})}}#L(e){if(!e.classList.contains("selected")){const t=e.closest(".menubar, .menu");if(t.classList.contains("menubar")&&!this.#j.querySelector(".selected")&&this.selects.dispatch({select:!0,target:e}),e.classList.add("selected"),e.classList.contains("collection")){e.querySelector(".menu").classList.add("active");const t=e.querySelector(".menu"),n=e.getBoundingClientRect();e.parentElement.classList.contains("menubar")?(t.style.top=`${n.y+n.height}px`,t.style.left=`${n.x}px`):(t.style.top=n.y-n.height+"px",t.style.left=`${n.x+n.width}px`)}for(const n of t.children)n!==e&&this.#M(n)}}#M(e){e.classList.contains("selected")&&(e.classList.remove("selected"),e.parentElement.classList.contains("menubar")&&!this.#j.querySelector(".selected")&&this.selects.dispatch({select:!1,target:e})),e.classList.contains("collection")&&this.#D(e.querySelector(".menu"))}#q(e){if(!(e instanceof Element))throw new Error("parent must be an instance of Element");(0,i.T1)({parent:e,tag:this.constructor.menuitem_element_tag_name}).classList.add("disabled","menuitem","menuitem-separator")}#O(e,t,n=!1){if(!(t instanceof Element))throw new Error("parent must be an instance of Element");if("string"==typeof e)return this.#q(t);const{label:r,collection:a,item:o,id:s}=e;if("string"!=typeof r)throw new Error("label must be specified as a string");if(o&&a)throw new Error("item and collection must not both be specified");if(a&&!Array.isArray(a))throw new Error("collection must be an array");if(o&&("object"!=typeof o||"string"!=typeof o.command))throw new Error('item must specify an object with a string property "command"');if(!["undefined","string"].includes(typeof s)||""===s)throw new Error("id must be a non-empty string");const l=this.#P(r,n);if(o)this.#R(l,o.command);else{l.classList.add("collection");const e=(0,i.T1)({parent:l,tag:this.constructor.menu_element_tag_name});e.classList.add("menu"),n||((0,i.T1)({parent:l,attrs:{class:["menuitem-annotation","collection-arrow"]}}).textContent="▸"),a.forEach((t=>this.#O(t,e))),n&&l.addEventListener("click",(e=>{e.target.closest(".menuitem")===l&&(l.classList.contains("selected")?this.#M(l):this.#L(l),e.stopPropagation(),e.preventDefault())}))}return s&&(this.#T[s]=l),t&&t.appendChild(l),l}#P(e,t=!1){const n=(0,i.T1)({tag:this.constructor.menuitem_element_tag_name,attrs:{set_id:!0,class:"menuitem"}});return(0,i.T1)({parent:n,attrs:{class:"menuitem-label"}}).innerText=e,n.addEventListener("mousemove",(e=>{t&&!this.#j.querySelector(".selected")||n.classList.contains("disabled")||this.#L(n)})),n}#R(e,t){if(t){const n=this.get_command_bindings()[t];if(n){const t=(0,i.T1)({parent:e,attrs:{class:"menuitem-annotation"}});n.forEach((e=>{const n=new o.k7(e).glyphs;(0,i.T1)({parent:t,tag:"kbd"}).textContent=n}))}}e.addEventListener("click",(n=>{this.#D(e.closest(".menubar"));const r={command:t,event:n,target:n.target};this.commands.dispatch(r),n.stopPropagation(),n.preventDefault()}))}#z(e,t){const n=(0,i.T1)({parent:e,tag:this.constructor.menu_element_tag_name,attrs:{role:"navigation",tabindex:0,class:["active","menubar"]},before:e.firstChild});return t.forEach((e=>this.#O(e,n,!0))),n.addEventListener("blur",(e=>{this.#D(n)})),n.addEventListener("keydown",(e=>{const t=n.querySelectorAll(".selected");if(t.length<=0){if(!["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"," "].includes(e.key))return;{const e=n.querySelector(".menuitem");e&&this.#L(e)}}else{const r=t[t.length-1],a=r.parentElement===n;let i,o,s,l;switch(a?(i="ArrowLeft",o="ArrowRight",s="ArrowUp",l="ArrowDown"):(i="ArrowUp",o="ArrowDown",s="ArrowLeft",l="ArrowRight"),e.key){case"Enter":case" ":r.click();break;case"Escape":this.#D(n);break;case i:{const e=this.constructor.find_previous_menuitem(r);e?this.#L(e):a||r.classList.remove("selected");break}case o:{const e=this.constructor.find_next_menuitem(r);e&&this.#L(e);break}case s:if(!a){const e=n.querySelector(".menuitem.selected"),t=this.constructor.find_previous_menuitem(e);t&&this.#L(t)}break;case l:{let e=!1;if(r.classList.contains("collection")){const t=r.querySelector(".menuitem:not(.disabled)");t&&(this.#L(t),e=!0)}if(!e&&!a){const e=n.querySelector(".menuitem.selected"),t=this.constructor.find_next_menuitem(e);t&&this.#L(t)}break}default:return}}e.stopPropagation(),e.preventDefault()}),{capture:!0}),n}}r()}catch(e){r(e)}}))},6973:(e,t,n)=>{n.d(t,{h:()=>o});const r=document.querySelector("script");if(!r||!r.src)throw new Error("no script for assets server found in document");const a=new URL("..",r.src),i=new URL("..","file:///home/ed/code/logbook/src/assets-server-url.js");function o(e){if("string"==typeof e&&(e=new URL(e,i)),!(e instanceof URL))throw new Error("local_url must be a string or an instance of URL");if("file:"===e.protocol&&"file:"===i.protocol&&"file:"!==a.protocol&&e.href.startsWith(i.href)){const t=e.href.slice(i.href.length);return new URL(a.href+t)}return e}},3088:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{W:()=>c});var a=n(984),i=n(53),o=n(9886),s=n(3653),l=e([i,s]);[i,s]=l.then?(await l)():l;class c extends HTMLElement{static custom_element_name="editor-cell";static attribute__active="data-active";constructor(){super(),this.#c=new o.w,this.#$(),this._tool_bar=null,this.#U=new ResizeObserver(this.#F.bind(this)),this.#U.observe(this)}#c;#U;get_text(){return this.#N()?this.#G().value:this.textContent}set_text(e){this.#N()?this.#G().value=e:this.textContent=e}get_outer_html(){const e=this.tagName.toLowerCase(),t=[];for(const e of this.getAttributeNames())if("contenteditable"!==e&&e!==this.constructor.attribute__active){const n=this.getAttribute(e),r=(0,a.V6)(n).replaceAll('"',"&quot;");t.push(`${e}="${r}"`)}const n=(0,a.V6)(this.get_text());return`<${e} ${t.join(" ")}>${n}</${e}>`}#G(){return this.#N()?this.firstChild:this}#N(){const e=this.firstChild;return e instanceof HTMLTextAreaElement&&!e.nextSibling}#Q(){if(!this.#N()){const e=this.get_text();(0,a.gX)(this);const t=(0,a.T1)({parent:this,tag:"textarea",set_id:!0,attrs:{spellcheck:!1}});(0,a.Yf)(t),this.set_text(e),t.setSelectionRange(0,0),this.#H()}}#W(){if(this.#N()){const e=this.get_text();(0,a.gX)(this),this.set_text(e)}}focus(){if(this.#N()){const e=this.#G(),t=e.selectionStart??0,n=e.selectionEnd??0;e.focus(),e.setSelectionRange(t,n)}else super.focus()}#H(){if(this.#N()){const e=this.#G();(0,a.rT)(e)}}#F(){this.#H()}get editable(){return this.#N()}set_editable(e){this.removeAttribute("contenteditable"),e?(this.#Q(),this._tool_bar.enable_for("type",!0)):(this.#W(),this._tool_bar.enable_for("type",!1))}get active(){return!!(this.#Z?this.#Z(this):this).hasAttribute(this.constructor.attribute__active)}set_active(e=!1){e=!!e;const t=this.#Z?this.#Z(this):this;t.active!==e&&(e?t.setAttribute(this.constructor.attribute__active,!0):t.removeAttribute(this.constructor.attribute__active))}set_active_element_mapper(e=null){const t=this.active;this.set_active(!1),this.#Z=e??void 0,this.set_active(t)}#Z;establish_tool_bar(){this._tool_bar||(this._tool_bar=s.d.create_for(this,{autoeval:!1,modified:!0}),this.parentElement.insertBefore(this._tool_bar,this))}remove_tool_bar(){this._tool_bar&&(this._tool_bar.remove(),this._tool_bar=void 0)}get_dom_extent(){if(document.body!==this&&document.body?.contains(this)){let e=this,t=this;return this._tool_bar&&(e.compareDocumentPosition(this._tool_bar)&Node.DOCUMENT_POSITION_PRECEDING&&(e=this._tool_bar),t.compareDocumentPosition(this._tool_bar)&Node.DOCUMENT_POSITION_FOLLOWING&&(t=this._tool_bar)),{first:e,last:t}}return null}static create_cell(e=null){const{parent:t=document.body,before:n=null,editable:r=i.LogbookManager.singleton.editable,innerText:o,active_element_mapper:s}=e??{},l=(0,a.T1)({parent:t,before:n,tag:this.custom_element_name});return o&&l.set_text(o),s&&l.set_active_element_mapper(s),l.establish_tool_bar(),l.set_editable(r),l}adjacent_cell(e=!1){const t=[...document.querySelectorAll(this.tagName)],n=t.indexOf(this);return-1===n?null:e?n>=t.length-1?null:t[n+1]:n<=0?null:t[n-1]}move_cell(e=null){const{parent:t,before:n}=(0,a.Aj)(e);if(t){const e=!!this._tool_bar;this.remove_tool_bar(),t.insertBefore(this,n),e&&this.establish_tool_bar()}else this.parentNode&&this.remove_cell()}remove_cell(){this.remove_tool_bar(),this.remove()}reset(){return this}#$(){const e=[[this,"focus",function(e){i.LogbookManager.singleton.set_active_cell(this),this.#N()&&this.#G().focus()},{capture:!0}]];for(const[t,n,r,a]of e)this.#c.add(t,n,r,a)}#K(){this.#c.attach(),this.removeAttribute("tabindex"),setTimeout((()=>this.#H()))}#V(){this.#c.detach()}connectedCallback(){this.#K()}disconnectedCallback(){this.#V()}adoptedCallback(){this.#K()}attributeChangedCallback(e,t,n){}static get observedAttributes(){return["xyzzy"]}static _init_static(){globalThis.customElements.define(this.custom_element_name,this)}}c._init_static(),r()}catch(e){r(e)}}))},6179:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{p:()=>m});var a=n(984),i=n(53),o=n(3088),s=n(9026),l=n(4429),c=n(3653),d=(n(6973),e([i,o,s,l,c]));[i,o,s,l,c]=d.then?(await d)():d;class m extends o.W{static custom_element_name="eval-cell";static#Y="data-input-type";static#X="data-output-element-id";get input_type(){return this.getAttribute(this.constructor.#Y)}set input_type(e){this.setAttribute(this.constructor.#Y,e),this._tool_bar?.set_type(e)}static get output_element_class(){return"eval-cell-output"}get output_element_id(){return this.getAttribute(this.constructor.#X)}set output_element_id(e){if(null==e||""===e)this.setAttribute(this.constructor.#X,"");else{const t=document.getElementById(e);if(!t)throw new Error("element with specified id does not exist");if(!(t instanceof HTMLElement))throw new Error("element specified by id must be an instance of HTMLElement");this.setAttribute(this.constructor.#X,e)}}get output_element(){const e=this.output_element_id;if(e){const t=document.getElementById(e);return t&&t instanceof HTMLElement?t:(console.warn("bad configuration for EvalCellElement: id does not specify an HTMLElement"),null)}return null}set output_element(e){if(e??=null,e&&(!e.id||!(e instanceof HTMLElement)))throw new Error("element must be null, undefined, or an instance of HTMLElement with an id");if(e&&document.getElementById(e.id)!==e)throw new Error("another element already exists with the same id as element");this.output_element_id=e?e.id:null}static create_output_element(e=null){const{parent:t,before:n}=e??{};return(0,a.T1)({parent:t,before:n,tag:"output",set_id:!0,attrs:{class:[this.output_element_class]}})}establish_output_element(){let e=this.output_element;if(!e){const e=this.get_dom_extent(),t=e?e.last.nextSibling:this.nextSibling,n=t?.parentElement??this.parentElement;this.output_element=this.constructor.create_output_element({parent:n,before:t})}return e.classList.add(this.constructor.output_element_class),e}remove_output_element(){const e=this.output_element;return e&&(this.output_element=null,e.remove()),this}move_cell(e=null){const{parent:t,before:n}=(0,a.Aj)(e),r=this.output_element,i=r&&!!(this.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING);if(super.move_cell(e),t&&r){const e=i?this:n;t.insertBefore(r,e)}}remove_cell(){this.remove_output_element(),super.remove_cell()}reset(){super.reset();const e=this.output_element;return e?(0,a.gX)(e):this.establish_output_element(),this}async eval(e=null){const{evaluator_class:t,eval_context:n}=e??{},r=t??s.v.class_for_content(this);if(!(r===s.v||r.prototype instanceof s.v))throw new Error("evaluator_class must be an instance of Evaluator");this.stop();const o=this.establish_output_element();(0,a.gX)(o);const c=new r(this,o,n);return this.#J=new l.X(c),this.#ee=!0,this._tool_bar?.set_for("running",!0),i.LogbookManager.singleton.emit_eval_state(this,!0),await new Promise((e=>setTimeout(e))),c._perform_eval().then((()=>{this.#ee=void 0,this._tool_bar?.set_for("running",!1),i.LogbookManager.singleton.emit_eval_state(this,!1)})).catch((e=>(this.stop(),c.ocx.render_error(e))))}#ee;#J;get evaluator_foreground(){return!!this.#ee}get can_stop(){return!!this.#J}stop(){if(this.#J)try{this.#J.stop()}catch(e){console.warn("error stopping evaluator",e,this.#J)}this.#J=void 0,this.#ee=void 0,this._tool_bar?.set_for("running",!1),i.LogbookManager.singleton.emit_eval_state(this,!1)}establish_tool_bar(){if(!this._tool_bar){let e=this.input_type||void 0;this._tool_bar=c.d.create_for(this,{autoeval:!1,type:{...e?{initial:e}:{},on:e=>(this.input_type=e.target.value,!0)},running:!0,modified:!1,run:!1}),this.parentElement.insertBefore(this._tool_bar,this)}}static create_cell(e=null){const{output_element:t}=e??{},n=super.create_cell(e);return t?n.output_element=t:n.establish_output_element(),n}get_dom_extent(){if(document.body!==this&&document.body?.contains(this)){let{first:e,last:t}=super.get_dom_extent();const n=this.output_element;return n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING&&(e=n),t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING&&(t=n)),{first:e,last:t}}return null}static _init_static(){globalThis.customElements.define(this.custom_element_name,this,{})}}m._init_static(),r()}catch(e){r(e)}}))},9026:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{P:()=>c,v:()=>a.v});var a=n(9728),i=n(6257),o=n(4687),s=n(6781),l=e([a,i,o,s]);function c(){return[i.I,o.F,s.J]}[a,i,o,s]=l.then?(await l)():l,r()}catch(d){r(d)}}))},9728:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{v:()=>c});var a=n(1896),i=n(4429),o=n(266),s=n(9026),l=e([i,o,s]);[i,o,s]=l.then?(await l)():l;class c extends i.T{static async eval(e,t,n=null){const r=new this(e,t,n);return r._perform_eval().catch((e=>r.ocx.render_error(e)))}constructor(e,t,n){if(super(),!(e instanceof HTMLElement))throw new Error("input_element must be an instance of HTMLElement");if(!(t instanceof HTMLElement))throw new Error("output_element must be an instance of HTMLElement");if(n??={},"object"!=typeof n)throw new Error("eval_context must be undefined, null, or an object");const r=new o.l(t);Object.defineProperties(this,{id:{value:(0,a.kE)(),enumerable:!0},input_element:{value:e,enumerable:!0},output_element:{value:t,enumerable:!0},eval_context:{value:n,enumerable:!0},ocx:{value:r,enumerable:!0}})}async _perform_eval(){throw new Error("NOT IMPLEMENTED")}static handled_input_types=[];static class_for_content(e){if(!(e instanceof Element))throw new Error("input_element must be an instance of Element");const t=(0,s.P)(),n=t[0],r=e.input_type;if(r)for(const e of t)if(e.handled_input_types.includes(r))return e;return n}}r()}catch(e){r(e)}}))},6781:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{J:()=>s});var a=n(9728),i=n(4429),o=e([a,i]);[a,i]=o.then?(await o)():o;class s extends a.v{static handled_input_types=["javascript"];async _perform_eval(){const e={style:void 0,eval_context:this.eval_context},t=this.ocx.renderer_for_type("javascript");this.add_stoppable(new i.X(t));const n=this.input_element.get_text();return this.ocx.invoke_renderer(t,n,e)}}r()}catch(e){r(e)}}))},6257:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{I:()=>s});var a=n(9728),i=n(4429),o=e([a,i]);[a,i]=o.then?(await o)():o;class s extends a.v{static handled_input_types=["markdown"];async _perform_eval(){const e=this.ocx.renderer_for_type("markdown");return this.add_stoppable(new i.X(e)),this.ocx.invoke_renderer(e,this.input_element.get_text(),{})}}r()}catch(e){r(e)}}))},4687:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F:()=>s});var a=n(9728),i=n(4429),o=e([a,i]);[a,i]=o.then?(await o)():o;class s extends a.v{static handled_input_types=["tex"];async _perform_eval(){const e=this.ocx.renderer_for_type("tex");return this.add_stoppable(new i.X(e)),this.ocx.invoke_renderer(e,this.input_element.get_text(),{style:void 0,inline:!1,rtl:!1})}}r()}catch(e){r(e)}}))},1117:(e,t,n)=>{function r(){return[{label:"File",collection:[{label:"Recent logbooks",id:"recents",collection:[]},"---",{label:"Reset cells",item:{command:"reset"},id:"reset"},{label:"Clear document",item:{command:"clear"},id:"clear"},"---",{label:"Save",item:{command:"save"},id:"save"},{label:"Save as...",item:{command:"save-as"}},"---",{label:"Settings...",item:{command:"settings"}}]},{label:"Cell",collection:[{label:"Eval",item:{command:"eval-and-refocus"},id:"eval-and-refocus"},{label:"Eval and stay",item:{command:"eval"},id:"eval"},{label:"Eval before",item:{command:"eval-before"},id:"eval-before"},{label:"Eval all",item:{command:"eval-all"},id:"eval-all"},"---",{label:"Stop cell",item:{command:"stop"},id:"stop"},{label:"Stop all",item:{command:"stop-all"},id:"stop-all"},"---",{label:"Reset cell",item:{command:"reset-cell"},id:"reset-cell"},"---",{label:"Focus up",item:{command:"focus-up"},id:"focus-up"},{label:"Focus down",item:{command:"focus-down"},id:"focus-down"},"---",{label:"Move up",item:{command:"move-up"},id:"move-up"},{label:"Move down",item:{command:"move-down"},id:"move-down"},{label:"Add before",item:{command:"add-before"},id:"add-before"},{label:"Add after",item:{command:"add-after"},id:"add-after"},{label:"Delete",item:{command:"delete"},id:"delete"},"---",{label:"Shrink inputs",item:{command:"shrink-inputs"},id:"shrink-inputs"},{label:"Enlarge inputs",item:{command:"enlarge-inputs"},id:"enlarge-inputs"},{label:"Collapse inputs",item:{command:"collapse-inputs"},id:"collapse-inputs"},{label:"Expand inputs",item:{command:"expand-inputs"},id:"expand-inputs"}]},{label:"Help",collection:[{label:"Help...",item:{command:"help"}}]}]}function a(){return{"create-cell":["CmdOrCtrl-Shift-Alt-N"],"reset-cell":[],reset:[],clear:[],save:["CmdOrCtrl-S"],"save-as":["CmdOrCtrl-Shift-S"],eval:["CmdOrCtrl-Enter"],"eval-and-refocus":["Shift-Enter"],"eval-before":["CmdOrCtrl-Shift-Enter"],"eval-all":["CmdOrCtrl-Shift-Alt-Enter"],stop:["CmdOrCtrl-Alt-!"],"stop-all":["CmdOrCtrl-Shift-Alt-!"],"focus-up":["Alt-Up"],"focus-down":["Alt-Down"],"move-up":["CmdOrCtrl-Alt-Up"],"move-down":["CmdOrCtrl-Alt-Down"],"add-before":["CmdOrCtrl-Alt-Shift-Up"],"add-after":["CmdOrCtrl-Alt-Shift-Down"],delete:["CmdOrCtrl-Alt-Backspace"],"set-mode-markdown":["Alt-M m"],"set-mode-tex":["Alt-M t"],"set-mode-javascript":["Alt-M j"],"shrink-inputs":["CmdOrCtrl-Alt-Left"],"enlarge-inputs":["CmdOrCtrl-Alt-Right"],"collapse-inputs":["CmdOrCtrl-Shift-Alt-Left"],"expand-inputs":["CmdOrCtrl-Shift-Alt-Right"],settings:["CmdOrCtrl-,"],help:[]}}function i(e){const t={"create-cell":e.command_handler__create_cell,"reset-cell":e.command_handler__reset_cell,reset:e.command_handler__reset,clear:e.command_handler__clear,save:e.command_handler__save,"save-as":e.command_handler__save_as,eval:e.command_handler__eval,"eval-and-refocus":e.command_handler__eval_and_refocus,"eval-before":e.command_handler__eval_before,"eval-all":e.command_handler__eval_all,stop:e.command_handler__stop,"stop-all":e.command_handler__stop_all,"focus-up":e.command_handler__focus_up,"focus-down":e.command_handler__focus_down,"move-up":e.command_handler__move_up,"move-down":e.command_handler__move_down,"add-before":e.command_handler__add_before,"add-after":e.command_handler__add_after,delete:e.command_handler__delete,"set-mode-markdown":e.command_handler__set_mode_markdown,"set-mode-tex":e.command_handler__set_mode_tex,"set-mode-javascript":e.command_handler__set_mode_javascript,"shrink-inputs":e.command_handler__shrink_inputs,"enlarge-inputs":e.command_handler__enlarge_inputs,"collapse-inputs":e.command_handler__collapse_inputs,"expand-inputs":e.command_handler__expand_inputs,settings:e.command_handler__show_settings_dialog,help:e.command_handler__show_help};for(const n in t)t[n]=t[n].bind(e);return t}n.d(t,{$R:()=>i,ZD:()=>a,p7:()=>r})},3612:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(6973);const a="file:///home/ed/code/logbook/src/help-window.js";function i(){window.open(new URL("../help.html",(0,r.h)(a)))}},7027:(e,t,n)=>{n.a(e,(async(e,t)=>{try{n(2358);var r=n(3653),a=n(3088),i=n(6179),o=n(53),s=e([r,a,i,o]);function l(){o.LogbookManager.singleton;const{view_var_name:e,view_var_value_edit:t,view_var_value_output:n,autoeval_var_name:r}=o.LogbookManager,a=new URLSearchParams(document.location.search).get(e)??document.body?.getAttribute(e)??document.documentElement.getAttribute(e),i=new URLSearchParams(document.location.search).get(r)??document.body?.getAttribute(r)??document.documentElement.getAttribute(r);switch(a){case t:o.LogbookManager.singleton.expand_input_output_split(!0);break;case n:o.LogbookManager.singleton.collapse_input_output_split();break;default:a&&console.warn(`ignored unknown "${e}" parameter "${a}"`)}(i||""===i)&&(i===(!1).toString()||o.LogbookManager.singleton.inject_command("eval-all")),globalThis.logbook_manager=o.LogbookManager.singleton}[r,a,i,o]=s.then?(await s)():s,"interactive"===document.readyState||"complete"===document.readyState?l():window.addEventListener("load",(e=>{l()}),{once:!0}),t()}catch(c){t(c)}}))},53:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{LogbookManager:()=>v});var a=n(6179),i=n(3653),o=n(6092),s=n(4429),l=n(2050),c=n(1117),d=n(984),m=n(4571),h=n(3231),u=n(3082),_=n(7569),p=n(345),g=n(1951),A=n(3612),f=n(6973),b=(n(7654),n(7451),e([a,i,o,s,l,m,h,u]));[a,i,o,s,l,m,h,u]=b.then?(await b)():b;class v{static get singleton(){return this.#te||(this.#te=new this,this.#te.initialize()),this.#te}static#te;static view_var_name="view";static view_var_value_edit="edit";static view_var_value_output="output";static autoeval_var_name="autoeval";constructor(){this.#ne=!0,this.#re=null,this.#ae=!1,this.reset_global_eval_context(),this.#ie=new o.l,this.#oe=this.#ie.subscribe(this.#se.bind(this)),this.#le=(0,c.$R)(this),this.#ce=new l.Qm(window,this.#de.bind(this));const e=new l.d4((0,c.ZD)());this.push_key_map(e),this.#ce.attach(),this.#me=null}#ne;#re;#ae;#he;#ue;#ie;#oe;#le;#ce;#_e;#pe;#ge;#Ae;#fe;#be;#ve;#me;static resize_handle_class="resize-handle";static resize_handle_dragging_state_class="dragging";static collapse_cells_state_class="collapse-cells";static input_output_split_css_variable="--input-output-split";static is_stacked_css_variable="--is-stacked";static max_split_ratio=.85;static collapse_split_ratio=.001;static split_step_size_ratio=.05;static split_neutral_ratio=.5;get header_element(){return this.#ue}get main_element(){return this.#_e}get editable(){return this.#ne}set_editable(e){e=!!e,this.#ne=e;for(const t of this.constructor.get_cells())t.set_editable(e)}get active_cell(){return this.#re}set_active_cell(e){this.#re=e??null;for(const e of this.constructor.get_cells())e.set_active(e===this.active_cell)}static get_cells(){return[...document.getElementsByTagName(a.p.custom_element_name)]}get global_eval_context(){return this.#he}reset_global_eval_context(){this.#he={}}reset(){this.stop(),m.Th.reset_classes(),this.reset_global_eval_context(),this.#ve=void 0;for(const e of this.constructor.get_cells())e.reset();return this}clear(){this.reset(),(0,d.gX)(this.main_element),this.main_element.appendChild(this.#ge);const e=this.create_cell();e.focus(),this.set_active_cell(e),this.expand_input_output_split()}stop(){try{this.#me?.stop(),this.#me=null}catch(e){console.warn("error while stopping this.#multi_eval_manager",this.#me,e)}for(const e of this.constructor.get_cells())try{e.stop()}catch(t){console.warn("error while stopping cell",e,t)}}initialize(){if(this.#ae)throw new Error("initialize() called more than once");this.#ae=!0;try{this.#ye(),this.#we(),this.#Ce(),this.set_editable(this.editable);const e=this.constructor.get_cells();e.length;for(const t of e)t.establish_output_element();const t=e.find((e=>e.active))??e[0]??this.create_cell();this.set_active_cell(t),t.focus(),this.#ge.addEventListener("mousedown",(e=>this.#ke(e))),window.addEventListener("beforeunload",(e=>(e.preventDefault(),e.returnValue="")))}catch(e){y(e)}}reset_key_map_stack(){this.#ce.reset_key_map_stack()}push_key_map(e){this.#ce.push_key_map(e)}pop_key_map(){return this.#ce.pop_key_map()}remove_key_map(e,t=!1){return this.#ce.remove_key_map(e,t)}static header_element_tag="header";static main_element_tag="main";create_cell(e=null){e??={},e.output_element&&console.warn("options.output_element ignored"),e.active_element_mapper&&console.warn("options.active_element_mapper ignored");const{parent:t,before:n}=e,{cell_parent:r,cell_before:i,output_element_parent:o,output_element_before:s}=this.#Ee({parent:t,before:n}),l=a.p.create_output_element({parent:o,before:s});return a.p.create_cell({editable:this.editable,...e,parent:r,before:i,output_element:l,active_element_mapper:this.constructor.active_element_mapper.bind(this.constructor)})}#ye(){if(document.querySelector(this.constructor.header_element_tag))throw new Error(`bad format for document: element with id ${this.constructor.header_element_tag} already exists`);if(document.querySelector(this.constructor.main_element_tag))throw new Error(`bad format for document: element with id ${this.constructor.main_element_tag} already exists`);document.head||document.documentElement.insertBefore(document.createElement("head"),document.documentElement.firstChild),document.querySelector('link[rel="icon"]')||(0,d.T1)({parent:document.head,tag:"link",attrs:{rel:"icon",href:(0,f.h)("dist/favicon.ico")}}),document.body||document.documentElement.appendChild(document.createElement("body")),this.#_e=document.createElement(this.constructor.main_element_tag),this.#ge=(0,d.T1)({parent:this.#_e,attrs:{class:[this.constructor.resize_handle_class]}});for(const e of document.querySelectorAll(a.p.custom_element_name)){const{cell_parent:t,cell_before:n,output_element_parent:r,output_element_before:i}=this.#Ee({parent:this.#_e});t.insertBefore(e,n);const o=e.output_element;o?r.insertBefore(o,i):e.output_element=a.p.create_output_element({parent:r,before:i}),e.set_active_element_mapper(this.constructor.active_element_mapper.bind(this.constructor))}for(;document.body.firstChild;){const e=document.body.firstChild;e.parentNode.removeChild(e),(e.nodeType!==Node.TEXT_NODE||e.nodeValue.trim().length>0)&&console.warn("removed extraneous node from incoming document",e)}this.#ue=document.createElement(this.constructor.header_element_tag),document.body.appendChild(this.#ue),document.body.appendChild(this.#_e);for(const e of this.constructor.get_cells()){e.establish_tool_bar();const t=e.output_element;e.output_element=null,e.output_element=t}}#xe;#Ie;#we(e=!1){if(e){const e=["default-src 'self' 'unsafe-eval'","style-src   'self' 'unsafe-inline' *","script-src  'self' 'unsafe-inline' 'unsafe-eval' *","img-src     'self' data: blob: *","media-src   'self' data: blob: *","connect-src data:"].join("; ");(0,d.T1)({parent:document.head,tag:"meta",attrs:{"http-equiv":"Content-Security-Policy",content:e}})}}#Ce(){if(!this.header_element)throw new Error("bad format for document: header element does not exist");this.#Ae=h.j.create(this.header_element,(0,c.p7)(),c.ZD,null),this.#fe=this.#Ae.commands.subscribe(this.#de.bind(this)),this.#be=this.#Ae.selects.subscribe(this.#Be.bind(this)),this.#pe=i.d.create_for(this.#ue,{modified:!0,running:!0}),this.#ue.appendChild(this.#pe)}static#Te=[a.p.custom_element_name,`.${a.p.output_element_class}`].join(",");#je(){const e=document.querySelector(this.constructor.main_element_tag);if(!e||e!==this.main_element)throw new Error("bad format for document");if(!this.main_element)throw new Error("bad format for document: this.main_element not set");const{view_var_name:t,autoeval_var_name:n}=this.constructor,r=document.body?.getAttribute(t)??document.documentElement.getAttribute(t),i=document.body?.getAttribute(n)??document.documentElement.getAttribute(n);return`<!DOCTYPE html>\n<html lang="en"${"string"!=typeof r?"":` ${t}${r?`="${r.replaceAll('"',"&quot;")}"`:""}`}${"string"!=typeof i?"":` ${n}${i?`="${i.replaceAll('"',"&quot;")}"`:""}`}>\n<head>\n    <meta charset="utf-8">\n    <script type="module" src="../dist/main.js"><\/script>\n</head>\n<body>\n${[...this.main_element.querySelectorAll(this.constructor.#Te)].map((e=>e instanceof a.p?e.get_outer_html():e.outerHTML)).join("\n")}\n</body>\n</html>\n`}get_suggested_file_name(){return window.location.pathname.split("/").slice(-1)[0]}#ke(e){if(!this.active_cell)throw new Error("resize failed: no active cell");e.preventDefault(),e.stopPropagation(),this.#ge.classList.add(this.constructor.resize_handle_dragging_state_class);const t=this.get_resize_metrics(),{mouse_x_min:n,mouse_x_max:r,split_collapse_px:a}=t;let i=e.x;const o=e=>{const a=i<n||i>r?0:e.x-i;i=e.x;const o=this.get_current_split_px()+a;this.#ze(o,t)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",(e=>{document.removeEventListener("mousemove",o),this.#ge.classList.remove(this.constructor.resize_handle_dragging_state_class)}),{once:!0})}is_collapsed(){return this.#_e.classList.contains(this.constructor.collapse_cells_state_class)}is_stacked(){return window.getComputedStyle(document.documentElement).getPropertyValue(this.constructor.is_stacked_css_variable).trim().length>0}get_current_split_px(){if(!this.active_cell)throw new Error("no active cell");const e=this.constructor.#Se(this.active_cell);return parseFloat(window.getComputedStyle(e).width)}step_input_output_split_size(e=!1){const t=this.get_resize_metrics(),{split_step_size_px:n}=t,r=this.get_current_split_px(),a=e?r+n:r-n;this.#ze(a,t)}collapse_input_output_split(){const e=this.get_resize_metrics(),t=e.split_min_px;this.#ze(t,e)}expand_input_output_split(e=!1){const t=this.get_resize_metrics(),n=this.get_current_split_px(),r=t.split_max_px;(e||n<=0)&&n<r&&this.#ze(r,t)}set_input_output_split(e){this.#ze(e,this.get_resize_metrics())}#ze(e,t){if("number"!=typeof e)throw new Error("new_split_px must be a number");if("object"!=typeof t)throw new Error("resize_metrics must be an object");const{split_min_px:n,split_max_px:r,split_collapse_px:a}=t,i=e<n?`${n}px`:e>r?`${r}px`:`${e}px`;document.documentElement.style.setProperty(this.constructor.input_output_split_css_variable,i),e<=t.split_collapse_px?this.#_e.classList.add(this.constructor.collapse_cells_state_class):this.#_e.classList.remove(this.constructor.collapse_cells_state_class)}get_resize_metrics(){const e=window.getComputedStyle(this.#_e),t=parseFloat(e.marginLeft),n=parseFloat(e.width),r=n*this.constructor.max_split_ratio;return{split_min_px:0,split_max_px:r,split_collapse_px:n*this.constructor.collapse_split_ratio,split_step_size_px:n*this.constructor.split_step_size_ratio,split_neutral_px:n*this.constructor.split_neutral_ratio,mouse_x_min:t+0,mouse_x_max:t+r}}static cell_container_class="cell-container";static cell_input_container_class="cell-input-container";#Ee(e=null){const{parent:t=this.main_element,before:n=null}=e??{},r=(0,d.T1)({parent:t,before:n,attrs:{class:[this.constructor.cell_container_class]}}),a=(0,d.T1)({parent:r,attrs:{class:[this.constructor.cell_input_container_class]}});return{cell_container:r,cell_input_container:a,cell_parent:a,cell_before:null,output_element_parent:r,output_element_before:null}}static#Le(e){if(!(e instanceof a.p))throw new Error("cell must be an instance of EvalCellElement");const t=e.parentElement?.parentElement;if(!t||!t.parentElement||!t.classList.contains(this.cell_container_class))throw new Error("incorrect cell structure");return t}static#Se(e){const t=this.#Le(e).querySelector(`.${this.cell_input_container_class}`);if(!t)throw new Error("incorrect cell structure");return t}static active_element_mapper(e){return this.#Le(e)}inject_key_event(e){if(!this.contains(e.target)){const t=v.singleton.active_cell;t&&(e={...e,key:e.key,metaKey:e.metaKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,preventDefault:event.preventDefault.bind(event),stopPropagation:event.stopPropagation.bind(event),target:t,currentTarget:t})}this.#ce.inject_key_event(e)}#de(e){let t=!1;try{t=this.#De(e)}catch(t){console.error("error processing command",e,t)}t||(0,g.V)()}inject_command(e){return this.#De({command:e,target:this.active_cell})}#De(e){if(e){if(e.target){const t={...e,target:this.active_cell},n=this.#le[t.command];return!!n&&n(t)}return!1}return!1}#Be(){const e=this.constructor.get_cells(),t=this.active_cell,n=e.indexOf(t),r=this.editable;this.#Ae.set_menu_state("clear",{enabled:r}),this.#Ae.set_menu_state("reset",{enabled:r}),this.#Ae.set_menu_state("reset-cell",{enabled:r}),this.#Ae.set_menu_state("focus-up",{enabled:t&&n>0}),this.#Ae.set_menu_state("focus-down",{enabled:t&&n<e.length-1}),this.#Ae.set_menu_state("move-up",{enabled:t&&n>0}),this.#Ae.set_menu_state("move-down",{enabled:t&&n<e.length-1}),this.#Ae.set_menu_state("add-before",{enabled:r&&t}),this.#Ae.set_menu_state("add-after",{enabled:r&&t}),this.#Ae.set_menu_state("delete",{enabled:r&&t}),this.#Ae.set_menu_state("eval-and-refocus",{enabled:r&&t}),this.#Ae.set_menu_state("eval",{enabled:r&&t}),this.#Ae.set_menu_state("eval-before",{enabled:r&&t}),this.#Ae.set_menu_state("eval-all",{enabled:r&&t}),this.#Ae.set_menu_state("stop",{enabled:t?.can_stop}),this.#Ae.set_menu_state("stop-all",{enabled:e.some((e=>e.can_stop))}),this.#pe.set_for("modified",!1),this.#Ae.set_menu_state("save",{enabled:!1})}emit_eval_state(e,t){this.#ie.dispatch({cell:e,eval_state:t})}#se(e){const{cell:t,eval_state:n}=e,r=this.constructor.get_cells().some((e=>e.evaluator_foreground));this.#pe.set_for("running",r)}command_handler__create_cell(e){let t=null;const n=e.target?.adjacent_cell?.(!0);n&&(t=this.constructor.#Le(n));const r=this.create_cell({before:t});return!!r&&(r.focus(),this.set_active_cell(r),!0)}command_handler__reset_cell(e){const t=e.target;return!!(t&&t instanceof a.p)&&(t.reset(),!0)}command_handler__reset(e){return this.reset(),!0}async command_handler__clear(e){return await _.QH.run("Clear document?")?(this.clear(),!0):(this.active_cell?.focus(),!1)}async command_handler__save(e){const t=await p.H.save(this.#je.bind(this),{file_handle:this.#ve,prompt_options:{suggestedName:this.get_suggested_file_name()}}),{canceled:n,file_handle:r,stats:a}=t;return n||(this.#ve=r??void 0),!0}async command_handler__save_as(e){return this.#ve=void 0,await p.H.save(this.#je.bind(this),{prompt_options:{suggestedName:this.get_suggested_file_name()}}),!0}async command_handler__eval(e){const t=e.target;return!!(t&&t instanceof a.p)&&(await t.eval({eval_context:v.singleton.global_eval_context}),!0)}async command_handler__eval_and_refocus(e){const t=e.target;return!!(t&&t instanceof a.p)&&(await t.eval({eval_context:this.global_eval_context}),(t.adjacent_cell(!0)??this.create_cell()).focus(),!0)}async command_handler__eval_before(e){const t=e.target;if(t&&t instanceof a.p){this.stop();const e=this.#me=new s.T;try{this.reset_global_eval_context();for(const n of this.constructor.get_cells()){if(e.stopped)break;if(n.focus(),n===t)break;await n.eval({eval_context:this.global_eval_context})}}finally{this.#me=null}return!0}return!1}async command_handler__eval_all(e){const t=e.target;if(t&&t instanceof a.p){this.stop();const e=this.#me=new s.T;try{this.reset_global_eval_context();for(const t of this.constructor.get_cells()){if(e.stopped)break;t.focus(),await t.eval({eval_context:this.global_eval_context})}}finally{this.#me=null}return!0}return!1}command_handler__stop(e){const t=e.target;return!!(t&&t instanceof a.p)&&(t.stop(),!0)}command_handler__stop_all(e){return this.stop(),!0}command_handler__focus_up(e){const t=e.target.adjacent_cell(!1);return!!t&&(t.focus(),!0)}command_handler__focus_down(e){const t=e.target.adjacent_cell(!0);return!!t&&(t.focus(),!0)}command_handler__move_up(e){const t=e.target;if(t){const e=t.adjacent_cell(!1);if(e){const n=this.constructor.#Le(t),r=n.parentElement,a=this.constructor.#Le(e);return(0,d.V1)(n,{parent:r,before:a}),t.focus(),!0}return!1}return!1}command_handler__move_down(e){const t=e.target;if(t){const e=t.adjacent_cell(!0);if(e){const n=this.constructor.#Le(t),r=n.parentElement,a=this.constructor.#Le(e).nextSibling;return(0,d.V1)(n,{parent:r,before:a}),t.focus(),!0}return!1}return!1}command_handler__add_before(e){const t=e.target;if(!t)return!1;const n=this.constructor.#Le(t);return this.create_cell({before:n}).focus(),!0}command_handler__add_after(e){const t=e.target;if(!t)return!1;const n=this.constructor.#Le(t);return this.create_cell({before:n.nextSibling,parent:n.parentElement}).focus(),!0}async command_handler__delete(e){const t=e.target;if(!t)return!1;if((t.get_text().trim().length>0||t.output_element?.firstChild)&&!await _.QH.run("Cannot undo delete of non-empty cell.\nContinue?"))return t.focus(),!1;let n=t.adjacent_cell(!0)??t.adjacent_cell(!1);this.constructor.#Le(t).remove();let r=!1;return n||(n=this.create_cell(),r=!0),n.focus(),this.set_active_cell(n),r&&this.expand_input_output_split(),!0}command_handler__set_mode_markdown(e){const t=e.target;return!!(t&&t instanceof a.p)&&(t.input_type="markdown",!0)}command_handler__set_mode_tex(e){const t=e.target;return!!(t&&t instanceof a.p)&&(t.input_type="tex",!0)}command_handler__set_mode_javascript(e){const t=e.target;return!!(t&&t instanceof a.p)&&(t.input_type="javascript",!0)}command_handler__shrink_inputs(e){return this.step_input_output_split_size(!1),this.active_cell.focus(),!0}command_handler__enlarge_inputs(e){return this.step_input_output_split_size(!0),this.active_cell.focus(),!0}command_handler__collapse_inputs(e){return this.collapse_input_output_split(),!0}command_handler__expand_inputs(e){return this.expand_input_output_split(),this.active_cell.focus(),!0}command_handler__show_settings_dialog(e){return u.DL.run(),!0}command_handler__show_help(e){return(0,A.Z)(),!0}}function y(e){console.error("initialization failed",e.stack),(0,d.gX)(document.body);const t=document.createElement("h1");t.innerText="Initialization Failed";const n=document.createElement("pre");n.classList.add("error-message"),n.innerText=e.stack,document.body.appendChild(t),document.body.appendChild(n)}r()}catch(w){r(w)}}))},266:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{l:()=>d});var a=n(984),i=n(6092),o=n(4429),s=n(4571),l=n(6227),c=e([i,o,s,l]);[i,o,s,l]=c.then?(await c)():c;class d{constructor(e){if(!(e instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");Object.defineProperties(this,{element:{value:e,enumerable:!0}}),this.#Me=new i.l,this.#s=!1}#Me;#s;get new_stoppables(){return this.#Me}get stopped(){return this.#s}stop(){this.#s=!0}static sprintf(e,...t){return(0,l.g)(e,...t)}static async sleep(e){return(0,a.li)(1e3*e)}static async delay_ms(e){return(0,a.li)(e)}static async next_tick(){return(0,a.rf)()}static async next_micro_tick(){return(0,a.pX)()}static get_svg_string(e){let t=(new XMLSerializer).serializeToString(e);return t=t.replace(/(\w+)?:?xlink=/g,"xmlns:xlink="),t=t.replace(/NS\d+:href/g,"xlink:href"),t}static clear_element(e){return(0,a.gX)(e)}static scroll_element_into_view(e){return(0,a.v0)(e)}static set_element_attrs(e,t){return(0,a.Dz)(e,t)}static update_element_style(e,t){return(0,a.Hp)(e,t)}static create_element(e=null,t=!1){return(0,a.T1)(e,t)}static create_element_mapping(e=null){return this.create_element_mapping(e,!0)}static create_element_child(e,t=null,n=!1){return void 0!==t?.parent||void 0!==t?.before?console.warn("options.parent and/or options.before override element argument"):t={...t??{},parent:e,before:null},(0,a.T1)(t,n)}static create_element_child_mapping(e,t=null){return this.create_element_child(t,!0)}static create_element_child_text_node(e,t,n=null){return(0,a.Xc)(e,t,n)}static normalize_element_text(e){return(0,a.rb)(e)}abort_if_stopped(e){if(this.stopped)throw e??="operation",new Error(`${e} invoked on stopped output context`)}AIS(e){if("function"!=typeof e)throw new Error("f must be a function");return e instanceof(async()=>{}).constructor?async(...t)=>{this.abort_if_stopped(e.name);const n=await e.apply(null,t);return this.abort_if_stopped(e.name),n}:(...t)=>{this.abort_if_stopped(e.name);const n=e.apply(null,t);return this.abort_if_stopped(e.name),n}}sprintf(e,...t){return this.abort_if_stopped(),this.constructor.sprintf(e,...t)}async sleep(e){return this.abort_if_stopped(),this.constructor.delay_ms(1e3*e)}async delay_ms(e){return this.abort_if_stopped(),this.constructor.delay_ms(e)}async next_tick(){return this.abort_if_stopped(),this.constructor.next_tick()}async next_micro_tick(){return this.abort_if_stopped(),this.constructor.next_micro_tick()}clear(){return this.abort_if_stopped(),this.constructor.clear_element(this.element),this}scroll_into_view(){return this.abort_if_stopped(),this.constructor.scroll_element_into_view(this.element),this}set_attrs(e){return this.abort_if_stopped(),this.constructor.set_element_attrs(this.element,e),this}update_style(e){return this.abort_if_stopped(),this.constructor.update_element_style(this.element,e),this}create_child(e=null,t=!1){return this.abort_if_stopped(),this.constructor.create_element_child(this.element,e,t)}create_child_mapping(e=null){return this.abort_if_stopped(),this.create_child(e,!0)}create_child_ocx(e=null){this.abort_if_stopped(),e??={};const t=this.element.getAttribute("style");return t&&(e.attrs={...e.attrs??{},style:t}),new this.constructor(this.create_child(e))}create_child_text_node(e,t=null){return this.abort_if_stopped(),this.constructor.create_element_child_text_node(this.element,e,t)}normalize_text(){return this.abort_if_stopped(),this.constuctor.normalize_element_text(this.element),this}async render(e,t,n=null){const r=n?.ocx??this,a=r.renderer_for_type(e);return r.invoke_renderer(a,t,n).catch((e=>r.render_error(e)))}async render_text(e,t=null){const n=t?.ocx??this;return e??="","string"!=typeof e&&(e=e?.toString()??""),n.render("text",e,t)}async render_error(e,t=null){return(t?.ocx??this).render("error",e,t)}async render_value(e,t=null){const n=t?.ocx??this;let r;return r=void 0===e?"[undefined]":"function"==typeof e?.toString?e.toString():"[unprintable value]",n.render_text(r,t)}async println(e,t=null){return(t?.ocx??this).render_text((e??"")+"\n",t)}async printf(e,...t){const n=this;if(null!=e){"string"!=typeof e&&(e=e.toString());const r=n.constructor.sprintf(e,...t);return n.render_text(r).catch((e=>n.render_error(e)))}}async print__(e=null){(e?.ocx??this).create_child({tag:"hr"})}async javascript(e,t=null){return(t?.ocx??this).render("javascript",e,t)}async markdown(e,t=null){return(t?.ocx??this).render("markdown",e,t)}async tex(e,t=null){return(t?.ocx??this).render("tex",e,t)}async image_data(e,t=null){return(t?.ocx??this).render("image_data",e,t)}async graphviz(e,t=null){return(t?.ocx??this).render("graphviz",e,t)}async plotly(e,t=null){return(t?.ocx??this).render("plotly",e,t)}async canvas_image(e,t=null){return(t?.ocx??this).render("canvas-image",e,t)}renderer_for_type(e){this.abort_if_stopped();const t=s.Th.class_from_type(e);if(t)return new t;throw new Error(`unknown output type "${e}"`)}async invoke_renderer(e,t,n=null){const r=n?.ocx??this;return r.abort_if_stopped(),r.#Me.dispatch(new o.X(e)),e.render(r,t,n).catch((t=>{throw e.stop(),t})).finally((()=>r.abort_if_stopped()))}async invoke_renderer_for_type(e,t,n=null){const r=n?.ocx??this;r.abort_if_stopped();const a=r.renderer_for_type(e);return r.invoke_renderer(a,t,n).finally((()=>r.abort_if_stopped()))}}r()}catch(e){r(e)}}))},4571:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F8:()=>y,Gh:()=>k,O4:()=>E,Th:()=>p,Tp:()=>w,YP:()=>C,np:()=>v});var a=n(3393),i=n(1672),o=n(9072),s=n(6187),l=n(9947),c=n(6919),d=n(3050),m=n(8567),h=n(7012),u=n(6358),_=e([a,i,o,s,l,c,d,m,h,u]);[a,i,o,s,l,c,d,m,h,u]=_.then?(await _)():_;const p=a.T,g=[i.t,o.F,s.$,l._,c.f,d.I,m.L,h.G,u.b];function A(e){return e?.prototype instanceof p}let f,b;function v(e){return b.get(e)}function y(){return[...f]}function w(e){if(!Array.isArray(e))throw new Error("new_renderer_classes must be an Array");const t=new Set;let n=!1;for(const r of e){if(!A(r))throw new Error("new_renderer_classes must be an Array of Renderer subsclasses");if(t.has(r.type))throw new Error(`new_renderer_classes contains multiple entries with type "${r.type}"`);r.type===o.F.type&&(n=!0),t.add(r.type)}n||(e=[...e,o.F]),f=[...e],b=new Map(f.map((e=>[e.type,e])))}function C(){w(g)}function k(e){if(!A(e))throw new Error("renderer_class must be a subclass of Renderer");w([e,...f.filter((t=>t.type!==e.type))])}function E(e){w(f.filter((t=>t.type!==e.type)))}C(),r()}catch(x){r(x)}}))},6358:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{b:()=>o});var a=n(3393),i=e([a]);a=(i.then?(await i)():i)[0];class o extends a.T{static type="canvas-image";async render(e,t,n){if("function"!=typeof t)throw new Error("canvas_renderer must be a function");n??={},void 0!==n.tag&&console.warn("overriding options.tag value",n.tag),void 0!==n.attrs?.["data-type"]&&console.warn('overriding options.attrs["data-type"] value',n.attrs["data-type"]),void 0!==n.attrs?.src&&console.warn("overriding options.src value",n.attrs.src);const r={...n,tag:"img",attrs:{...n.attrs??{},"data-type":this.type}},a=e.constructor.create_element({tag:"canvas",attrs:{...n.attrs??{},width:n.attrs?.width,height:n.attrs?.height}});return await t(a),r.attrs.src=a.toDataURL(),e.create_child(r)}}r()}catch(e){r(e)}}))},5717:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(984),a=n(6973);let i;async function o(){return i||(await(0,r.h0)(document.head,(0,a.h)("dist/d3.min.js")),i=globalThis.d3),i}},9072:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F:()=>o});var a=n(3393),i=e([a]);a=(i.then?(await i)():i)[0];class o extends a.T{static type="error";static error_element_class="error";static error_element_text_color="red";async render(e,t,n){const r=n?.style,a=[];t.stack?a.push(t.stack):a.push(t.message||"error");const i=a.join("\n"),o=e.create_child({tag:"pre",attrs:{"data-type":this.type},style:{...r??{},color:this.constructor.error_element_text_color}});return o.innerText=i,o}}r()}catch(e){r(e)}}))},8567:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{L:()=>s});var a=n(3393),i=n(6105),o=e([a]);a=(o.then?(await o)():o)[0];class s extends a.T{static type="graphviz";async render(e,t,n){const r=n?.style,a=e.create_child({attrs:{"data-type":this.type},style:r,set_id:!0}),o=`#${a.id}`,s=[];t?.node_config&&s.push(`node ${t.node_config}`);for(const e of t?.nodes??[])if("string"==typeof e){const t=e;s.push(t)}else{const[t,n]=e;s.push(`${t} [${n}]`)}for(const[e,n,r]of t?.edges??[])s.push(`${e}->${n}${r?`[${r}]`:""}`);const l=`digraph { ${s.join(";")} }`;return await(0,i.s)(o,l,{}),a}}r()}catch(e){r(e)}}))},6105:(e,t,n)=>{n.d(t,{s:()=>s});var r=n(5717),a=n(984),i=n(6973);let o=!1;async function s(e,t,n){const s=await async function(){const e=await(0,r.M)();return o||(await(0,a.h0)(document.head,(0,i.h)("dist/graphviz.umd.js")),await(0,a.h0)(document.head,(0,i.h)("dist/d3-graphviz.min.js")),o=!0),e}(),{transition:l="main",ease:c=s.easeLinear,delay:d=0,duration:m=0,logEvents:h=!0}=n??{};return new Promise(((n,r)=>{try{function a(...e){r(new Error(e[0]))}const i=s.select(e).graphviz({useWorker:!1,useSharedWorker:!1});i.transition((function(){return s.transition(l).ease(c).delay(d).duration(m)})).logEvents(h).onerror(a).on("initEnd",(function(){i.renderDot(t).onerror(a).on("end",n)}))}catch(o){r(o)}}))}},3050:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{I:()=>o});var a=n(3393),i=e([a]);a=(i.then?(await i)():i)[0];class o extends a.T{static type="image-data";async render(e,t,n){const r=n?.style,a=e.create_child({attrs:{"data-type":this.type}}),i=e.constructor.create_element_child(a,{tag:"canvas",style:r}).getContext("2d"),o=Array.isArray(t)?t:[t];for(const{x:e=0,y:t=0,image_data:n}of o)i.putImageData(n,e,t);return a}}r()}catch(e){r(e)}}))},6919:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{f:()=>b});var a=n(6973),i=n(53),o=n(3393),s=n(1672),l=n(7783),c=n(266),d=n(4429),m=n(1946),h=n(5717),u=n(7165),_=e([i,o,s,l,c,d]);[i,o,s,l,c,d]=_.then?(await _)():_;const p="file:///home/ed/code/logbook/src/renderer/javascript-renderer/_.js",g=new URL("../../../lib/",(0,a.h)(p)),A=new Function("path","return import(path);"),f=Object.getPrototypeOf((async function*(){})).constructor;class b extends o.T{static type="javascript";async render(e,t,n=null){const{style:r,eval_context:a=i.LogbookManager.singleton.global_eval_context,inline:o}=n??{};!r&&o||(e=e.create_child_ocx({tag:o?"span":"div",attrs:{"data-type":this.type,class:s.t.plain_text_css_class},style:r})),e.new_stoppables.subscribe((e=>{this.add_stoppable(e)})),this.stop_states.subscribe((({stopped:t})=>{t&&e.stop()}));const l=await this.#qe(a,e,t),c=Object.entries(l),d=c.map((([e,t])=>e)),m=c.map((([e,t])=>t)),h=a,u=new f(...d,t).apply(h,m);for(;;){const{value:e,done:t}=await u.next();if(void 0!==e&&(t&&await l.render_text("\n>>> "),await l.render_value(e)),t)break}}async#qe(e,t,n=""){const r=this,a=await(0,m.P)(),i=await(0,h.M)();return{ocx:t,source_code:n,Renderer:o.T,Plotly:a,d3:i,is_stopped:function(){return r.stopped},create_worker:t.AIS((async function(e){const t=new l.V(e);return r.add_stoppable(new d.X(t,(e=>e.terminate()))),t})),import_lib:t.AIS((async function(e){return A(new URL(e,g))})),vars:t.AIS((function(...t){return Object.assign(e,...t),t})),sprintf:t.sprintf.bind(t),sleep:t.sleep.bind(t),delay_ms:t.delay_ms.bind(t),next_tick:t.next_tick.bind(t),next_micro_tick:t.next_micro_tick.bind(t),render:t.render.bind(t),render_text:t.render_text.bind(t),render_error:t.render_error.bind(t),render_value:t.render_value.bind(t),println:t.println.bind(t),printf:t.printf.bind(t),print__:t.print__.bind(t),javascript:t.javascript.bind(t),markdown:t.markdown.bind(t),tex:t.tex.bind(t),image_data:t.image_data.bind(t),graphviz:t.graphviz.bind(t),plotly:t.plotly.bind(t),canvas_image:t.canvas_image.bind(t),canvas_tools:u}}}r()}catch(e){r(e)}}))},7783:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{V:()=>e});var a=n(1896),i=n(4889),o=n(6973);class e{constructor(e=null){const{keepalive:t=!1}=e??{};this.keepalive=!!t,Object.defineProperties(this,{id:{value:(0,a.pk)(),enumerable:!0}}),this._worker=new Worker(this.constructor.#Oe),this._terminated=!1,this._current_expression=void 0}get terminated(){return this._terminated}terminate(){this._terminated||(this._reset_event_handlers(),this._current_expression?.terminate(),this._current_expression=void 0,this._worker.terminate(),this._worker=void 0,this._terminated=!0)}async eval(e,t){if(this.terminated)throw new Error(`eval worker ${this.id}: worker has been terminated`);if(this._current_expression)throw new Error(`eval worker ${this.id}: an expression evaluation is already in process`);const n=new i.i;let r=!1;const o=()=>{this._current_expression=void 0,this._reset_event_handlers(),r||n.reject(new Error(`eval worker ${this.id} / expression ${s}: evaluation terminated`)),this.keepalive||this.terminate()},s=(0,a.pk)(),l={request:"eval",id:s,worker_id:this.id,expression:e,eval_context:t};return this._current_expression={...l,terminate(){o()}},this._worker.onmessage=e=>{const t=e.data;"value"in t?n.resolve(t.value):n.reject(t.error),r=!0,o()},this._worker.onerror=e=>{n.reject(new Error(`eval worker ${this.id} / expression ${s}: error in worker`)),r=!0,o()},this._worker.onmessageerror=e=>{n.reject(new Error(`eval worker ${this.id} / expression ${s}: serialization error in worker`)),r=!0,o()},this._worker.postMessage(l),n.promise}stream_eval(e,t){if(this.terminated)throw new Error(`eval worker ${this.id}: worker has been terminated`);if(this._current_expression)throw new Error(`eval worker ${this.id}: an expression evaluation is already in process`);const n=[],r=[];let o=!1;const s=()=>{for(o=!0,this._current_expression=void 0,this._reset_event_handlers();r.length>0;)r.shift().resolve({done:!0});this.keepalive||this.terminate()},l=e=>{o?console.warn(`eval worker ${this.id} / expression ${c}: result received after done`,e):(r.length>0?"value"in e?r.shift().resolve({value:e.value}):r.shift().reject(e.error):n.push(e),e.error&&s())},c=(0,a.pk)(),d={request:"stream_eval",id:c,worker_id:this.id,expression:e,eval_context:t};return this._current_expression={...d,terminate(){s()}},this._worker.onmessage=e=>{const t=e.data;t.done?s():l(t)},this._worker.onerror=e=>{l({error:new Error(`eval worker ${this.id} / expression ${c}: error in worker`)}),s()},this._worker.onmessageerror=e=>{l({error:new Error(`eval worker ${this.id} / expression ${c}: serialization error in worker`)}),s()},this._worker.postMessage(d),{[Symbol.asyncIterator]:()=>({next(){if(n.length>0){const e=n.shift();return"value"in e?Promise.resolve({value:e.value}):Promise.reject(e.error)}if(o){for(;r.length>0;)r.shift().reject(new Error(`eval worker ${this.id} / expression ${c}: no further results available`));return Promise.resolve({done:!0})}{const e=new i.i;return r.push(e),e.promise}},return:()=>({done:!0})})}}_reset_event_handlers(){this.terminated||(this._worker.onmessage=void 0,this._worker.onerror=void 0,this._worker.onmessageerror=void 0)}static async _async_init_static(){const e=(0,o.h)("dist/web-worker.js");return fetch(e).then((e=>e.text())).catch((e=>{throw new Error("unable to fetch worker code")})).then((t=>{const n=`{\n    const original_importScripts = globalThis.importScripts;\n    globalThis.importScripts = (...urls) => {\n        return original_importScripts( ...urls.map(url => new URL(url, "${e.href}")) );\n    };\n}\n`;this.#Oe=`data:text/javascript,${encodeURIComponent(n+t)}`}))}static#Oe}await e._async_init_static(),r()}catch(e){r(e)}}),1)},6187:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$:()=>u});var a=n(3393),i=n(6243),o=n(7343),s=n(266),l=n(4889),c=e([a,i,o,s]);[a,i,o,s]=c.then?(await c)():c;const d="inline-tex",m="block-tex",h="eval-code";class u extends a.T{static type="markdown";async render(e,t,n=null){t??="";const{style:r}=n??{},a=e.create_child({attrs:{"data-type":this.type},style:r}),o=this;let c=Promise.resolve();const d={async:!0,async walkTokens(e){const t=c,n=new l.i;if(c=n,await t,e.type===h){const t=document.createElement("div"),n=new s.l(t);let r;try{r=n.renderer_for_type(e.output_type)}catch(e){await n.render_error(e)}if(r){n.new_stoppables.subscribe((e=>{o.add_stoppable(e)}));const t={};await n.invoke_renderer(r,e.text,t).catch((e=>n.render_error(e))),r?.stop()}e.html=t.innerHTML}n.resolve()}},m=await i.T.parse(t,d);return a.innerHTML=m,a}}i.T.use({extensions:[{name:d,level:"inline",start:e=>e.indexOf("$"),tokenizer(e,t){const n=e.match(/^\$+([^$]+?)\$+/);if(n)return{type:d,raw:n[0],text:n[1].trim()}},renderer:e=>o.w.toMathMLString(e.text,!1,!1,!1)},{name:m,level:"block",start:e=>e.indexOf("$$"),tokenizer(e,t){const n=e.match(/^\$\$([^$]+?)\$\$/);if(n)return{type:m,raw:n[0],text:n[1].trim()}},renderer:e=>`<p>${o.w.toMathMLString(e.text,!0,!1,!1)}</p>`},{name:h,level:"block",start:e=>e.match(/^[`]{3}[ ]*[!]/)?.index,tokenizer(e,t){const n=e.match(/^[`]{3}[ ]*[!]([ \t]*[^\n]*[ \t]*)?[\n](.*?)[`]{3}/s);if(n){const e=(n[1]?.trim()??"")||"javascript";return{type:h,output_type:e,raw:n[0],text:n[2],html:""}}},renderer:e=>e.html}]}),r()}catch(e){r(e)}}))},6243:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{T:()=>e});var a=n(984),i=n(6973);await(0,a.h0)(document.head,(0,i.h)("dist/marked.min.js"));const e=globalThis.marked;r()}catch(e){r(e)}}),1)},7012:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{G:()=>s});var a=n(3393),i=n(1946),o=e([a]);a=(o.then?(await o)():o)[0];class s extends a.T{static type="plotly";async render(e,t,n){if("object"!=typeof t)throw new Error("config_ must be an object");let r,a,o,s;"data"in t&&Array.isArray(t.data)?({data:r,layout:a={},config:o={},frames:s=[]}=t):(r=t,o={}),a??={},a.plot_bgcolor??="rgba(0, 0, 0, 0)",a.paper_bgcolor??="rgba(0, 0, 0, 0)",o.displayModeBar=!1;const l=n?.style,c=e.create_child({attrs:{"data-type":this.type}}),d=e.constructor.create_element_child(c,{style:l}),m=await(0,i.P)();return await m.newPlot(d,{data:r,layout:a,config:o,frames:s}),c}}r()}catch(e){r(e)}}))},1946:(e,t,n)=>{n.d(t,{P:()=>o});var r=n(984),a=n(6973);let i;async function o(){return i||(await(0,r.h0)(document.head,(0,a.h)("dist/plotly.js")),i=globalThis.Plotly),i}},3393:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{T:()=>s});var a=n(4429),i=n(4571),o=e([a,i]);[a,i]=o.then?(await o)():o;class s extends a.T{static type;get type(){return this.constructor.type}async render(e,t,n){throw new Error("NOT IMPLEMENTED")}static reset_classes(){(0,i.YP)()}static class_from_type(e){return(0,i.np)(e)}static get_classes(){return(0,i.F8)()}static set_classes(e){(0,i.Tp)(e)}static add_class(e){(0,i.Gh)(e)}static remove_class(e){(0,i.O4)(e)}static get_class_types(){return(0,i.F8)().map((e=>e.type))}static remove_class_for_type(e){return this.remove_class(this.class_from_type(e))}}r()}catch(e){r(e)}}))},9947:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{_:()=>s});var a=n(3393),i=n(7343),o=e([a,i]);[a,i]=o.then?(await o)():o;class s extends a.T{static type="tex";async render(e,t,n=null){t??="";const{style:r,inline:a,rtl:o}=n??{},s=e.create_child({attrs:{"data-type":this.type},style:r}),l=i.w.toMathMLString(t,!a,o,!1);return s.innerHTML=l,s}}r()}catch(e){r(e)}}))},1672:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{t:()=>o});var a=n(3393),i=e([a]);a=(i.then?(await i)():i)[0];class o extends a.T{static type="text";static plain_text_css_class="plain-text";async render(e,t,n){const r=e.create_child({tag:"span",attrs:{"data-type":this.type,class:this.constructor.plain_text_css_class},style:n?.style});return r.innerText=t,r}}r()}catch(e){r(e)}}))},7343:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{w:()=>e});var a=n(984),i=n(6973);await(0,a.h0)(document.head,(0,i.h)("dist/TeXZilla.js"));const e=globalThis.TeXZilla;r()}catch(e){r(e)}}),1)},3082:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{DL:()=>o.D});var a=n(4294),i=n(7223),o=n(9914),s=e([a,i,o]);[a,i,o]=s.then?(await s)():s,r()}catch(e){r(e)}}))},9914:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{D:()=>m});var a=n(984),i=n(7569),o=n(2007),s=n(4294),l=n(1951),c=(n(6973),e([s]));const d=[{name:"Appearance",settings:[{id:"theme",label:"Theme",type:"select",options:(0,(s=(c.then?(await c)():c)[0]).OJ)().map((e=>({value:e,label:e}))),settings_path:["theme"],analyze:s.$A}]},{name:"Editor",settings:[{id:"editor_options_indentUnit",label:"Indent",type:"text",settings_path:["editor_options","indentUnit"],analyze:s.Xg,convert_to_number:!0},{id:"editor_options_tabSize",label:"Tab size",type:"text",settings_path:["editor_options","tabSize"],analyze:s.aD,convert_to_number:!0},{id:"editor_options_indentWithTabs",label:"Indent with tabs",type:"checkbox",settings_path:["editor_options","indentWithTabs"],analyze:s.hZ},{id:"editor_options_keyMap",label:"Key map",type:"select",options:s.$I.map((e=>({value:e,label:e}))),settings_path:["editor_options","keyMap"],analyze:s.Br}]},{name:"TeX Formatting",settings:[{id:"formatting_options_align",label:"Horizontal alignment",type:"select",options:s.Kp.map((e=>({value:e,label:e}))),settings_path:["formatting_options","align"],analyze:s.yj},{id:"formatting_options_indent",label:"Indentation",type:"text",settings_path:["formatting_options","indent"],analyze:s.fe}]}];class m extends i.Vq{static settings_dialog_css_class="settings-dialog";static run(e,t){const n=document.querySelector(`header #ui .${this.settings_dialog_css_class}`);if(n){const e=i.Vq.instance_from_element(n);if(!e)throw new Error(`unexpected: Dialog.instance_from_element() returned null for element with class ${this.settings_dialog_css_class}`);return e.promise}return(new this).run()}_populate_dialog_element(){const e=(0,s.oj)();this._dialog_element.classList.add(this.constructor.settings_dialog_css_class),this._dialog_text_container.innerText="Settings";for(const t of d){const{name:n,settings:r}=t,c=this._dialog_form,d=(0,a.T1)({parent:c,attrs:{"data-section":n}}),m=(0,a.T1)({parent:c,attrs:{class:["error-message"]}});for(const t of r){const{id:n,label:r,type:a,settings_path:c,options:h,analyze:u,convert_to_number:_}=t,p=d;let g;g="select"===a?(0,i.cK)(p,n,{label:r,options:h}):(0,i.L_)(p,n,{label:r,type:a}),"checkbox"===a?g.checked=(0,o.Z)(e,c):g.value=(0,o.Z)(e,c);const A=async e=>{const t=(0,s.oj)(),n=async e=>{m.classList.add("active"),m.innerText=e;const t=document.getElementById(g.id);!this._completed&&t?(t.focus(),t instanceof HTMLInputElement&&"text"===t.type&&t.select(),await(0,l.V)()):await i.aR.run(`settings update failed: ${e}`)},d="checkbox"===a?g.checked:g.value;if(u){const e=u(d,r);if(e)return void await n(e)}(0,o.$)(t,c,_?+d:d);try{await(0,s.ZA)(t),m.classList.remove("active")}catch(e){await n(e.message)}};g.addEventListener("change",A),g.addEventListener("blur",A)}}(0,a.T1)({parent:this._dialog_form,tag:"input",attrs:{type:"button",value:"Done"}}).onclick=e=>this._dialog_element.close(),this._dialog_element.onclose=e=>this._complete()}}r()}catch(e){r(e)}}))},4294:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$A:()=>B,$I:()=>f,Br:()=>b,Kp:()=>y,Ll:()=>m,OJ:()=>I,RF:()=>s,Ug:()=>c,WD:()=>l,Xg:()=>p,ZA:()=>D,aD:()=>g,fe:()=>k,hZ:()=>A,oj:()=>L,yj:()=>w});var a=n(6092),i=n(3782),o=e([a]);a=(o.then?(await o)():o)[0];const s="system",l="light",c="dark",d={theme:s,editor_options:{indentUnit:2,tabSize:4,indentWithTabs:!1,keyMap:"default"},formatting_options:{align:"left",indent:"0em"}},m=new a.l,h=/^([+-]?[0-9]+[.][0-9]*[Ee][+-]?[0-9]+|[+-]?[.][0-9]+[Ee][+-]?[0-9]+|[+-]?[0-9]+[Ee][+-]?[0-9]+|[+-]?[0-9]+[.][0-9]*|[+-]?[.][0-9]+|[+-]?[0-9]+)$/;function u(e,t){const{require_integer:n,reject_negative:r,reject_zero:a,reject_positive:i}=t??{};let o;if("number"==typeof e)o=e;else{if("string"!=typeof e)return!1;if(!e.trim().match(h))return!1;o=Number.parseFloat(e)}return!(isNaN(o)||n&&!Number.isInteger(o)||i&&o>0||a&&0===o||r&&o<0)}function _(e,t,n){if(!t.includes(e))return`${n??"value"} must be one of: ${t.join(", ")}`}function p(e,t){if(!u(e,{require_integer:!0,reject_negative:!0}))return`${t??"indentUnit"} must be a non-negative integer`}function g(e,t){if(!u(e,{require_integer:!0,reject_negative:!0}))return`${t??"tabSize"} must be a non-negative integer`}function A(e,t){if("boolean"!=typeof e)return`${t??"indentWithTabs"} must be a boolean value`}const f=["default","emacs","sublime","vim"];function b(e,t){return _(e,f,t??"keyMap")}function v(e,t){if("object"!=typeof e)return`${t??"editor_options"} must be an object`;if(!Object.keys(e).every((e=>["indentUnit","tabSize","indentWithTabs","keyMap"].includes(e))))return`${t??"editor_options"} may only have the keys "indentUnit", "tabSize", "indentWithTabs" and "keyMap"`;if("indentUnit"in e){const t=p(e.indentUnit);if(t)return t}if("tabSize"in e){const t=g(e.tabSize);if(t)return t}if("indentWithTabs"in e){const t=A(e.indentWithTabs);if(t)return t}if("keyMap"in e){const t=b(e.keyMap);if(t)return t}}const y=["left","center","right"];function w(e,t){return _(e,y,t??"align")}const C=["pt","pc","in","cm","mm","em","ex","mu"];function k(e,t){if(!C.every((e=>2===e.length)))throw new Error("unexpected: valid units contains a string whose length is not 2");const n=`${t??"indent"} must be a string containing a non-negative number followed by one of: ${C.join(", ")}`;if("string"!=typeof e)return n;const r=(e=e.trim()).slice(0,-2),a=e.slice(-2);return u(r,{reject_negative:!0})&&C.includes(a)?void 0:n}function E(e,t){if("object"!=typeof e)return`${t??"formatting_options"} must be an object`;if(!Object.keys(e).every((e=>["align","indent"].includes(e))))return`${t??"formatting_options"} may only have the keys "align" and "indent"`;if("align"in e){const t=w(e.align);if(t)return t}if("indent"in e){const t=k(e.indent);if(t)return t}}const x=[s,l,c];function I(){return[...x]}function B(e,t){return _(e,x,t??"theme")}function T(e,t){if("object"!=typeof e)return`${t??"settings"} must be an object`;if(!Object.keys(e).every((e=>["editor_options","formatting_options","theme"].includes(e))))return`${t??"settings"} may only have the keys "editor_options", "formatting_options" and "theme"`;if(!("editor_options"in e))return`${t??"settings"} must contain an "editor_options" property`;{const t=v(e.editor_options);if(t)return t}if(!("formatting_options"in e))return`${t??"settings"} must contain a "formmating_options" property`;{const t=E(e.formatting_options);if(t)return t}if(!("theme"in e))return`${t??"settings"} must contain a "theme" property`;{const t=B(e.theme);if(t)return t}}async function j(e){return i.zS.put(i.Fx,e)}async function z(){try{const e=await i.zS.get(i.Fx);if(!T(e))return e}catch(e){}return await j(d),d}(()=>{const e=T(d);if(e)throw new Error(`initial_settings: ${e}`)})();let S=await z();function L(){return e=S,JSON.parse(JSON.stringify(e));var e}async function D(e){const t=T(e);if(t)throw new Error(t);await j(e),S=e,m.dispatch()}r()}catch(M){r(M)}}),1)},3782:(e,t,n)=>{n.d(t,{Fx:()=>r,qr:()=>a,zS:()=>i});const r="settings",a="themes",i=new class{constructor(e,t){if("string"!=typeof e||"string"!=typeof t)throw new Error("database_name and database_store_name must be strings");Object.defineProperties(this,{database_name:{value:e},database_store_name:{value:t,enumerable:!0},_startup_promise:{value:new Promise(((n,r)=>{const a=indexedDB.open(e,1);a.onerror=()=>r(a.error),a.onsuccess=()=>n(a.result),a.onupgradeneeded=()=>{a.result.createObjectStore(t)}}))}})}async with_object_store(e,t){const n=await this._startup_promise;return new Promise(((r,a)=>{const i=n.transaction(this.database_store_name,e);i.oncomplete=()=>r(),i.onabort=i.onerror=()=>a(i.error),t(i.objectStore(this.database_store_name))}))}async get(e){let t;return await this.with_object_store("readonly",(n=>{t=n.get(e)})),t.result}async put(e,t){return this.with_object_store("readwrite",(n=>{n.put(t,e)}))}async delete(e){return this.with_object_store("readwrite",(t=>{t.delete(e)}))}async clear(){return this.with_object_store("readwrite",(e=>{e.clear()}))}async keys(){let e;return await this.with_object_store("readonly",(t=>{e=t.getAllKeys()})),e.result}}("settings-database-55e2b166-93eb-4ff8-8ef2-ddb31295efbf","settings-database-store-55e2b166-93eb-4ff8-8ef2-ddb31295efbf")},7223:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var r=n(6092),a=n(1896),i=n(3782),o=n(984),s=n(4294),l=e([r,s]);[r,s]=l.then?(await l)():l;const c=/^[A-Za-z_-][A-Za-z0-9_-]*$/,d=/^--theme-[A-Za-z_-][A-Za-z0-9_-]*$/,m=document.documentElement,h="data-theme",u="/*\n  --- THEME PROPERTIES ---\n\n  ELEMENT:\n  by -- body\n  hd -- header\n  tl -- tool-bar\n  ts -- tool-bar toggle-switch\n  ty -- tool-bar type selector\n  ti -- tool-bar indicator\n  cl -- eval-cell/editor-cell\n  ou -- output element\n  mb -- menubar\n  mu -- menu\n  mi -- menuitem\n  ms -- menuitem separator\n  dg -- dialog\n  st -- settings dialog\n  gr -- general graphics element\n  rh -- resize handle\n\n  STYLE FEATURE:        STYLE FEATURE ATTRIBUTE:\n  bg -- background      c -- color\n  fg -- foreground      w -- width\n  bd -- border          s -- style (e.g., dashed)\n  sh -- shadow          r -- radius\n  fl -- fill\n  st -- stroke\n  ct -- caret\n\n  METRIC FEATURE:\n  w -- width\n  h -- height\n  m -- margin\n  p -- padding\n  g -- gap\n\n  OTHER FEATURE:\n  ff -- font-family\n  lh -- line-height\n\n  ---\n\n  PROPERTIES:\n  --theme-{ELEMENT}-{STYLE FEATURE}{STYLE FEATURE ATTRIBUTE}...\n  --theme-{ELEMENT}-{METRIC FEATURE}...\n  --theme-{ELEMENT}-{OTHER FEATURE}...\n*/\n",_=[s.WD,s.Ug];_[0];const p={"--theme-by-bgc":["#f9f9f9","#0e0e0e"],"--theme-by-fgc-error":["hsl(  0deg   0% 100% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-by-bgc-error":["hsl(  0deg  60%  50% / 100%)","hsl(  0deg  60%  50% / 100%)"],"--theme-by-bdc-error":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-hd-h":["1.5rem","1.5rem"],"--theme-hd-bgc":["#f8f8f8","#2e2e2e"],"--theme-rh-bgc":["grey","grey"],"--theme-rh-bgc-hover":["black","lightgrey"],"--theme-tl-p":["0","0"],"--theme-tl-g":["0.5em","0.5em"],"--theme-tl-bgc":["#f8f8f8","#1e1e1e"],"--theme-tl-bgc-mix":["10%","25%"],"--theme-cl-p":["0.5em","0.5em"],"--theme-cl-lh":["140%","140%"],"--theme-cl-ff":["monospace","monospace"],"--theme-cl-bdw":["1px","1px"],"--theme-cl-bdr":["0.5em","0.5em"],"--theme-cl-bds":["solid","solid"],"--theme-cl-bdc":["#ccc","#4a4a4a"],"--theme-cl-bdc-active":["#898989","hsl(  0deg   0%  55% / 100%)"],"--theme-cl-bdc-focus":["black","hsl(  0deg   0%  65% / 100%)"],"--theme-cl-fgc":["black","#eee"],"--theme-cl-bgc":["hsl(  0deg   0%  99% / 100%)","#111"],"--theme-cl-p-inter":["0em","0em"],"--theme-cl-ctc":["red","red"],"--theme-ou-p":["0.5em","0.5em"],"--theme-ou-fgc":["black","#eee"],"--theme-ou-bgc":["white","black"],"--theme-ty-fgc-markdown":["black","white"],"--theme-ty-bgc-markdown":["hsl(205deg  85%  90% / 100%)","hsl(205deg  80%  30% / 100%)"],"--theme-ty-fgc-tex":["black","white"],"--theme-ty-bgc-tex":["hsl( 45deg  55%  80% / 100%)","hsl( 45deg  35%  30% / 100%)"],"--theme-ty-fgc-javascript":["black","white"],"--theme-ty-bgc-javascript":["hsl( 85deg  55%  80% / 100%)","hsl(120deg  45%  25% / 100%)"],"--theme-ts-w":["1.5rem","1.5rem"],"--theme-ts-h":["1.5rem","1.5rem"],"--theme-ts-flc-autoeval":["transparent","transparent"],"--theme-ts-stc-autoeval":["hsl(  0deg   9%  82% / 100%)","hsl(  0deg   9%  82% / 100%)"],"--theme-ts-flc-autoeval-checked":["transparent","transparent"],"--theme-ts-stc-autoeval-checked":["hsl(  0deg  60%  70% / 100%)","hsl(  0deg  60%  70% / 100%)"],"--theme-ti-bdc":["hsl(  0deg   9%  82% / 100%)","hsl(  0deg   0%  60% / 100%)"],"--theme-ti-bgc":["transparent","transparent"],"--theme-ti-bdc-running":["black","#d5d5d5"],"--theme-ti-bgc-running":["hsl(120deg  94%  40% / 100%)","hsl(120deg  94%  40% / 100%)"],"--theme-ti-bdc-modified":["black","#d5d5d5"],"--theme-ti-bgc-modified":["hsl(  0deg  60%  85% / 100%)","hsl(  0deg  55%  45% / 100%)"],"--theme-ty-bgc":["hsl(  0deg   0%  97% / 100%)","hsl(  0deg   0%  97% / 100%)"],"--theme-mu-bgc":["#f8f8f8","#2e2e2e"],"--theme-mu-bdc":["grey","grey"],"--theme-mu-shc":["lightgrey","#343434"],"--theme-mi-fgc":["black","#eee"],"--theme-mi-fgc-disabled":["#bbb","#666"],"--theme-mi-bgc-selected":["#0004","#fff4"],"--theme-ms-bgc":["#3334","#ccc4"],"--theme-dg-shc":["grey","grey"],"--theme-st-bgc":["canvas","canvas"],"--theme-st-bdc-section":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-st-bgc-section":["hsl(  0deg   0%  98% / 100%)","hsl(  0deg   0%  98% / 100%)"],"--theme-st-fgc-section":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-st-bdc-section-heading":["#aaa","#aaa"],"--theme-st-bgc-section-heading":["hsl(  0deg   0% 100% / 100%)","hsl(  0deg   0% 100% / 100%)"],"--theme-st-fgc-section-heading":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-st-fgc-section-setting":["fieldtext","fieldtext"],"--theme-st-bgc-section-setting":["field","field"],"--theme-st-bdc-warning":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-st-fgc-warning":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-st-bgc-warning":["hsl( 60deg  80%  50% / 100%)","hsl( 60deg  80%  50% / 100%)"],"--theme-st-bdc-error":["hsl(  0deg   0%   0% / 100%)","hsl(  0deg   0%   0% / 100%)"],"--theme-st-fgc-error":["hsl(  0deg   0% 100% / 100%)","hsl(  0deg   0% 100% / 100%)"],"--theme-st-bgc-error":["hsl(  0deg  60%  50% / 100%)","hsl(  0deg  60%  50% / 100%)"],"--theme-gr-fgc":["black","white"],"--theme-gr-bgc":["transparent","transparent"]},g=Object.keys(p),A=_.map(((e,t)=>({name:e,props:Object.fromEntries(Object.entries(p).map((([e,n])=>[e,n[t]])))}))),f=A[0];function b(e){return JSON.parse(JSON.stringify(e))}function v(e,t){if("object"!=typeof e||"object"!=typeof t)throw new Error("specified themes must be objects");if(e===t)return!0;for(const n of g)if(!(n in e.props)||!(n in t.props)||e.props[n]!==t.props[n])return!1;return!0}async function y(e=null){e??=[],B(e);const t=e.filter((e=>{const t=A.find((t=>t.name===e.name));return!t||!v(t,e)}));return i.zS.put(i.qr,t)}async function w(){return i.zS.get(i.qr).then((e=>{if(!e)throw new Error("themes_settings not found");return e}))}const C=`themes-${(0,a.kE)()}`;function k(){return document.getElementById(C)}function E(){if(k())throw new Error(`element with id ${C} already exists`);if(!document.head)throw new Error("document.head missing");return(0,o.T1)({tag:"style",parent:document.head,attrs:{id:C}})}function x(e){if("object"!=typeof e||!Object.entries(e).every((([e,t])=>"string"==typeof e&&e.match(d)&&"string"==typeof t)))throw new Error("theme_props must have valid CSS property names starting with --theme- and with string values")}function I(e){const{name:t,props:n}=e;if(t===s.RF)throw new Error(`"${s.RF}" is a reserved theme name`);if("string"!=typeof t||!t.match(c))throw new Error("invalid theme name");x(n);for(const e of g)if(!(e in n))throw new Error("theme is missing expected properties")}function B(e){if(!Array.isArray(e))throw new Error("themes must be an array of valid themes");const t=new Set;for(const n of e){if(t.has(n.name))throw new Error("themes must not contain entries with duplicated names");t.add(n.name),I(n)}}function T(e){const{name:t,props:n}=e;x(n);let r=!1;const a={...n};for(const e of g)if(!(e in n)){r=!0;const n=t in A?A[t][e]:f[e];a[e]=n??"unset"}return r?{name:t,props:a}:null}function j(e){if(!Array.isArray(e)||e.length<=0)throw new Error("themes must be an array of valid themes with at least one element");let t=!1;const n=e.map((e=>{const n=T(e);return n?(t=!0,n):e}));return t?n:null}function z(e,t=!1){const{name:n,props:r}=e;return`:root${t?"":`[${h}="${n}"]`} {\n${Object.entries(r).map((([e,t])=>`    ${e}: ${t};`)).join("\n")}\n}\n`}async function S(e,t){if(B(e),!(t instanceof HTMLElement)||"style"!==t.tagName?.toLowerCase())throw new Error("invalid themes_style_element");const n=[];n.push(u),n.push(z(e[0],!0));for(const t of e)n.push(z(t));t.textContent=n.join("\n")}async function L(){return w().catch((e=>y(null).catch((e=>{throw console.error(e),new Error("unable to initialize themes storage")})).then((()=>[])))).then((e=>{const t=[];for(const n of A){const r=e.find((e=>e.name===n.name))??n;t.push(r)}for(const n of e)_.includes(n.name)||t.push(n);const n=j(t);return n?y(n).catch((e=>{throw console.error(e),new Error("unable to rewrite adjusted themes")})).then((()=>n)):(B(t),t)})).then((e=>{const t=k()??E();return S(e,t).catch((e=>{throw console.error(e),new Error("unable to write to style element")})).then((()=>e))}))}const D=globalThis.matchMedia("(prefers-color-scheme: dark)");function M(e){e?m.setAttribute(h,s.Ug):m.removeAttribute(h)}function q(){switch((0,s.oj)().theme){default:case s.RF:M(D.matches);break;case s.WD:M(!1);break;case s.Ug:M(!0)}}const O=new r.l;let P;async function R(e){e=e.map((e=>b(e))),await y(e),S(e,k()),P=e,O.dispatch()}async function $(){return R(A)}P=await L(),D.addEventListener("change",q),s.Ll.subscribe(q),q(),globalThis.reset_to_standard_themes_settings=$,t()}catch(U){t(U)}}),1)},2358:(e,t,n)=>{var r=n(9886),a=n(984),i=n(1951);n(6973);class o extends HTMLElement{static custom_element_name="toggle-switch";static create(e=null){const{parent:t,class:n,title_for_on:r,title_for_off:i,svg:o}=e??{},s=(0,a.T1)({parent:t,tag:this.custom_element_name,attrs:{role:"switch","aria-checked":!1,tabindex:"0",title:i,class:n??""}});return s.#c.add(s,"change",(e=>{s.title=s.get_state()?r:i})),s}constructor(){super(),this.#c=new r.w,this.#c.add(this,"click",(e=>{this.is_enabled()?(this.set_state(),e.preventDefault(),e.stopPropagation()):(0,i.V)()})),this.#c.add(this,"keydown",(e=>{[" ","Enter"].includes(e.key)&&(this.is_enabled()?(this.set_state(),e.preventDefault(),e.stopPropagation()):(0,i.V)())}))}#c;is_enabled(){return!this.hasAttribute("disabled")||this.getAttribute("disabled")===(!1).toString()}enable(e){e?(this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"),this.setAttribute("tabindex","0"),this.style.removeProperty("filter")):(this.setAttribute("disabled",!0),this.setAttribute("aria-disabled",!0),this.removeAttribute("tabindex"),this.style.setProperty("filter","opacity(0.45)"))}get_state(){return"true"===this.getAttribute("aria-checked")}set_state(e=null){const t=this.get_state();e??=!t,e=!!e,this.setAttribute("aria-checked",e),t!==e&&this.dispatchEvent(new Event("change"))}connectedCallback(){this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.get_state()),this.#c.attach()}disconnectedCallback(){this.#c.detach()}adoptedCallback(){this.#c.attach()}attributeChangedCallback(e,t,n){}static get observedAttributes(){return["xyzzy"]}static _init_static(){globalThis.customElements.define(this.custom_element_name,this)}}o._init_static()},3653:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{d:()=>l}),n(2358);var a=n(9886),i=n(9026),o=n(984),s=(n(6973),e([i]));i=(s.then?(await s)():s)[0];class l extends HTMLElement{static custom_element_name="tool-bar";static indicator_control__class="tool-bar-indicator";static indicator_control__attribute__value="data-indicator-value";static toggle_switch__autoeval__class="tool-bar-toggle-autoeval";static create_for(e,t){const n=document.createElement(this.custom_element_name);if(!n)throw new Error("error creating tool bar");try{return n.set_target(e,t),n}catch(e){throw n.remove(),e}}constructor(){super(),this.#Pe=null,this.#c=new a.w,this.#Re()}#c;#$e;set_type(e){this.set_for("type",e)}#Pe;get target(){return this.#Pe}set_target(e,t=null){if(null!=e&&!(e instanceof EventTarget))throw new Error("target must be null, undefined, or and instance of EventTarget");e?this.#Pe!==e&&(this.#Pe=e,this.#Ue(t)):(this.#Pe=null,this.#Re())}get_for(e,t){if(!(e in this.#$e))throw new Error("unknown name");return this.#$e[e].get()}set_for(e,t){if(!(e in this.#$e))throw new Error("unknown name");this.#$e[e].set(t)}enable_for(e,t){if(!(e in this.#$e))throw new Error("unknown name");this.#$e[e].enable(t)}#Ue(e=null){e??={},this.#Re();try{for(const[t,n,r,a,i]of this.#Fe()){let o=e[t];if(o){"object"!=typeof o&&(o={});const e=n(o.on);"initial"in o&&a(e,o.initial),this.#$e[t]={name:t,control:e,get:r.bind(l,e),set:a.bind(l,e),enable:i.bind(l,e)}}}this.#c.add(this,"pointerdown",(e=>{this.#Pe.focus(),e.target instanceof l&&(e.preventDefault(),e.stopPropagation())}))}catch(e){throw this.#Re(),e}}#Re(){this.#c.remove_all(),(0,o.gX)(this),this.#$e={}}#Fe(){const e=this.constructor;return[["type",this.#Ne.bind(this),e.#Ge,e.#Qe,e.#He],["run",this.#We.bind(this),e.#Ze,e.#Ke,e.#Ve],["autoeval",this.#Ye.bind(this),e.#Xe,e.#Je,e.#et],["modified",this.#tt.bind(this),e.#nt,e.#rt,e.#at],["running",this.#it.bind(this),e.#ot,e.#st,e.#lt]]}#Ye(e=null){const t=(0,o.T1)({parent:this,tag:"input",attrs:{type:"checkbox",title:"autoeval..."}});return t.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n\x3c!--\n    Adapted from: https://commons.wikimedia.org/wiki/File:Ei-pencil.svg\n    Alexander Madyankin, Roman Shamin, MIT <http://opensource.org/licenses/mit-license.php>, via Wikimedia Commons\n--\x3e\n<svg\n  xmlns="http://www.w3.org/2000/svg"\n  version="1.1"\n  viewBox="0 0 50 50"\n>\n  <path class="accent-stroke accent-fill" fill="#0000" d="M9.6 40.4 l2.5 -9.9 L27 15.6 l7.4 7.4 -14.9 14.9 -9.9 2.5z m4.3 -8.9 l-1.5 6.1 6.1 -1.5 L31.6 23 27 18.4 13.9 31.5z"/>\n  <path class="accent-stroke accent-fill" fill="#0000" d="M17.8 37.3 c-.6 -2.5 -2.6 -4.5 -5.1 -5.1 l.5 -1.9 c3.2 .8 5.7 3.3 6.5 6.5 l-1.9 .5z"/>\n  <path class="accent-stroke accent-fill" fill="#0000" d="M29.298 19.287 l1.414 1.414 -13.01 13.02 -1.414 -1.412z"/>\n  <path class="accent-stroke accent-fill" fill="#0000" d="M11 39 l2.9 -.7 c-.3 -1.1 -1.1 -1.9 -2.2 -2.2 L11 39z"/>\n  <path class="accent-stroke accent-fill" fill="#0000" d="M35 22.4 L27.6 15 l3-3 .5.1 c3.6 .5 6.4 3.3 6.9 6.9 l.1 .5 -3.1 2.9z M30.4 15 l4.6 4.6 .9 -.9 c-.5 -2.3 -2.3 -4.1 -4.6 -4.6 l-.9 .9z"/>\n</svg>\n',e&&this.#c.add(t,"change",(t=>{e(t)||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())})),this.#c.add(t,"change",(e=>{t.title=t.checked?"autoeval off...":"autoeval on..."})),t}static#Xe(e){return e.checked}static#Je(e,t){e.checked=!!t}static#et(e,t){e.enable(t)}#Ne(e=null){const t=(0,o.T1)({parent:this,tag:"select",attrs:{title:"type..."},set_id:!0}),n=new Set((0,i.P)().map((e=>e.handled_input_types)).flat()).values();let r=!1;for(const e of n)(0,o.T1)({parent:t,tag:"option",attrs:{title:"type...",label:e,...r?{}:{selected:!r},value:e}}),r=!0;return e&&this.#c.add(t,"change",(t=>{e(t)||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())})),this.#c.add(t,"change",(e=>{t.title=`type ${t.value}`})),t}static#Ge(e){return e.value}static#Qe(e,t){if(![...e.options].map((e=>e.value)).includes(t))throw new Error("setting unknown/illegal value");e.value=t}static#He(e,t){t?(e.removeAttribute("disabled"),e.removeAttribute("aria-disabled")):(e.setAttribute("disabled",!0),e.setAttribute("aria-disabled",!0))}#it(e=null){return this.#ct("running","running...","done...",e)}static#ot(e){return this.#dt(e)}static#st(e,t){this.#mt(e,t)}static#lt(e,t){}#tt(e=null){return this.#ct("modified","modified...","not modified...",e)}static#nt(e){return this.#dt(e)}static#rt(e,t){this.#mt(e,t)}static#at(e,t){}#We(e=null){}static#Ze(e){}static#Ke(e,t){}static#Ve(e,t){}#ct(e,t,n,r=null){const a=(0,o.T1)({parent:this,attrs:{title:n,class:[this.constructor.indicator_control__class,e]}});return r&&this.#c.add(a,"change",r),this.#c.add(a,"change",(e=>{a.title=this.constructor.#dt(a)?t:n})),a}static#dt(e){return!!e.getAttribute(this.indicator_control__attribute__value)}static#mt(e,t){if(t!==this.#dt(e)){e.setAttribute(this.indicator_control__attribute__value,t?"on":"");const n=new Event("change",{});e.dispatchEvent(n)}}connectedCallback(){this.#c.attach()}disconnectedCallback(){this.#c.detach()}adoptedCallback(){this.#c.attach()}attributeChangedCallback(e,t,n){}static get observedAttributes(){return["xyzzy"]}static _init_static(){globalThis.customElements.define(this.custom_element_name,this)}}l._init_static(),r()}catch(e){r(e)}}))}},s={};function l(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,exports:{}};return o[e](n,n.exports,l),n.exports}l.m=o,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(a,i,o)=>{var s;o&&((s=[]).d=-1);var l,c,d,m=new Set,h=a.exports,u=new Promise(((e,t)=>{d=t,c=e}));u[t]=h,u[e]=e=>(s&&e(s),m.forEach(e),u.catch((e=>{}))),a.exports=u,i((a=>{var i;l=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var i=[];i.d=0,a.then((e=>{o[t]=e,r(i)}),(e=>{o[n]=e,r(i)}));var o={};return o[e]=e=>e(i),o}}var s={};return s[e]=e=>{},s[t]=a,s})))(a);var o=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(i=()=>t(o)).r=0;var n=e=>e!==s&&!m.has(e)&&(m.add(e),e&&!e.d&&(i.r++,e.push(i)));l.map((t=>t[e](n)))}));return i.r?c:o()}),(e=>(e?d(u[n]=e):c(h),r(s)))),s&&s.d<0&&(s.d=0)},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.f={},l.e=e=>Promise.all(Object.keys(l.f).reduce(((t,n)=>(l.f[n](e,t),t)),[])),l.u=e=>e+".main.js",l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},i="logbook:",l.l=(e,t,n,r)=>{if(a[e])a[e].push(t);else{var o,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var m=c[d];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==i+n){o=m;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.setAttribute("data-webpack",i+n),o.src=e),a[e]=[t];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(u);var r=a[e];if(delete a[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),t)return t(n)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),s&&document.head.appendChild(o)}},l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;l.g.importScripts&&(e=l.g.location+"");var t=l.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),l.p=e})(),(()=>{var e={179:0};l.f.j=(t,n)=>{var r=l.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var i=l.p+l.u(t),o=new Error;l.l(i,(n=>{if(l.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[i,o,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in o)l.o(o,r)&&(l.m[r]=o[r]);s&&s(l)}for(t&&t(n);c<i.length;c++)a=i[c],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunklogbook=self.webpackChunklogbook||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),l.nc=void 0,l(7027)})();
//# sourceMappingURL=main.js.map