/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e,t,n,r,o={7553:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,'dialog {\n    border-radius: 0.5rem;\n    box-shadow: 3px 3px 16px grey;\n}\n\ndialog .dialog_text {\n    margin: 0.5rem 0.5rem 0.5rem 0;\n}\n\ndialog button,\ndialog input[type="button"] {\n    margin: 0.5rem 0.5rem 0.5rem 0;\n}\n\ndialog .dialog_decline {\n    display: inline;\n}\n\ndialog .dialog_accept {\n    display: inline;\n}\n',"",{version:3,sources:["webpack://./lib/ui/dialog/dialog.css"],names:[],mappings:"AAAA;IACI,qBAAqB;IACrB,6BAA6B;AACjC;;AAEA;IACI,8BAA8B;AAClC;;AAEA;;IAEI,8BAA8B;AAClC;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,eAAe;AACnB",sourcesContent:['dialog {\n    border-radius: 0.5rem;\n    box-shadow: 3px 3px 16px grey;\n}\n\ndialog .dialog_text {\n    margin: 0.5rem 0.5rem 0.5rem 0;\n}\n\ndialog button,\ndialog input[type="button"] {\n    margin: 0.5rem 0.5rem 0.5rem 0;\n}\n\ndialog .dialog_decline {\n    display: inline;\n}\n\ndialog .dialog_accept {\n    display: inline;\n}\n'],sourceRoot:""}]);const s=i},7292:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,'.menu:not(.active) {\n    display: none;\n}\n\n.menubar {\n    margin: 0;\n    padding: 0.1rem 0 0.1rem 0;\n}\n\n.menubar>li {\n    display: inline;  /* horizontal orientation for top-level items of menubar */\n    padding: 0 0.5rem 0 0.5rem;\n}\n\n.menubar .menuitem {\n    list-style-type: none;\n    min-width: max-content;\n}\n\n.menuitem * {\n    user-select: none;\n}\n\n.menuitem .menuitem-label {\n    font-family: sans-serif;\n    font-size: 90%;\n}\n\n.menubar .menuitem.checked::before {\n    content: "\\2713";  /* unicode check mark */\n    position: absolute;\n    left: 0.5em;\n}\n\n.menubar div {\n    display: inline;\n}\n\n.menu {\n    position: absolute;\n    z-index: 999;\n    background-color: #f0f0f0;\n    padding: 0.25rem 0 0.25rem 0;  /* override standard ul/li padding */\n    border-radius: 0.25rem;\n    border: 1px solid grey;\n    box-shadow: 3px 3px 16px lightgrey;\n\n    /* eliminate default styling for menu elements */\n    margin-block-start:   0;\n    margin-block-end:     0;\n    margin-inline-start:  0;\n    margin-inline-end:    0;\n    padding-inline-start: 0;\n}\n\n.menuitem.disabled {\n    color: #bbb;\n}\n\n.menuitem.selected {\n    background-color: #0004;\n}\n\n.menu .menuitem:not(.menuitem-separator) {\n    padding: 0 0.5rem 0 1.5rem;\n}\n\n.menu .menuitem.menuitem-separator {\n    margin: 0.2rem 0 0.2rem 0;\n    height: 0px;\n    color: transparent;\n    border-bottom: 1px solid #3334;\n}\n\n.menu .menuitem .menuitem-annotation {\n    margin-left: 2rem;\n    float: right;\n}\n\n.menu .menuitem kbd {\n    margin: 0 0 0 0.5rem;\n}\n',"",{version:3,sources:["webpack://./lib/ui/menu/style.css"],names:[],mappings:"AAAA;IACI,aAAa;AACjB;;AAEA;IACI,SAAS;IACT,0BAA0B;AAC9B;;AAEA;IACI,eAAe,GAAG,0DAA0D;IAC5E,0BAA0B;AAC9B;;AAEA;IACI,qBAAqB;IACrB,sBAAsB;AAC1B;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,uBAAuB;IACvB,cAAc;AAClB;;AAEA;IACI,gBAAgB,GAAG,uBAAuB;IAC1C,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,YAAY;IACZ,yBAAyB;IACzB,4BAA4B,GAAG,oCAAoC;IACnE,sBAAsB;IACtB,sBAAsB;IACtB,kCAAkC;;IAElC,gDAAgD;IAChD,uBAAuB;IACvB,uBAAuB;IACvB,uBAAuB;IACvB,uBAAuB;IACvB,uBAAuB;AAC3B;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;IACI,0BAA0B;AAC9B;;AAEA;IACI,yBAAyB;IACzB,WAAW;IACX,kBAAkB;IAClB,8BAA8B;AAClC;;AAEA;IACI,iBAAiB;IACjB,YAAY;AAChB;;AAEA;IACI,oBAAoB;AACxB",sourcesContent:['.menu:not(.active) {\n    display: none;\n}\n\n.menubar {\n    margin: 0;\n    padding: 0.1rem 0 0.1rem 0;\n}\n\n.menubar>li {\n    display: inline;  /* horizontal orientation for top-level items of menubar */\n    padding: 0 0.5rem 0 0.5rem;\n}\n\n.menubar .menuitem {\n    list-style-type: none;\n    min-width: max-content;\n}\n\n.menuitem * {\n    user-select: none;\n}\n\n.menuitem .menuitem-label {\n    font-family: sans-serif;\n    font-size: 90%;\n}\n\n.menubar .menuitem.checked::before {\n    content: "\\2713";  /* unicode check mark */\n    position: absolute;\n    left: 0.5em;\n}\n\n.menubar div {\n    display: inline;\n}\n\n.menu {\n    position: absolute;\n    z-index: 999;\n    background-color: #f0f0f0;\n    padding: 0.25rem 0 0.25rem 0;  /* override standard ul/li padding */\n    border-radius: 0.25rem;\n    border: 1px solid grey;\n    box-shadow: 3px 3px 16px lightgrey;\n\n    /* eliminate default styling for menu elements */\n    margin-block-start:   0;\n    margin-block-end:     0;\n    margin-inline-start:  0;\n    margin-inline-end:    0;\n    padding-inline-start: 0;\n}\n\n.menuitem.disabled {\n    color: #bbb;\n}\n\n.menuitem.selected {\n    background-color: #0004;\n}\n\n.menu .menuitem:not(.menuitem-separator) {\n    padding: 0 0.5rem 0 1.5rem;\n}\n\n.menu .menuitem.menuitem-separator {\n    margin: 0.2rem 0 0.2rem 0;\n    height: 0px;\n    color: transparent;\n    border-bottom: 1px solid #3334;\n}\n\n.menu .menuitem .menuitem-annotation {\n    margin-left: 2rem;\n    float: right;\n}\n\n.menu .menuitem kbd {\n    margin: 0 0 0 0.5rem;\n}\n'],sourceRoot:""}]);const s=i},841:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,"editor-cell {\n    outline: 0px solid transparent;  /* disable default outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: monospace;\n    line-height: 120%;\n\n    display: block;\n    margin: 0;\n    padding: 0.3em 0.5em;\n\n    border: 1px solid #ccc;\n    border-radius: 0.125em;\n    background-color: #eee;\n}\n\neditor-cell[data-active] {\n    border: 1px solid black;\n}\n","",{version:3,sources:["webpack://./src/editor-cell-element/style.css"],names:[],mappings:"AAAA;IACI,8BAA8B,GAAG,4BAA4B;;IAE7D,qBAAqB,GAAG,iCAAiC;IACzD,sBAAsB;IACtB,iBAAiB;;IAEjB,cAAc;IACd,SAAS;IACT,oBAAoB;;IAEpB,sBAAsB;IACtB,sBAAsB;IACtB,sBAAsB;AAC1B;;AAEA;IACI,uBAAuB;AAC3B",sourcesContent:["editor-cell {\n    outline: 0px solid transparent;  /* disable default outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: monospace;\n    line-height: 120%;\n\n    display: block;\n    margin: 0;\n    padding: 0.3em 0.5em;\n\n    border: 1px solid #ccc;\n    border-radius: 0.125em;\n    background-color: #eee;\n}\n\neditor-cell[data-active] {\n    border: 1px solid black;\n}\n"],sourceRoot:""}]);const s=i},8025:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,"eval-cell {\n    background-color: white;\n\n    outline: 0px solid transparent;  /* disable default outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: monospace;\n    line-height: 140%;\n\n    display: block;\n    margin:  0;\n    padding: 0.3em 0.5em;\n}\n\n.eval-cell-output {\n    display: block;\n    padding: 0.5em;\n\n    white-space: pre-wrap;  /* properly display white-space */\n    line-height: 140%;\n\n    background-color: white;\n}\n","",{version:3,sources:["webpack://./src/eval-cell-element/style.css"],names:[],mappings:"AAAA;IACI,uBAAuB;;IAEvB,8BAA8B,GAAG,4BAA4B;;IAE7D,qBAAqB,GAAG,iCAAiC;IACzD,sBAAsB;IACtB,iBAAiB;;IAEjB,cAAc;IACd,UAAU;IACV,oBAAoB;AACxB;;AAEA;IACI,cAAc;IACd,cAAc;;IAEd,qBAAqB,GAAG,iCAAiC;IACzD,iBAAiB;;IAEjB,uBAAuB;AAC3B",sourcesContent:["eval-cell {\n    background-color: white;\n\n    outline: 0px solid transparent;  /* disable default outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: monospace;\n    line-height: 140%;\n\n    display: block;\n    margin:  0;\n    padding: 0.3em 0.5em;\n}\n\n.eval-cell-output {\n    display: block;\n    padding: 0.5em;\n\n    white-space: pre-wrap;  /* properly display white-space */\n    line-height: 140%;\n\n    background-color: white;\n}\n"],sourceRoot:""}]);const s=i},6579:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,'/* See theme-colors.css for the general colors that are set according\n * to the prefers-color-scheme media query.\n */\n\nbody {\n    --color-bg-settings-dialog-section: var(--color-bg-page-minor);\n    --color-fg-settings-dialog-section: var(--color-c0-page-minor);\n\n    --color-bg-settings-dialog-control: var(--color-bg-tool-active1-awake0);\n    --color-fg-settings-dialog-control: var(--color-c0-tool-active1-awake0);\n\n    --color-bg-settings-dialog-error:   var(--color-bg-page-alert2);\n    --color-fg-settings-dialog-error:   var(--color-c1-page-alert2);\n}\n\n.settings-dialog .dialog_text {\n    font-size: x-large;\n    font-style: italic;\n}\n\n.settings-dialog .section {\n    display: flex;\n}\n\n.settings-dialog [data-section] {\n    position: relative;\n    min-width: max-content;\n    margin: 2rem 0 0 1rem;\n    padding: 1rem;\n    height: max-content;\n    border: 1px solid black;\n    border-radius: 8px;\n    color: var(--color-fg-settings-dialog-section);\n    background: var(--color-bg-settings-dialog-section);\n}\n\n.settings-dialog [data-section]::before {\n    position: absolute;\n    content: attr(data-section);\n    left: 0.8rem;\n    top: -0.7rem;\n    padding: 0 1rem;\n    border: 1px solid #aaa;\n    border-radius: 4px;\n    color: var(--color-fg-settings-dialog-section);\n    background: var(--color-bg-settings-dialog-section);\n    font-style: italic;\n}\n\n.settings-dialog [data-section] [data-setting] label {\n    display: inline-block;\n    width: 9rem;\n    text-align: right;\n    font-family: sans-serif;\n    font-size: small;\n    user-select: none;\n}\n\n.settings-dialog [data-section] [data-setting] input,\n.settings-dialog [data-section] [data-setting] select {\n    color: var(--color-fg-settings-dialog-control);\n    background: var(--color-bg-settings-dialog-control);\n    margin: 0.25rem;\n}\n\n.settings-dialog [data-section] [data-setting] input[type="text"] {\n    width: 5rem;\n}\n\n.settings-dialog .warning {\n    display: none;\n    width: 18rem;\n    margin: 2rem 0 0 1rem;\n    padding: 1rem;\n    height: max-content;\n    border: 1px solid black;\n    border-radius: 8px;\n    color: var(--color-fg-settings-dialog-warning);\n    background: var(--color-bg-settings-dialog-warning);\n}\n.settings-dialog .warning p:first-child {\n    margin-block-start: 0;\n}\n.settings-dialog .warning p:last-child {\n    margin-block-end: 0;\n}\n.settings-dialog .show-emacs-warning .emacs-warning {\n    display: block;\n}\n\n.settings-dialog input[type="submit"] {\n    margin-top: 1rem;\n}\n\n.settings-dialog .error-message {\n    display: none;\n    margin: 2rem 0 0 1rem;\n    max-width: 25vx;\n    padding: 0.5rem;\n    border-radius: 5pt;\n    background-color: var(--color-bg-settings-dialog-error);\n    color: var(--color-fg-settings-dialog-error);\n    height: fit-content;\n}\n.settings-dialog .error-message.active {\n    display: block;\n}\n',"",{version:3,sources:["webpack://./src/settings-dialog/settings-dialog.css"],names:[],mappings:"AAAA;;EAEE;;AAEF;IACI,8DAA8D;IAC9D,8DAA8D;;IAE9D,uEAAuE;IACvE,uEAAuE;;IAEvE,+DAA+D;IAC/D,+DAA+D;AACnE;;AAEA;IACI,kBAAkB;IAClB,kBAAkB;AACtB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,kBAAkB;IAClB,sBAAsB;IACtB,qBAAqB;IACrB,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,kBAAkB;IAClB,8CAA8C;IAC9C,mDAAmD;AACvD;;AAEA;IACI,kBAAkB;IAClB,2BAA2B;IAC3B,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,sBAAsB;IACtB,kBAAkB;IAClB,8CAA8C;IAC9C,mDAAmD;IACnD,kBAAkB;AACtB;;AAEA;IACI,qBAAqB;IACrB,WAAW;IACX,iBAAiB;IACjB,uBAAuB;IACvB,gBAAgB;IAChB,iBAAiB;AACrB;;AAEA;;IAEI,8CAA8C;IAC9C,mDAAmD;IACnD,eAAe;AACnB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,aAAa;IACb,YAAY;IACZ,qBAAqB;IACrB,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,kBAAkB;IAClB,8CAA8C;IAC9C,mDAAmD;AACvD;AACA;IACI,qBAAqB;AACzB;AACA;IACI,mBAAmB;AACvB;AACA;IACI,cAAc;AAClB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,eAAe;IACf,eAAe;IACf,kBAAkB;IAClB,uDAAuD;IACvD,4CAA4C;IAC5C,mBAAmB;AACvB;AACA;IACI,cAAc;AAClB",sourcesContent:['/* See theme-colors.css for the general colors that are set according\n * to the prefers-color-scheme media query.\n */\n\nbody {\n    --color-bg-settings-dialog-section: var(--color-bg-page-minor);\n    --color-fg-settings-dialog-section: var(--color-c0-page-minor);\n\n    --color-bg-settings-dialog-control: var(--color-bg-tool-active1-awake0);\n    --color-fg-settings-dialog-control: var(--color-c0-tool-active1-awake0);\n\n    --color-bg-settings-dialog-error:   var(--color-bg-page-alert2);\n    --color-fg-settings-dialog-error:   var(--color-c1-page-alert2);\n}\n\n.settings-dialog .dialog_text {\n    font-size: x-large;\n    font-style: italic;\n}\n\n.settings-dialog .section {\n    display: flex;\n}\n\n.settings-dialog [data-section] {\n    position: relative;\n    min-width: max-content;\n    margin: 2rem 0 0 1rem;\n    padding: 1rem;\n    height: max-content;\n    border: 1px solid black;\n    border-radius: 8px;\n    color: var(--color-fg-settings-dialog-section);\n    background: var(--color-bg-settings-dialog-section);\n}\n\n.settings-dialog [data-section]::before {\n    position: absolute;\n    content: attr(data-section);\n    left: 0.8rem;\n    top: -0.7rem;\n    padding: 0 1rem;\n    border: 1px solid #aaa;\n    border-radius: 4px;\n    color: var(--color-fg-settings-dialog-section);\n    background: var(--color-bg-settings-dialog-section);\n    font-style: italic;\n}\n\n.settings-dialog [data-section] [data-setting] label {\n    display: inline-block;\n    width: 9rem;\n    text-align: right;\n    font-family: sans-serif;\n    font-size: small;\n    user-select: none;\n}\n\n.settings-dialog [data-section] [data-setting] input,\n.settings-dialog [data-section] [data-setting] select {\n    color: var(--color-fg-settings-dialog-control);\n    background: var(--color-bg-settings-dialog-control);\n    margin: 0.25rem;\n}\n\n.settings-dialog [data-section] [data-setting] input[type="text"] {\n    width: 5rem;\n}\n\n.settings-dialog .warning {\n    display: none;\n    width: 18rem;\n    margin: 2rem 0 0 1rem;\n    padding: 1rem;\n    height: max-content;\n    border: 1px solid black;\n    border-radius: 8px;\n    color: var(--color-fg-settings-dialog-warning);\n    background: var(--color-bg-settings-dialog-warning);\n}\n.settings-dialog .warning p:first-child {\n    margin-block-start: 0;\n}\n.settings-dialog .warning p:last-child {\n    margin-block-end: 0;\n}\n.settings-dialog .show-emacs-warning .emacs-warning {\n    display: block;\n}\n\n.settings-dialog input[type="submit"] {\n    margin-top: 1rem;\n}\n\n.settings-dialog .error-message {\n    display: none;\n    margin: 2rem 0 0 1rem;\n    max-width: 25vx;\n    padding: 0.5rem;\n    border-radius: 5pt;\n    background-color: var(--color-bg-settings-dialog-error);\n    color: var(--color-fg-settings-dialog-error);\n    height: fit-content;\n}\n.settings-dialog .error-message.active {\n    display: block;\n}\n'],sourceRoot:""}]);const s=i},6354:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,'/* fix display of errors from TeXZilla */\n/* !!! review this later !!! */\nmerror>mtext {\n    display: block;  /* was "block math", but this prevents display beyond line 1 of the error message */\n}\n\np,\nh1, h2, h3, h4, h5, h6, h7, h8, h9 {\n    margin-block-start: 0.1em;\n    margin-block-end:   0.1em;\n}\n\n/* expand the margin on error messages from texzilla */\nmerror > mtext {\n    margin: 0.25em;\n}\n',"",{version:3,sources:["webpack://./src/style-hacks.css"],names:[],mappings:"AAAA,wCAAwC;AACxC,8BAA8B;AAC9B;IACI,cAAc,GAAG,mFAAmF;AACxG;;AAEA;;IAEI,yBAAyB;IACzB,yBAAyB;AAC7B;;AAEA,sDAAsD;AACtD;IACI,cAAc;AAClB",sourcesContent:['/* fix display of errors from TeXZilla */\n/* !!! review this later !!! */\nmerror>mtext {\n    display: block;  /* was "block math", but this prevents display beyond line 1 of the error message */\n}\n\np,\nh1, h2, h3, h4, h5, h6, h7, h8, h9 {\n    margin-block-start: 0.1em;\n    margin-block-end:   0.1em;\n}\n\n/* expand the margin on error messages from texzilla */\nmerror > mtext {\n    margin: 0.25em;\n}\n'],sourceRoot:""}]);const s=i},5426:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,':root {\n    --controls-height: 1.5rem;\n}\n\n:root {\n    /* color */\n\n    --bgcolor-tool:          hsl(0deg 0% 98% / 100%);\n    --bgcolor-cell:          hsl(0deg 0% 99% / 100%);\n\n    --color-type-markdown:   hsl(205deg 100%  94% / 100%);\n    --color-type-tex:        hsl( 45deg  81%  87% / 100%);\n    --color-type-javascript: hsl( 85deg 100%  85% / 100%);\n\n\n    /* border */\n\n    --border-radius-cell:      0.125em;\n    --border-width-cell:       1px;\n    --border-style-cell:       solid;\n    --border-width-tool:       1px;\n    --border-style-tool:       solid;\n    --border-color-tool:       #ccc;\n    --border-color-cell:       #ccc;\n    --border-color-tool-focus: black;\n    --border-color-cell-focus: black;\n\n\n    /* active output element highlight */\n\n    --active-output-highlight-width: 4px;\n    --active-output-highlight-color: hsl(190deg 100% 15% / 100%);\n    --active-output-highlight-style: dotted;\n\n    --output-background-color: white;\n\n\n    /* focus transition */\n\n    --focus-x1-delay:    0s;\n    --focus-x1-duration: 0.2s;\n    --focus-x1-easing:   cubic-bezier(0.42, 0.0, 0.0, 1.0);\n\n    --focus-x2-delay:    calc(var(--focus-x1-duration) / 4);\n    --focus-x2-duration: 0.1s;\n    --focus-x2-easing:   cubic-bezier(0.42, 0.0, 0.0, 1.0);\n}\n\n\nbody {\n    margin: 0 0 0 1px;  /* prevent left border from getting absorbed into browser window frame */\n    background-color: #eee;\n}\n\n#controls {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-start;\n\n    height: var(--controls-height);\n    background-color: #f8f8f8;\n    border-bottom: 1px solid black;\n}\n\n#controls > tool-bar {  /* next to menu */\n    align-self: center;\n    margin-left: auto;  /* push to far right */\n\n    visibility: visible;\n    max-height: 100vh;\n    padding: 0 0.5em;\n    border: 0;\n    background-color: transparent;\n}\n\n.eval-cell-output {\n    display: block;\n    white-space: pre-wrap;  /* display white-space properly */\n    line-height: 140%;\n\n    padding: 0.5em;\n    background-color: var(--output-background-color);\n\n    /* no highlight */\n    border-width: 0 0 0 var(--active-output-highlight-width);\n    border-color: transparent transparent transparent transparent;\n    border-style: var(--active-output-highlight-style);\n}\n.eval-cell-output:has(+ tool-bar),\n.eval-cell-output:has(+ eval-cell) {\n    padding-bottom: 1em;\n}\n\n\n/* output element active highlight */\neval-cell[data-active] + .eval-cell-output {\n    border-width: 0 0 0 var(--active-output-highlight-width);\n    border-color: transparent transparent transparent var(--active-output-highlight-color);\n    border-style: var(--active-output-highlight-style);\n}\n\n\n/* === visible/active - animated attributes === */\n\n/* tool-bar and eval-cell base definitions: the define a collapsed state */\n\ntool-bar {\n    overflow: hidden;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 0.5em;\n\n    background-color: var(--bgcolor-tool);\n\n    /* prevent tabbing to contained controls by setting visibility:hidden */\n    /* this is necessary because we don\'t set display:none because we want to animate the transition */\n    visibility: hidden;\n\n    max-height:   0;\n    padding:      0 0.5em;\n    border-width: 0;\n    /* split border-color into the three specific sides; the bottom side is controlled separately by the input type selector */\n    border-top-color:   var(--border-color-tool);\n    border-right-color: var(--border-color-tool);\n    border-left-color:  var(--border-color-tool);\n\n    transition: max-height   var(--focus-x1-duration) var(--focus-x1-easing) var(--focus-x1-delay);\n    transition: padding      var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-width var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-color var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n\n    border-radius: var(--border-radius-cell) var(--border-radius-cell) 0 0;\n    border-style:  var(--border-style-tool);\n\n}\n\neval-cell {\n    overflow: hidden;\n\n    display: block;\n    margin:  0;\n\n    outline: 0px solid transparent;  /* disable default contenteditable outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: monospace;\n    line-height: 140%;\n\n    background-color: var(--bgcolor-cell);\n\n    max-height:   0;\n    padding:      0 0.5em;\n    border-width: 0;\n    border-color: transparent var(--border-color-cell) var(--border-color-cell) var(--border-color-cell);\n\n    transition: max-height   var(--focus-x1-duration) var(--focus-x1-easing) var(--focus-x1-delay);\n    transition: padding      var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-width var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-color var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n\n    border-radius: 0 0 var(--border-radius-cell) var(--border-radius-cell);\n    border-style:  var(--border-style-cell);\n}\n\n/* tool-bar and eval-cell visible but not active */\ntool-bar:has(+ eval-cell[data-visible]),\ntool-bar:has(+ eval-cell[contenteditable]) {\n    visibility:   visible;\n    max-height:   100vh;\n    padding:      0 0.5em;\n    border-width: var(--border-width-tool);\n}\neval-cell[data-visible],\neval-cell[contenteditable] {\n    max-height:   100vh;\n    padding:      0.3em 0.5em;\n    border-width: var(--border-width-cell);\n}\n\n/* tool-bar and eval-cell visible and active */\ntool-bar:has(+ eval-cell[data-visible][data-active]),\ntool-bar:has(+ eval-cell[contenteditable][data-active]) {\n    border-top-color:   var(--border-color-tool-focus);\n    border-right-color: var(--border-color-tool-focus);\n    border-left-color:  var(--border-color-tool-focus);\n}\neval-cell[data-visible][data-active],\neval-cell[contenteditable][data-active] {\n    border-color: transparent var(--border-color-cell-focus) var(--border-color-cell-focus) var(--border-color-cell-focus);\n}\n\n\n/* color selected by eval-cell input-type */\n\ntool-bar option,\ntool-bar select {\n    background-color: var(--color-type-markdown);\n}\n\ntool-bar option[value="javascript"],\ntool-bar > select:has(> option[value="javascript"]:checked) {\n    background-color: var(--color-type-javascript);\n}\n\ntool-bar option[value="tex"],\ntool-bar > select:has(> option[value="tex"]:checked) {\n    background-color: var(--color-type-tex);\n}\n\n\ntool-bar:has(option) {\n    border-bottom-color: var(--color-type-markdown);\n}\n\ntool-bar:has(option[value="javascript"]:checked) {\n    border-bottom-color: var(--color-type-javascript);\n}\n\ntool-bar:has(option[value="tex"]:checked) {\n    border-bottom-color: var(--color-type-tex);\n}\n\n/* === tool-bar indicators and controls === */\n\ntool-bar > * {\n    margin: 0;  /* pack controls within tool-bar; let flex gap handle spacing */\n    background-color: hsl(0deg 0% 98% / 100%);\n}\n\n.tool-bar-indicator {\n    display: block;\n    width:  0.5em;\n    height: 0.5em;\n    margin: 0;\n    padding: 0;\n    border-radius: 50%;\n    border: 1px solid hsl(0deg 9% 82% / 100%);\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n\n.tool-bar-indicator.running[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(120deg 94% 40% / 100%);\n}\n.tool-bar-indicator.modified[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(0deg 60% 85% / 100%);\n}\n\ntool-bar > select > option {\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n\n/* === toggle-switch === */\n\ntoggle-switch {\n    appearance: none;\n    border: 0;\n    width:  1.5rem;\n    height: 1.5rem;\n}\n\ntoggle-switch svg {\n    width:  auto;\n    height: 100%;\n}\n\ntoggle-switch.tool-bar-toggle-editable                      svg .accent-fill   { fill:   hsl(0deg 9% 82% / 100%); }\ntoggle-switch.tool-bar-toggle-editable                      svg .accent-stroke { stroke: transparent; }\ntoggle-switch.tool-bar-toggle-editable[aria-checked="true"] svg .accent-fill   { fill:   hsl(0deg 60% 70% / 100%); }\ntoggle-switch.tool-bar-toggle-editable[aria-checked="true"] svg .accent-stroke { stroke: transparent; }\n\ntoggle-switch.tool-bar-toggle-visible                       svg .accent-fill   { fill:   transparent; }\ntoggle-switch.tool-bar-toggle-visible                       svg .accent-stroke { stroke: hsl(0deg 9% 82% / 100%); }\ntoggle-switch.tool-bar-toggle-visible[aria-checked="true"]  svg .accent-fill   { fill:   chartreuse; }\ntoggle-switch.tool-bar-toggle-visible[aria-checked="true"]  svg .accent-stroke { stroke: hsl(0deg 100% 45% / 100%); }\n\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-fill   { fill:   transparent; }\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-stroke { stroke: hsl(0deg 9% 82% / 100%); }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-fill   { fill:   transparent; }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-stroke { stroke: hsl(0deg 60% 70% / 100%); }\n\n\n/* === print media queries === */\n\n@media not print {\n    /* these overflow styles cause only a single page to be "printed" (output) */\n\n    body {\n        overflow: hidden;\n    }\n\n    #content {\n        overflow: auto;\n        max-height: calc(100vh - var(--controls-height));\n    }\n}\n\n@media print {\n\n    #controls {\n        display: none;\n    }\n\n}\n',"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;IACI,yBAAyB;AAC7B;;AAEA;IACI,UAAU;;IAEV,gDAAgD;IAChD,gDAAgD;;IAEhD,qDAAqD;IACrD,qDAAqD;IACrD,qDAAqD;;;IAGrD,WAAW;;IAEX,kCAAkC;IAClC,8BAA8B;IAC9B,gCAAgC;IAChC,8BAA8B;IAC9B,gCAAgC;IAChC,+BAA+B;IAC/B,+BAA+B;IAC/B,gCAAgC;IAChC,gCAAgC;;;IAGhC,oCAAoC;;IAEpC,oCAAoC;IACpC,4DAA4D;IAC5D,uCAAuC;;IAEvC,gCAAgC;;;IAGhC,qBAAqB;;IAErB,uBAAuB;IACvB,yBAAyB;IACzB,sDAAsD;;IAEtD,uDAAuD;IACvD,yBAAyB;IACzB,sDAAsD;AAC1D;;;AAGA;IACI,iBAAiB,GAAG,wEAAwE;IAC5F,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,2BAA2B;;IAE3B,8BAA8B;IAC9B,yBAAyB;IACzB,8BAA8B;AAClC;;AAEA,wBAAwB,iBAAiB;IACrC,kBAAkB;IAClB,iBAAiB,GAAG,sBAAsB;;IAE1C,mBAAmB;IACnB,iBAAiB;IACjB,gBAAgB;IAChB,SAAS;IACT,6BAA6B;AACjC;;AAEA;IACI,cAAc;IACd,qBAAqB,GAAG,iCAAiC;IACzD,iBAAiB;;IAEjB,cAAc;IACd,gDAAgD;;IAEhD,iBAAiB;IACjB,wDAAwD;IACxD,6DAA6D;IAC7D,kDAAkD;AACtD;AACA;;IAEI,mBAAmB;AACvB;;;AAGA,oCAAoC;AACpC;IACI,wDAAwD;IACxD,sFAAsF;IACtF,kDAAkD;AACtD;;;AAGA,iDAAiD;;AAEjD,0EAA0E;;AAE1E;IACI,gBAAgB;;IAEhB,aAAa;IACb,mBAAmB;IACnB,yBAAyB;IACzB,UAAU;;IAEV,qCAAqC;;IAErC,uEAAuE;IACvE,kGAAkG;IAClG,kBAAkB;;IAElB,eAAe;IACf,qBAAqB;IACrB,eAAe;IACf,0HAA0H;IAC1H,4CAA4C;IAC5C,4CAA4C;IAC5C,4CAA4C;;IAE5C,8FAA8F;IAC9F,8FAA8F;IAC9F,8FAA8F;IAC9F,8FAA8F;;IAE9F,sEAAsE;IACtE,uCAAuC;;AAE3C;;AAEA;IACI,gBAAgB;;IAEhB,cAAc;IACd,UAAU;;IAEV,8BAA8B,GAAG,4CAA4C;;IAE7E,qBAAqB,GAAG,iCAAiC;IACzD,sBAAsB;IACtB,iBAAiB;;IAEjB,qCAAqC;;IAErC,eAAe;IACf,qBAAqB;IACrB,eAAe;IACf,oGAAoG;;IAEpG,8FAA8F;IAC9F,8FAA8F;IAC9F,8FAA8F;IAC9F,8FAA8F;;IAE9F,sEAAsE;IACtE,uCAAuC;AAC3C;;AAEA,kDAAkD;AAClD;;IAEI,qBAAqB;IACrB,mBAAmB;IACnB,qBAAqB;IACrB,sCAAsC;AAC1C;AACA;;IAEI,mBAAmB;IACnB,yBAAyB;IACzB,sCAAsC;AAC1C;;AAEA,8CAA8C;AAC9C;;IAEI,kDAAkD;IAClD,kDAAkD;IAClD,kDAAkD;AACtD;AACA;;IAEI,sHAAsH;AAC1H;;;AAGA,2CAA2C;;AAE3C;;IAEI,4CAA4C;AAChD;;AAEA;;IAEI,8CAA8C;AAClD;;AAEA;;IAEI,uCAAuC;AAC3C;;;AAGA;IACI,+CAA+C;AACnD;;AAEA;IACI,iDAAiD;AACrD;;AAEA;IACI,0CAA0C;AAC9C;;AAEA,6CAA6C;;AAE7C;IACI,SAAS,GAAG,+DAA+D;IAC3E,yCAAyC;AAC7C;;AAEA;IACI,cAAc;IACd,aAAa;IACb,aAAa;IACb,SAAS;IACT,UAAU;IACV,kBAAkB;IAClB,yCAAyC;IACzC,yCAAyC;AAC7C;;AAEA;IACI,uBAAuB;IACvB,4CAA4C;AAChD;AACA;IACI,uBAAuB;IACvB,0CAA0C;AAC9C;;AAEA;IACI,yCAAyC;AAC7C;;AAEA,0BAA0B;;AAE1B;IACI,gBAAgB;IAChB,SAAS;IACT,cAAc;IACd,cAAc;AAClB;;AAEA;IACI,YAAY;IACZ,YAAY;AAChB;;AAEA,iFAAiF,+BAA+B,EAAE;AAClH,iFAAiF,mBAAmB,EAAE;AACtG,iFAAiF,gCAAgC,EAAE;AACnH,iFAAiF,mBAAmB,EAAE;;AAEtG,iFAAiF,mBAAmB,EAAE;AACtG,iFAAiF,+BAA+B,EAAE;AAClH,iFAAiF,kBAAkB,EAAE;AACrG,iFAAiF,iCAAiC,EAAE;;AAEpH,iFAAiF,mBAAmB,EAAE;AACtG,iFAAiF,+BAA+B,EAAE;AAClH,iFAAiF,mBAAmB,EAAE;AACtG,iFAAiF,gCAAgC,EAAE;;;AAGnH,gCAAgC;;AAEhC;IACI,4EAA4E;;IAE5E;QACI,gBAAgB;IACpB;;IAEA;QACI,cAAc;QACd,gDAAgD;IACpD;AACJ;;AAEA;;IAEI;QACI,aAAa;IACjB;;AAEJ",sourcesContent:[':root {\n    --controls-height: 1.5rem;\n}\n\n:root {\n    /* color */\n\n    --bgcolor-tool:          hsl(0deg 0% 98% / 100%);\n    --bgcolor-cell:          hsl(0deg 0% 99% / 100%);\n\n    --color-type-markdown:   hsl(205deg 100%  94% / 100%);\n    --color-type-tex:        hsl( 45deg  81%  87% / 100%);\n    --color-type-javascript: hsl( 85deg 100%  85% / 100%);\n\n\n    /* border */\n\n    --border-radius-cell:      0.125em;\n    --border-width-cell:       1px;\n    --border-style-cell:       solid;\n    --border-width-tool:       1px;\n    --border-style-tool:       solid;\n    --border-color-tool:       #ccc;\n    --border-color-cell:       #ccc;\n    --border-color-tool-focus: black;\n    --border-color-cell-focus: black;\n\n\n    /* active output element highlight */\n\n    --active-output-highlight-width: 4px;\n    --active-output-highlight-color: hsl(190deg 100% 15% / 100%);\n    --active-output-highlight-style: dotted;\n\n    --output-background-color: white;\n\n\n    /* focus transition */\n\n    --focus-x1-delay:    0s;\n    --focus-x1-duration: 0.2s;\n    --focus-x1-easing:   cubic-bezier(0.42, 0.0, 0.0, 1.0);\n\n    --focus-x2-delay:    calc(var(--focus-x1-duration) / 4);\n    --focus-x2-duration: 0.1s;\n    --focus-x2-easing:   cubic-bezier(0.42, 0.0, 0.0, 1.0);\n}\n\n\nbody {\n    margin: 0 0 0 1px;  /* prevent left border from getting absorbed into browser window frame */\n    background-color: #eee;\n}\n\n#controls {\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-start;\n\n    height: var(--controls-height);\n    background-color: #f8f8f8;\n    border-bottom: 1px solid black;\n}\n\n#controls > tool-bar {  /* next to menu */\n    align-self: center;\n    margin-left: auto;  /* push to far right */\n\n    visibility: visible;\n    max-height: 100vh;\n    padding: 0 0.5em;\n    border: 0;\n    background-color: transparent;\n}\n\n.eval-cell-output {\n    display: block;\n    white-space: pre-wrap;  /* display white-space properly */\n    line-height: 140%;\n\n    padding: 0.5em;\n    background-color: var(--output-background-color);\n\n    /* no highlight */\n    border-width: 0 0 0 var(--active-output-highlight-width);\n    border-color: transparent transparent transparent transparent;\n    border-style: var(--active-output-highlight-style);\n}\n.eval-cell-output:has(+ tool-bar),\n.eval-cell-output:has(+ eval-cell) {\n    padding-bottom: 1em;\n}\n\n\n/* output element active highlight */\neval-cell[data-active] + .eval-cell-output {\n    border-width: 0 0 0 var(--active-output-highlight-width);\n    border-color: transparent transparent transparent var(--active-output-highlight-color);\n    border-style: var(--active-output-highlight-style);\n}\n\n\n/* === visible/active - animated attributes === */\n\n/* tool-bar and eval-cell base definitions: the define a collapsed state */\n\ntool-bar {\n    overflow: hidden;\n\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 0.5em;\n\n    background-color: var(--bgcolor-tool);\n\n    /* prevent tabbing to contained controls by setting visibility:hidden */\n    /* this is necessary because we don\'t set display:none because we want to animate the transition */\n    visibility: hidden;\n\n    max-height:   0;\n    padding:      0 0.5em;\n    border-width: 0;\n    /* split border-color into the three specific sides; the bottom side is controlled separately by the input type selector */\n    border-top-color:   var(--border-color-tool);\n    border-right-color: var(--border-color-tool);\n    border-left-color:  var(--border-color-tool);\n\n    transition: max-height   var(--focus-x1-duration) var(--focus-x1-easing) var(--focus-x1-delay);\n    transition: padding      var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-width var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-color var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n\n    border-radius: var(--border-radius-cell) var(--border-radius-cell) 0 0;\n    border-style:  var(--border-style-tool);\n\n}\n\neval-cell {\n    overflow: hidden;\n\n    display: block;\n    margin:  0;\n\n    outline: 0px solid transparent;  /* disable default contenteditable outline */\n\n    white-space: pre-wrap;  /* properly display white-space */\n    font-family: monospace;\n    line-height: 140%;\n\n    background-color: var(--bgcolor-cell);\n\n    max-height:   0;\n    padding:      0 0.5em;\n    border-width: 0;\n    border-color: transparent var(--border-color-cell) var(--border-color-cell) var(--border-color-cell);\n\n    transition: max-height   var(--focus-x1-duration) var(--focus-x1-easing) var(--focus-x1-delay);\n    transition: padding      var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-width var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n    transition: border-color var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);\n\n    border-radius: 0 0 var(--border-radius-cell) var(--border-radius-cell);\n    border-style:  var(--border-style-cell);\n}\n\n/* tool-bar and eval-cell visible but not active */\ntool-bar:has(+ eval-cell[data-visible]),\ntool-bar:has(+ eval-cell[contenteditable]) {\n    visibility:   visible;\n    max-height:   100vh;\n    padding:      0 0.5em;\n    border-width: var(--border-width-tool);\n}\neval-cell[data-visible],\neval-cell[contenteditable] {\n    max-height:   100vh;\n    padding:      0.3em 0.5em;\n    border-width: var(--border-width-cell);\n}\n\n/* tool-bar and eval-cell visible and active */\ntool-bar:has(+ eval-cell[data-visible][data-active]),\ntool-bar:has(+ eval-cell[contenteditable][data-active]) {\n    border-top-color:   var(--border-color-tool-focus);\n    border-right-color: var(--border-color-tool-focus);\n    border-left-color:  var(--border-color-tool-focus);\n}\neval-cell[data-visible][data-active],\neval-cell[contenteditable][data-active] {\n    border-color: transparent var(--border-color-cell-focus) var(--border-color-cell-focus) var(--border-color-cell-focus);\n}\n\n\n/* color selected by eval-cell input-type */\n\ntool-bar option,\ntool-bar select {\n    background-color: var(--color-type-markdown);\n}\n\ntool-bar option[value="javascript"],\ntool-bar > select:has(> option[value="javascript"]:checked) {\n    background-color: var(--color-type-javascript);\n}\n\ntool-bar option[value="tex"],\ntool-bar > select:has(> option[value="tex"]:checked) {\n    background-color: var(--color-type-tex);\n}\n\n\ntool-bar:has(option) {\n    border-bottom-color: var(--color-type-markdown);\n}\n\ntool-bar:has(option[value="javascript"]:checked) {\n    border-bottom-color: var(--color-type-javascript);\n}\n\ntool-bar:has(option[value="tex"]:checked) {\n    border-bottom-color: var(--color-type-tex);\n}\n\n/* === tool-bar indicators and controls === */\n\ntool-bar > * {\n    margin: 0;  /* pack controls within tool-bar; let flex gap handle spacing */\n    background-color: hsl(0deg 0% 98% / 100%);\n}\n\n.tool-bar-indicator {\n    display: block;\n    width:  0.5em;\n    height: 0.5em;\n    margin: 0;\n    padding: 0;\n    border-radius: 50%;\n    border: 1px solid hsl(0deg 9% 82% / 100%);\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n\n.tool-bar-indicator.running[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(120deg 94% 40% / 100%);\n}\n.tool-bar-indicator.modified[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(0deg 60% 85% / 100%);\n}\n\ntool-bar > select > option {\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n\n/* === toggle-switch === */\n\ntoggle-switch {\n    appearance: none;\n    border: 0;\n    width:  1.5rem;\n    height: 1.5rem;\n}\n\ntoggle-switch svg {\n    width:  auto;\n    height: 100%;\n}\n\ntoggle-switch.tool-bar-toggle-editable                      svg .accent-fill   { fill:   hsl(0deg 9% 82% / 100%); }\ntoggle-switch.tool-bar-toggle-editable                      svg .accent-stroke { stroke: transparent; }\ntoggle-switch.tool-bar-toggle-editable[aria-checked="true"] svg .accent-fill   { fill:   hsl(0deg 60% 70% / 100%); }\ntoggle-switch.tool-bar-toggle-editable[aria-checked="true"] svg .accent-stroke { stroke: transparent; }\n\ntoggle-switch.tool-bar-toggle-visible                       svg .accent-fill   { fill:   transparent; }\ntoggle-switch.tool-bar-toggle-visible                       svg .accent-stroke { stroke: hsl(0deg 9% 82% / 100%); }\ntoggle-switch.tool-bar-toggle-visible[aria-checked="true"]  svg .accent-fill   { fill:   chartreuse; }\ntoggle-switch.tool-bar-toggle-visible[aria-checked="true"]  svg .accent-stroke { stroke: hsl(0deg 100% 45% / 100%); }\n\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-fill   { fill:   transparent; }\ntoggle-switch.tool-bar-toggle-autoeval                      svg .accent-stroke { stroke: hsl(0deg 9% 82% / 100%); }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-fill   { fill:   transparent; }\ntoggle-switch.tool-bar-toggle-autoeval[aria-checked="true"] svg .accent-stroke { stroke: hsl(0deg 60% 70% / 100%); }\n\n\n/* === print media queries === */\n\n@media not print {\n    /* these overflow styles cause only a single page to be "printed" (output) */\n\n    body {\n        overflow: hidden;\n    }\n\n    #content {\n        overflow: auto;\n        max-height: calc(100vh - var(--controls-height));\n    }\n}\n\n@media print {\n\n    #controls {\n        display: none;\n    }\n\n}\n'],sourceRoot:""}]);const s=i},3339:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,"/* === NAMING LEGEND ===\n *\n * bg: background\n * c0: foreground level 0 (normal)\n * c1: foreground level 1 (highlight)\n *\n * page: page region\n * major: major page region\n * minor: minor page region\n * alert1: alert/warning\n * alert2: error/important\n *\n * tool: toolbar/tab region\n * active0: inactive\n * active1: active\n * awake0: sleeping/unfocused\n * awake1: focused\n */\n\nhtml {\n    --color-bg-page-major:          hsl(  0deg,   0%, 100%);\n    --color-c0-page-major:          hsl(  0deg,   0%,   0%);\n    --color-c1-page-major:          hsl(240deg,  60%,  50%);\n\n    --color-bg-page-minor:          hsl(  0deg,   0%,  95%);\n    --color-c0-page-minor:          hsl(  0deg,   0%,   0%);\n    --color-c1-page-minor:          hsl(240deg,  60%,  50%);\n\n    --color-bg-page-alert1:         hsl( 60deg,  80%,  50%);\n    --color-c0-page-alert1:         hsl(  0deg,   0%,   0%);\n    --color-c1-page-alert1:         hsl(240deg,  60%,  50%);\n\n    --color-bg-page-alert2:         hsl(  0deg,  60%,  50%);\n    --color-c0-page-alert2:         hsl(  0deg,   0%,   0%);\n    --color-c1-page-alert2:         hsl(  0deg,   0%, 100%);\n\n    --color-bg-tool-active0-awake0: hsl(  0deg,   0%,  20%);\n    --color-c0-tool-active0-awake0: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake0: hsl(240deg, 100%,  90%);\n\n    --color-bg-tool-active0-awake1: hsl(  0deg,   0%,  35%);\n    --color-c0-tool-active0-awake1: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake1: hsl(240deg, 100%,  90%);\n\n    --color-bg-tool-active1-awake0: hsl(  0deg,   0%,  96%);\n    --color-c0-tool-active1-awake0: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake0: hsl(  0deg,   0%,  30%);\n\n    --color-bg-tool-active1-awake1: hsl(  0deg,   0%, 100%);\n    --color-c0-tool-active1-awake1: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake1: hsl(  0deg,   0%,  30%);\n}\n\nhtml.dark {\n    --color-bg-page-major:          hsl(  0deg,   0%,  25%);\n    --color-c0-page-major:          hsl(  0deg,   0%, 100%);\n    --color-c1-page-major:          hsl(180deg, 100%,  90%);\n\n    --color-bg-page-minor:          hsl(  0deg,   0%,  15%);\n    --color-c0-page-minor:          hsl(  0deg,   0%, 100%);\n    --color-c1-page-minor:          hsl(180deg, 100%,  90%);\n\n    --color-bg-page-alert1:         hsl( 60deg,  80%,  20%);\n    --color-c0-page-alert1:         hsl(  0deg,   0%, 100%);\n    --color-c1-page-alert1:         hsl(180deg, 100%,  90%);\n\n    --color-bg-page-alert2:         hsl(  0deg,  60%,  30%);\n    --color-c0-page-alert2:         hsl(  0deg,   0%, 100%);\n    --color-c1-page-alert2:         hsl(180deg, 100%,  90%);\n\n    --color-bg-tool-active0-awake0: hsl(  0deg,   0%,  20%);\n    --color-c0-tool-active0-awake0: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake0: hsl(180deg, 100%,  90%);\n\n    --color-bg-tool-active0-awake1: hsl(  0deg,   0%,  30%);\n    --color-c0-tool-active0-awake1: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake1: hsl(180deg, 100%,  90%);\n\n    --color-bg-tool-active1-awake0: hsl(  0deg,   0%,  60%);\n    --color-c0-tool-active1-awake0: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake0: hsl(240deg, 100%,  30%);\n\n    --color-bg-tool-active1-awake1: hsl(  0deg,   0%,  70%);\n    --color-c0-tool-active1-awake1: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake1: hsl(240deg, 100%,  30%);\n}\n","",{version:3,sources:["webpack://./src/theme-settings/theme-colors.css"],names:[],mappings:"AAAA;;;;;;;;;;;;;;;;;EAiBE;;AAEF;IACI,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;AAC3D;;AAEA;IACI,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;;IAEvD,uDAAuD;IACvD,uDAAuD;IACvD,uDAAuD;AAC3D",sourcesContent:["/* === NAMING LEGEND ===\n *\n * bg: background\n * c0: foreground level 0 (normal)\n * c1: foreground level 1 (highlight)\n *\n * page: page region\n * major: major page region\n * minor: minor page region\n * alert1: alert/warning\n * alert2: error/important\n *\n * tool: toolbar/tab region\n * active0: inactive\n * active1: active\n * awake0: sleeping/unfocused\n * awake1: focused\n */\n\nhtml {\n    --color-bg-page-major:          hsl(  0deg,   0%, 100%);\n    --color-c0-page-major:          hsl(  0deg,   0%,   0%);\n    --color-c1-page-major:          hsl(240deg,  60%,  50%);\n\n    --color-bg-page-minor:          hsl(  0deg,   0%,  95%);\n    --color-c0-page-minor:          hsl(  0deg,   0%,   0%);\n    --color-c1-page-minor:          hsl(240deg,  60%,  50%);\n\n    --color-bg-page-alert1:         hsl( 60deg,  80%,  50%);\n    --color-c0-page-alert1:         hsl(  0deg,   0%,   0%);\n    --color-c1-page-alert1:         hsl(240deg,  60%,  50%);\n\n    --color-bg-page-alert2:         hsl(  0deg,  60%,  50%);\n    --color-c0-page-alert2:         hsl(  0deg,   0%,   0%);\n    --color-c1-page-alert2:         hsl(  0deg,   0%, 100%);\n\n    --color-bg-tool-active0-awake0: hsl(  0deg,   0%,  20%);\n    --color-c0-tool-active0-awake0: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake0: hsl(240deg, 100%,  90%);\n\n    --color-bg-tool-active0-awake1: hsl(  0deg,   0%,  35%);\n    --color-c0-tool-active0-awake1: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake1: hsl(240deg, 100%,  90%);\n\n    --color-bg-tool-active1-awake0: hsl(  0deg,   0%,  96%);\n    --color-c0-tool-active1-awake0: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake0: hsl(  0deg,   0%,  30%);\n\n    --color-bg-tool-active1-awake1: hsl(  0deg,   0%, 100%);\n    --color-c0-tool-active1-awake1: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake1: hsl(  0deg,   0%,  30%);\n}\n\nhtml.dark {\n    --color-bg-page-major:          hsl(  0deg,   0%,  25%);\n    --color-c0-page-major:          hsl(  0deg,   0%, 100%);\n    --color-c1-page-major:          hsl(180deg, 100%,  90%);\n\n    --color-bg-page-minor:          hsl(  0deg,   0%,  15%);\n    --color-c0-page-minor:          hsl(  0deg,   0%, 100%);\n    --color-c1-page-minor:          hsl(180deg, 100%,  90%);\n\n    --color-bg-page-alert1:         hsl( 60deg,  80%,  20%);\n    --color-c0-page-alert1:         hsl(  0deg,   0%, 100%);\n    --color-c1-page-alert1:         hsl(180deg, 100%,  90%);\n\n    --color-bg-page-alert2:         hsl(  0deg,  60%,  30%);\n    --color-c0-page-alert2:         hsl(  0deg,   0%, 100%);\n    --color-c1-page-alert2:         hsl(180deg, 100%,  90%);\n\n    --color-bg-tool-active0-awake0: hsl(  0deg,   0%,  20%);\n    --color-c0-tool-active0-awake0: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake0: hsl(180deg, 100%,  90%);\n\n    --color-bg-tool-active0-awake1: hsl(  0deg,   0%,  30%);\n    --color-c0-tool-active0-awake1: hsl(  0deg,   0%, 100%);\n    --color-c1-tool-active0-awake1: hsl(180deg, 100%,  90%);\n\n    --color-bg-tool-active1-awake0: hsl(  0deg,   0%,  60%);\n    --color-c0-tool-active1-awake0: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake0: hsl(240deg, 100%,  30%);\n\n    --color-bg-tool-active1-awake1: hsl(  0deg,   0%,  70%);\n    --color-c0-tool-active1-awake1: hsl(  0deg,   0%,   0%);\n    --color-c1-tool-active1-awake1: hsl(240deg, 100%,  30%);\n}\n"],sourceRoot:""}]);const s=i},4267:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,'toggle-switch {\n    appearance: none;\n    border: 0;\n    width:  1.5rem;\n    height: 1.5rem;\n}\n\ntoggle-switch svg {\n    width:  auto;\n    height: 100%;\n}\n\ntoggle-switch                      svg .accent-fill   { fill:   transparent; }\ntoggle-switch                      svg .accent-stroke { stroke: hsl(0deg 9% 82% / 100%); }\ntoggle-switch[aria-checked="true"] svg .accent-fill   { fill:   transparent; }\ntoggle-switch[aria-checked="true"] svg .accent-stroke { stroke: hsl(0deg 60% 70% / 100%); }\n',"",{version:3,sources:["webpack://./src/toggle-switch-element/style.css"],names:[],mappings:"AAAA;IACI,gBAAgB;IAChB,SAAS;IACT,cAAc;IACd,cAAc;AAClB;;AAEA;IACI,YAAY;IACZ,YAAY;AAChB;;AAEA,wDAAwD,mBAAmB,EAAE;AAC7E,wDAAwD,+BAA+B,EAAE;AACzF,wDAAwD,mBAAmB,EAAE;AAC7E,wDAAwD,gCAAgC,EAAE",sourcesContent:['toggle-switch {\n    appearance: none;\n    border: 0;\n    width:  1.5rem;\n    height: 1.5rem;\n}\n\ntoggle-switch svg {\n    width:  auto;\n    height: 100%;\n}\n\ntoggle-switch                      svg .accent-fill   { fill:   transparent; }\ntoggle-switch                      svg .accent-stroke { stroke: hsl(0deg 9% 82% / 100%); }\ntoggle-switch[aria-checked="true"] svg .accent-fill   { fill:   transparent; }\ntoggle-switch[aria-checked="true"] svg .accent-stroke { stroke: hsl(0deg 60% 70% / 100%); }\n'],sourceRoot:""}]);const s=i},1470:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7537),o=n.n(r),a=n(3645),i=n.n(a)()(o());i.push([e.id,'tool-bar {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 0.5em;\n    padding: 0 0.5em;\n}\n\ntool-bar > * {\n    margin: 0;  /* pack controls within tool-bar; let flex gap handle spacing */\n    background-color: hsl(0deg 0% 98% / 100%);\n}\n\n.tool-bar-indicator {\n    display: block;\n    width:  0.5em;\n    height: 0.5em;\n    margin: 0;\n    padding: 0;\n    border-radius: 50%;\n    border: 1px solid hsl(0deg 9% 82% / 100%);\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n\n.tool-bar-indicator.running[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(120deg 94% 40% / 100%);\n}\n.tool-bar-indicator.modified[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(0deg 60% 85% / 100%);\n}\n\ntool-bar > select > option {\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n',"",{version:3,sources:["webpack://./src/tool-bar-element/style.css"],names:[],mappings:"AAAA;IACI,aAAa;IACb,mBAAmB;IACnB,yBAAyB;IACzB,UAAU;IACV,gBAAgB;AACpB;;AAEA;IACI,SAAS,GAAG,+DAA+D;IAC3E,yCAAyC;AAC7C;;AAEA;IACI,cAAc;IACd,aAAa;IACb,aAAa;IACb,SAAS;IACT,UAAU;IACV,kBAAkB;IAClB,yCAAyC;IACzC,yCAAyC;AAC7C;;AAEA;IACI,uBAAuB;IACvB,4CAA4C;AAChD;AACA;IACI,uBAAuB;IACvB,0CAA0C;AAC9C;;AAEA;IACI,yCAAyC;AAC7C",sourcesContent:['tool-bar {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 0.5em;\n    padding: 0 0.5em;\n}\n\ntool-bar > * {\n    margin: 0;  /* pack controls within tool-bar; let flex gap handle spacing */\n    background-color: hsl(0deg 0% 98% / 100%);\n}\n\n.tool-bar-indicator {\n    display: block;\n    width:  0.5em;\n    height: 0.5em;\n    margin: 0;\n    padding: 0;\n    border-radius: 50%;\n    border: 1px solid hsl(0deg 9% 82% / 100%);\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n\n.tool-bar-indicator.running[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(120deg 94% 40% / 100%);\n}\n.tool-bar-indicator.modified[data-indicator-value="on"] {\n    border: 1px solid black;\n    background-color: hsl(0deg 60% 85% / 100%);\n}\n\ntool-bar > select > option {\n    background-color: hsl(0deg 0% 97% / 100%);\n}\n'],sourceRoot:""}]);const s=i},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},7537:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(o," */");return[t].concat([a]).join("\n")}return[t].join("\n")}},2534:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(7292),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},1456:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(841),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},812:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(8025),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},9642:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(6579),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},7451:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(6354),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},7654:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(5426),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},5350:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(3339),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},7263:(e,t,n)=>{var r=n(3379),o=n.n(r),a=n(7795),i=n.n(a),s=n(569),l=n.n(s),c=n(3565),d=n.n(c),u=n(9216),h=n.n(u),m=n(4589),_=n.n(m),g=n(1470),A={};A.styleTagTransform=_(),A.setAttributes=d(),A.insert=l().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=h(),o()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals},3379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var l=e[s],c=r.base?l[0]+r.base:l[0],d=a[c]||0,u="".concat(c," ").concat(d);a[c]=d+1;var h=n(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(m);else{var _=o(m,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:_,references:1})}i.push(u)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var l=r(e,o),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=l}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},9886:(e,t,n)=>{n.d(t,{w:()=>r});class r{constructor(e=!1){this.#e=[],this.#t=!!e}#e;#t;empty(){return this.#e.length<=0}attached(){return this.#t}add(e,t,n,r){const o={target:e,type:t,listener:n,options:r};if(this.constructor.#n(o),-1!==this.#r(o))throw new Error("equivalent event handler already added");this.#t&&e.addEventListener(t,n,r),this.#e.push(o)}remove(e,t,n,r){const o={target:e,type:t,listener:n,options:r};this.constructor.#n(o);const a=this.#r(o);if(-1===a)throw new Error("specified event handler not found");this.#e.splice(a,1),this.#t&&e.removeEventListener(e,t,r)}remove_all(){if(this.#t)for(const e of this.#e){const{target:t,type:n,listener:r,options:o}=e;t.removeEventListener(n,r,o)}this.#e.splice(0)}attach(){if(!this.#t){for(const e of this.#e){const{target:t,type:n,listener:r,options:o}=e;t.removeEventListener(n,r,o),t.addEventListener(n,r,o)}this.#t=!0}}detach(){if(this.#t){for(const e of this.#e){const{target:t,type:n,listener:r,options:o}=e;t.removeEventListener(n,r,o),t.addEventListener(n,r,o)}this.#t=!1}}#r(e){for(let t=0;t<this.#e.length;t++)if(this.constructor.#o(e,this.#e[t]))return t;return-1}static#n(e){if("object"!=typeof e)throw new Error("spec must be an object");let t=!1;const{target:n,type:r,listener:o,options:a}=e;if(!(n instanceof EventTarget))throw new Error("target must be an instance of EventTarget");if("string"!=typeof r)throw new Error("type in spec must be a string");if("function"!=typeof o)throw new Error("listener in spec must be a function");if("boolean"==typeof a)t=a;else if("object"==typeof a)t=!!a.capture;else if(void 0!==a)throw new Error("options in spec must be a undefined, boolean, or an object");return t}static#o(e,t){return this.#n(e)===this.#n(t)&&e.target===t.target&&e.type===t.type&&e.listener===t.listener}}},345:(e,t,n)=>{n.d(t,{H:()=>a});var r=n(4889);class o{static fsaapi_available=globalThis.FileSystemHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemDirectoryHandle&&"function"==typeof globalThis.showOpenFilePicker&&"function"==typeof globalThis.showSaveFilePicker&&"function"==typeof globalThis.showDirectoryPicker;static ensure_fsaapi_available(){if(!this.fsaapi_available)throw new Error("unexpected: File System API is not available")}get fsaapi_available(){return this.constructor.fsaapi_available}async verify_permission(e,t=!1){this.constructor.ensure_fsaapi_available();const n={};return t&&(n.writable=!0,n.mode="readwrite"),"granted"===await e.queryPermission(n)||"granted"===await e.requestPermission(n)}async save(e,t){if(!this.fsaapi_available)return this.legacy_save(e,t);let n=(t=t??{}).file_handle;if(!n){const e=await this.prompt_for_save(t.prompt_options);if(e.canceled)return{canceled:!0};n=e.file_handle}await this.verify_permission(n,!0);const r=e(),o=await n.createWritable();return await o.write(r),await o.close(),{file_handle:n,stats:await this.get_fs_stats_for_file_handle(n)}}async open(e){if(!this.fsaapi_available)return this.legacy_open(e);let t=(e=e??{}).file_handle;if(!t){const n=await this.prompt_for_open(e.prompt_options);if(n.canceled)return{canceled:!0};t=n.file_handle}await this.verify_permission(t,!1);const n=await t.getFile();return{file_handle:t,text:await n.text(),stats:this.get_fs_stats_for_file(n)}}async get_fs_stats_for_file_handle(e){this.constructor.ensure_fsaapi_available(),await this.verify_permission(e);const t=await e.getFile();return this.get_fs_stats_for_file(t)}get_fs_stats_for_file(e){const{lastModified:t,lastModified:n,name:r,size:o,type:a}=e;return{lastModified:t,last_modified:n,name:r,size:o,type:a}}async prompt_for_save(e=void 0){this.constructor.ensure_fsaapi_available();const t=await this._prompt(globalThis.showSaveFilePicker,e);return t?{file_handle:t}:{canceled:!0}}async prompt_for_open(e=void 0){this.constructor.ensure_fsaapi_available(),e=e??{};const t=await this._prompt(globalThis.showOpenFilePicker,{...e,multiple:!1});return t?{file_handle:t[0]}:{canceled:!0}}async _prompt(e,t){t=t??{};try{return await e(t)}catch(e){return}}async legacy_save(e,t){return new Promise(((n,r)=>{const o=e(),a=document.createElement("a");a.download=t?.name??"Untitled.logbook",a.href=URL.createObjectURL(new Blob([o],{type:"text/plain"})),document.body.onfocus=e=>{document.body.onfocus=null,URL.revokeObjectURL(a.href),a.href=null,n({})},a.click()}))}async legacy_open(e){const t=this._convert_options_for_legacy(e);let n=document.getElementById(this.constructor.legacy_file_input_element_id);n||(n=document.createElement("input"),n.id=this.constructor.legacy_file_input_element_id,n.classList.add("hidden-fs-interface-element"),n.type="file",t&&(n.accept=t),document.body.insertBefore(n,document.body.firstChild));const o=new r.i;return n.onchange=async e=>{if(n.files.length<=0)o.resolve({canceled:!0});else{const e=n.files[0],t=await e.text(),r=this.get_fs_stats_for_file(e);o.resolve({text:t,stats:r})}},n.click(),o.promise}static legacy_file_input_element_id="legacy_file_input_element_id";_convert_options_for_legacy(e){e=e??{};const t=e?.prompt_options?.types?.[0]?.accept;return t?Object.keys(t):void 0}}const a=new o},2007:(e,t,n)=>{function r(e,t){for(const n of t)e=(e??{})[n];return e}function o(e,t,n){if(t.length<1)throw new Error("path must contain at least one segment");for(const n of t.slice(0,-1))void 0===e[n]&&(e[n]={}),e=e[n];e[t.slice(-1)[0]]=n}n.d(t,{$:()=>o,Z:()=>r})},4889:(e,t,n)=>{n.d(t,{i:()=>r});class r{constructor(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));Object.defineProperties(this,{promise:{value:n},resolve:{value:e},reject:{value:t},then:{value:n.then.bind(n)},catch:{value:n.catch.bind(n)},finally:{value:n.finally.bind(n)}})}async await(){return await this.promise}}},6660:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Z:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/rxjs.umd.min.js"));const e={...globalThis.rxjs};globalThis.rxjs=void 0,r()}catch(e){r(e)}}),1)},6227:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{g:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/sprintf.min.js"));const e=globalThis.sprintf;r()}catch(e){r(e)}}),1)},4429:(e,t,n)=>{n.d(t,{T:()=>o,X:()=>r});class r{constructor(e,t=null,n=!1){if(null==e)throw new Error("target must not be null or undefined");if(t??=e=>e.stop(),"function"!=typeof t)throw new Error("stopper must be a function taking target as a parameter");Object.defineProperties(this,{target:{value:e,enumerable:!0},stopper:{value:t,enumerable:!0},multiple_stops:{value:n,enumerable:!0}}),this.#a=0}#a;get stop_count(){return this.#a}get stopped(){return this.#a>0}stop(){return!(!this.multiple_stops&&this.stopped||(this.stopper(this.target),this.#a++,0))}}class o{constructor(){this.#i=[],this.#s=!1}#i;#s;get stopped(){return this.#s}add_stoppable(e){if(!(e instanceof r))throw new Error("stoppable must be an instance of Stoppable");this.#i.push(e)}remove_stoppable(e){this.#i.indexOf(e)}stop(){for(this.#s=!0;this.#i.length>0;)this.#i.pop().stop()}}},6092:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{l:()=>i});var o=n(6660),a=e([o]);o=(a.then?(await a)():a)[0];class i extends o.Z.Subject{dispatch(e){this.next(e)}}r()}catch(e){r(e)}}))},2176:(e,t,n)=>{function r(e){for(const[t,n]of Object.entries(e))("object"==typeof n||Array.isArray(n))&&r(e[t]);return Object.freeze(e)}n.d(t,{j:()=>r})},1896:(e,t,n)=>{n.d(t,{pk:()=>c,kE:()=>d,k$:()=>l});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const a=new Uint8Array(16);function i(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(a)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));const l=function(e,t,n){if(r.randomUUID&&!t&&!e)return r.randomUUID();const o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(o)};function c(){return`id-${l()}`}function d(){return l()}},1951:(e,t,n)=>{n.d(t,{V:()=>o});const r="data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=";async function o(){return new Audio(r).play()}},3688:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{a:()=>s});var o=n(984),a=n(6092),i=e([a]);a=(i.then?(await i)():i)[0];class s{constructor(e,t=null){if(!(e instanceof Node))throw new Error("target must be an instance of Node");if(t??={},"object"!=typeof t)throw new Error("options must be null, undefined, or an object");const{neutral_changes_observer:n}=t;if("function"!=typeof n)throw new Error("neutral_changes_observer must be a function");this.#l=e,this.#c=[],this.#d=-1,this.#u=void 0,this.#h=!1,this.#m=new MutationObserver(this.#_.bind(this)),Object.defineProperties(this,{neutral_changes:{value:new a.l,enumerable:!0}}),n&&(this.#g=this.neutral_changes.subscribe(n)),this.#m.observe(this.#l,{childList:!0,subtree:!0,attributeFilter:void 0,attributeOldValue:!0,characterDataOldValue:!0})}get is_connected(){this.#m}disconnect(){this.#m&&(this.#m.disconnect(),this.#m=void 0,this.#h=!1,this.#u=void 0,this.#d=-1,this.#c=[])}get is_neutral(){return this.#u===this.#d}set_neutral(){this.#u=this.#d,this.#A()}reset_neutral(){this.#u=void 0,this.#A()}reset(e=!1){this.#c.splice(0),this.#d=-1,this.#u=void 0,this.#h=!1,e?this.set_neutral():this.#A()}get can_perform_undo(){return this.#d>=0}perform_undo(){if(!this.can_perform_undo)return!1;try{this.#h=!0;const e=this.#c[this.#d--];(0,o.xe)(e.focus_node,e.focus_offset);for(let t=e.mutations.length;--t>=0;)this.#p(e.mutations[t]);return this.#A(),!0}finally{queueMicrotask((()=>{this.#h=!1}))}}get can_perform_redo(){return this.#d<this.#c.length-1}perform_redo(){if(!this.can_perform_redo)return!1;try{this.#h=!0;const e=this.#c[++this.#d];for(let t=0;t<e.mutations.length;t++)this.#b(e.mutations[t]);return this.#A(),!0}finally{queueMicrotask((()=>{this.#h=!1}))}}static MutationData=class{constructor(e,t=null){t&&Object.assign(this,t),Object.defineProperties(this,{mutation:{value:e,enumerable:!0}})}};#l;#c;#d;#u;#h;#m;#g;#p(e){if(!(e instanceof this.constructor.MutationData))throw new Error("mutation_data must be an instance of ChangeManager.MutationData");const{mutation:t}=e;switch(t.type){default:throw new Error(`unknown MutationRecord type: ${t.type}`);case"attributes":"attributeNamespace"in t?t.had_attribute?(0,o.IX)(t.target,t.attributeNamespace,t.attributeName,t.oldValue):t.target.removeAttributeNS(t.attributeNamespace,t.attributeName):t.had_attribute?t.target.setAttribute(t.attributeName,t.oldValue):t.target.removeAttribute(t.attributeName);break;case"characterData":t.target.data=t.oldValue;break;case"childList":for(let e=t.addedNodes.length;--e>=0;)t.target.removeChild(t.addedNodes[e]);for(let e=t.removedNodes.length;--e>=0;)t.target.insertBefore(t.removedNodes[e],t.nextSibling)}}#b(e){if(!(e instanceof this.constructor.MutationData))throw new Error("mutation_data must be an instance of ChangeManager.MutationData");const{mutation:t}=e;switch(t.type){default:throw new Error(`unknown MutationRecord type: ${t.type}`);case"attributes":"attributeNamespace"in t?(0,o.IX)(t.target,t.attributeNamespace,t.attributeName,e.newValue):t.target.setAttribute(t.attributeName,e.newValue);break;case"characterData":t.target.data=e.newValue;break;case"childList":for(let e=0;e<t.removedNodes.length;e++)t.target.removeChild(t.removedNodes[e]);for(let e=0;e<t.addedNodes.length;e++)t.target.insertBefore(t.addedNodes[e],t.nextSibling)}}#_(e,t){if(!this.#h){const t=e.map((e=>{const t={had_attribute:void 0,newValue:void 0};switch(e.type){case"attributes":{const n="attributeNamespace"in e?e.target.hasAttributeNS(e.attributeNamespace,e.attributeName):e.target.hasAttribute(e.attributeName),r="attributeNamespace"in e?e.target.getAttributeNS(e.attributeNamespace,e.attributeName):e.target.getAttribute(e.attributeName);t.had_attribute=n,t.newValue=r;break}case"characterData":{const n=e.target.data;t.newValue=n;break}}return new this.constructor.MutationData(e,t)})),n=window.getSelection(),r={timestamp:Date.now(),focus_node:n.focusNode,focus_offset:n.focusOffset,mutations:t};this.#c.splice(this.#d+1,this.#c.length-(this.#d+1)),this.#d=this.#c.length-1,"number"==typeof this.#u&&this.#u>this.#d&&(this.#u=void 0),this.#c.push(r),this.#d=this.#c.length-1}this.#A()}#f(){this.neutral_changes.dispatch({is_neutral:this.is_neutral,change_manager:this})}#v;#A(){const e=this.is_neutral;void 0!==typeof this.#v&&this.#v===e||this.#f(),this.#v=e}}r()}catch(e){r(e)}}))},2161:(e,t,n)=>{n.d(t,{aR:()=>w,Vq:()=>y,L_:()=>k,cK:()=>C});var r=n(984),o=n(1896),a=n(4889),i=(n(6973),n(3379)),s=n.n(i),l=n(7795),c=n.n(l),d=n(569),u=n.n(d),h=n(3565),m=n.n(h),_=n(9216),g=n.n(_),A=n(4589),p=n.n(A),b=n(7553),f={};f.styleTagTransform=p(),f.setAttributes=m(),f.insert=u().bind(null,"head"),f.domAPI=c(),f.insertStyleElement=g(),s()(b.Z,f),b.Z&&b.Z.locals&&b.Z.locals;const v=new WeakMap;class y{static run(e,t){return(new this).run(e,t)}static is_modal_active(){return[...document.querySelectorAll(`dialog.${this._modal_dialog_css_class}`)].some((e=>e.open))}static instance_from_element(e){return v.get(e.closest("dialog"))}static _modal_dialog_css_class="modal_dialog";constructor(){this._completed=!1,this._promise=new a.i,this._promise.promise.finally((()=>{try{this._destroy_dialog_element()}catch(e){console.warn("ignoring error when finalizing dialog promise",e)}}));try{this._dialog_element_id=`dialog-${(0,o.k$)()}`,this._create_dialog_element(),v.set(this._dialog_element,this)}catch(e){this._cancel(e)}}get promise(){return this._promise.promise}run(...e){return this._populate_dialog_element(...e),this._dialog_element.showModal(),this.promise}_populate_dialog_element(...e){throw new Error("unimplemented")}_complete(e){this._completed=!0,this._promise.resolve(e)}_cancel(e){this._promise.reject(e??new Error("canceled"))}_create_dialog_element(){if("string"!=typeof this._dialog_element_id)throw new Error("this._dialog_element_id must already be set to a string before calling this method");if(void 0!==this._dialog_element)throw new Error("this._dialog_element must be undefined when calling this method");const e=document.getElementById("content")??(0,r.T1)({parent:document.body,attrs:{id:"content"}});if("DIV"!==e.tagName||e.parentElement!==document.body)throw new Error("pre-existing #content element is not a <div> that is a direct child of document.body");const t=document.getElementById("ui")??(0,r.T1)({before:e.firstChild,attrs:{id:"ui"}});if("DIV"!==t.tagName||t.parentElement!==e)throw new Error("pre-existing #ui element is not a <div> that is a direct child of the #content element");if(document.getElementById(this._dialog_element_id))throw new Error(`unexpected: dialog with id ${this._dialog_element_id} already exists`);const n=(0,r.T1)({parent:t,tag:"dialog",attrs:{id:this._dialog_element_id,class:this.constructor._modal_dialog_css_class}});this._dialog_text_container=(0,r.T1)({parent:n,attrs:{class:"dialog_text"}}),this._dialog_form=(0,r.T1)({parent:n,tag:"form",attrs:{method:"dialog"}}),this._dialog_element=n}_destroy_dialog_element(){this._dialog_element&&(v.delete(this._dialog_element),this._dialog_element.remove()),this._dialog_element.oncancel=null,this._dialog_element.onclose=null,this._dialog_element=void 0}}class w extends y{_populate_dialog_element(e,t){const{accept_button_label:n="Ok"}=t??{};this._dialog_text_container.innerText=e,(0,r.T1)({parent:this._dialog_form,tag:"input",attrs:{type:"submit",value:n}}),this._dialog_element.onclose=e=>this._complete()}}function k(e,t,n){if("string"!=typeof t||""===t)throw new Error("id must be a non-empty string");const{tag:o="input",type:a="text",label:i,label_after:s,attrs:l={}}=n??{};if("id"in l||"type"in l)throw new Error('attrs must not contain "id" or "type"');const c={id:t,...l};"input"===o&&(c.type=a);const d=(0,r.T1)({tag:o,attrs:c});let u;return i&&(u=(0,r.T1)({tag:"label",attrs:{for:t}}),u.innerText=i),s?(e.appendChild(d),e.appendChild(u)):(e.appendChild(u),e.appendChild(d)),d}function C(e,t,n){if("tag"in(n=n??{})||"type"in n)throw new Error('opts must not contain "tag" or "type"');const o=[];if(n.options)for(const{value:e,label:t}of n.options){const n={value:e??t},a=(0,r.T1)({tag:"option",attrs:n});a.innerText=t,o.push(a)}const a=k(e,t,{...n,tag:"select"});for(const e of o)a.appendChild(e);return a}},984:(e,t,n)=>{n.d(t,{Aj:()=>p,Dz:()=>m,Hp:()=>_,IX:()=>A,Ru:()=>s,Sh:()=>E,T1:()=>b,Xc:()=>f,cj:()=>I,gX:()=>u,h0:()=>w,li:()=>l,pX:()=>d,r1:()=>x,rb:()=>v,rf:()=>c,v0:()=>h,xe:()=>C,yU:()=>B});var r=n(1896),o=n(1951),a=n(6973);const i="file:///home/ed/code/logbook/lib/ui/dom-util.js";function s(e){console.error("initialization failed",e.stack),document.body.innerText="",document.body.classList.add("error");const t=document.createElement("h1");t.textContent="Initialization Failed";const n=document.createElement("pre");n.textContent=e.stack,document.body.appendChild(t),document.body.appendChild(n)}async function l(e,t=void 0){return new Promise((n=>setTimeout(n,e??0,t)))}async function c(){return new Promise((e=>setTimeout(e)))}async function d(){return new Promise((e=>queueMicrotask(e)))}function u(e){if(e instanceof HTMLElement)e.innerText="";else{if(!(e instanceof Node))throw new Error("element must be an instance of Node");for(;e.firstChild;)e.removeChild(e.firstChild)}return e}function h(e){const t=e.getBoundingClientRect();return t.bottom>window.innerHeight&&window.scrollBy(0,t.bottom-window.innerHeight),e}function m(e,t){if(t){if("id"in t&&document.getElementById(g(t.id)))throw new Error(`element already exists with id ${t.id}`);for(const n in t){const r=t[n];null!=r?e.setAttribute(n,g(r)):e.removeAttribute(n)}}return e}function _(e,t){for(const n in t){const r=t[n];void 0!==r&&(null===r?e.style.removeProperty(n):e.style.setProperty(n,r))}return e}function g(e){return void 0===e?"":e.toString()}function A(e,t,n,r){t&&!n.includes(":")&&(n=`${new URL(t).pathname.split("/").findLast((e=>e.length>0))}:${n}`),e.setAttributeNS(t,n,r)}function p(e,t=null){const{parent:n=null,before:r=null}=e??{};let o=n;if(r&&!(r instanceof Node))throw new Error("before must be null, undefined, or an instance of Node");if(r&&!r.parentNode)throw new Error("before must have a parent");if(o){if(r&&r.parentElement!==o)throw new Error("inconsistent parent and before nodes specified")}else r&&(o=r.parentNode);if(t??=Element,o&&!(o instanceof t))throw new Error(`parent must be null, undefined, or an instance of ${t.name}`);return{parent:o,before:r}}function b(e){const{tag:t="div",namespace:n,attrs:o,style:a}=e??{},i=a?HTMLElement:Element,{parent:s,before:l}=p(e,i),c=n?document.createElementNS(n,t):document.createElement(t);let d=!1;if(o)for(const e in o){const t=o[e];null!=t&&c.setAttribute(e,t),"id"==e&&(d=!0)}return d||(c.id=(0,r.pk)()),a&&_(c,a),s&&s.insertBefore(c,l),c}function f(e,t,n=null){if(!(e instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");const{before:r=null,prevent_coalesce_next:o}=n??{};if(null!==r&&!(r instanceof Node))throw new Error("before must be null or an instance of Node");if(r&&r.parentNode!==e)throw new Error("before must be a child of element");if("string"!=typeof t&&(t=`${t??""}`),!t)return null;let a;if(!a){const n=r?r.previousSibling:e.lastChild;n?.nodeType===Node.TEXT_NODE&&(n.nodeValue+=t,a=n)}if(!a&&r&&!o){const e=r;e.nodeType===Node.TEXT_NODE&&(e.nodeValue=t+e.nodeValue,a=e)}return a||(a=document.createTextNode(t),e.insertBefore(a,r)),a}function v(e){return e.normalize(),e}const y={};async function w(e,t,n=null,r=!1){const o=new URL(t,(0,a.h)(i)),{promise_data:s,initial:l}=function(e){const t=e.toString();let n,r=y[t];return r?n=!1:(r={},r.promise=new Promise(((e,t)=>{r.resolve=e,r.reject=t})),y[t]=r,n=!0),{initial:n,promise_data:r}}(o);if(l){let c;function d(e){s.resolve?.(),h()}function u(e){s.reject?.(new Error(`error loading script ${o}`)),h()}function h(){c&&(c.removeEventListener("load",d),c.removeEventListener("error",u)),s.resolve=null,s.reject=null}try{c=function(e,t,n=null,r=!1){if(!(e instanceof Element))throw new Error("parent must be an Element");if("src"in(n=n??{}))throw new Error('attrs must not contain "src"');let o;return r||(o=e.querySelector(`script[src="${t.toString().replaceAll('"','\\"')}"]`),o?.parentElement!==e&&(o=null)),o??b({parent:e,tag:"script",attrs:{src:t,...n}})}(e,o,n,r),c.addEventListener("load",d,{once:!0}),c.addEventListener("error",u,{once:!0})}catch(m){s.reject?.(m),h()}}return s.promise}function k(e){const t=e?.parentNode?.childNodes;return t?Array.prototype.indexOf.call(t,e):void 0}function C(e,t){window.getSelection().setBaseAndExtent(e,t,e,t)}function E(e){const t=window.getSelection();t?.deleteFromDocument();let n={node:t?.focusNode??null,offset:t?.focusOffset??0};if(n=e(n),!n)throw new Error("updater must return { node, offset } for the new point");return t.setBaseAndExtent(n.node,n.offset,n.node,n.offset),!0}function I(e){const t=window.getSelection();if(t&&!t.isCollapsed)t.deleteFromDocument();else{let n={node:t?.focusNode??null,offset:t?.focusOffset??0};n=e(n),n?t.setBaseAndExtent(n.node,n.offset,n.node,n.offset):(0,o.V)()}return!0}function B(e,t){if("object"!=typeof e)throw new Error("point must be an object");let{node:n,offset:r}=e;if(!n)return null;if(null!=t)if("string"==typeof t)if(n instanceof Text)n.data=`${n.data.substring(0,r)}${t}${n.data.substring(r)}`,r+=t.length;else{const e=document.createTextNode(t);n.insertBefore(e,n.childNodes[r]),r++}else{if(!(t instanceof Node))throw new Error("thing must be a string or an instance of Node");if(n instanceof Text){const e=n.splitText(r);n.parentNode.insertBefore(t,e),n=e,r=0}else n.insertBefore(t,n.childNodes[r]),r++}return{node:n,offset:r}}function x(e,t=null){const{element_too:n,reverse:r}=t??{};let{node:o,offset:a}=e??{};if(!(o instanceof Node)||o.nodeType!==Node.TEXT_NODE&&o.nodeType!==Node.ELEMENT_NODE||"number"!=typeof a||a<0||a>(o.nodeType===Node.TEXT_NODE?o.length:o.childNodes.length))throw new Error("invalid point");for(;;){if(o.nodeType===Node.TEXT_NODE&&o.length>0)if(r){if(a>0)return a--,o.data=o.data.substring(0,a)+o.data.substring(a+1),{node:o,offset:a}}else if(a<o.length)return o.data=o.data.substring(0,a)+o.data.substring(a+1),{node:o,offset:a};if(o.nodeType!==Node.ELEMENT_NODE)break;if(o=o.childNodes[a],!o)return{node:o,offset:0};a=r?o.nodeType===Node.TEXT_NODE?o.length:o.childNodes.length:0}if(o.nodeType===Node.ELEMENT_NODE&&!o.hasChildNodes()){const e={node:o.parentNode,offset:k(o)};return o.parentNode.removeChild(o),e}const i=n?NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT:NodeFilter.SHOW_TEXT,s=document.createTreeWalker(document.body,i,{acceptNode:e=>e.nodeType===Node.TEXT_NODE&&e.length>0||e.nodeType===Node.ELEMENT_NODE&&(!e.hasChildNodes()||[...e.childNodes].every((e=>e.nodeType===Node.TEXT_NODE&&e.length<=0)))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});if(s.currentNode=o,o=r?s.previousNode():s.nextNode(),o){if(o.nodeType===Node.TEXT_NODE)return a=r?o.length-1:0,o.data=o.data.substring(0,a)+o.data.substring(a+1),{node:o,offset:a};{const e={node:o.parentNode,offset:k(o)};return o.parentNode.removeChild(o),e}}return null}},2050:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Qm:()=>i.Q,d4:()=>a.d,k7:()=>o.k});var o=n(6306),a=n(8395),i=n(9091),s=e([i]);i=(s.then?(await s)():s)[0],r()}catch(e){r(e)}}))},9091:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{Q:()=>d});var o=n(6306),a=n(8395),i=n(9886),s=n(1951),l=n(6092),c=e([l]);l=(c.then?(await c)():c)[0];class d{constructor(e,t){if(!(e instanceof EventTarget))throw new Error("event_target must be and instance of EventTarget");if("function"!=typeof t)throw new Error("command_observer must be a function");this.#y=new i.w;const n=new l.l;this.#w=n.subscribe(t),this.#k=[],this.#C=null,Object.defineProperties(this,{event_target:{value:e,enumerable:!0},command_observer:{value:t,enumerable:!0},commands:{value:n,enumerable:!0}})}#y;#w;#k;#C;#E;reset_key_map_stack(){this.#k.length>0&&(this.#k.splice(0),this.#I())}push_key_map(e){if(!(e instanceof a.d))throw new Error("key_map must be an instance of KeyMap");if(-1!==this.#k.indexOf(e))throw new Error("key_map already exists in stack");this.#k.unshift(e),this.#I()}pop_key_map(){const e=this.#k.shift();return e&&this.#I(),e}remove_key_map(e,t=!1){const n=this.#k.indexOf(e);return-1!==n&&(t?this.#k.splice(0,n+1):this.#k.splice(n,1),this.#I(),!0)}get is_attached(){return!!this.#C}attach(){if(this.is_attached)throw new Error("attach() called when already attached");if(this.#k.length<=0)return!1;this.#C=a.d.multi_mapper(...this.#k);const e=this.#C;let t,n;function r(){t=e,n=[]}r();const i=r,l=a=>{switch(a.key){case"Alt":case"AltGraph":case"CapsLock":case"Control":case"Fn":case"FnLock":case"Hyper":case"Meta":case"NumLock":case"ScrollLock":case"Shift":case"Super":case"Symbol":case"SymbolLock":case"OS":break;default:{const i=o.k.from_keyboard_event(a);n.push(i);const l=t.consume(i);if(l)if(a.preventDefault(),"string"==typeof l){const e={command:l,event:a,target:a.target,key_spec:i};this.commands.dispatch(e),r()}else t=l;else t!==e&&(a.preventDefault(),(0,s.V)()),r();break}}};this.#E=l,this.#y.remove_all();const c=[[this.event_target,"blur",i,{capture:!0}],[this.event_target,"keydown",l,{capture:!0}]];for(const[e,t,n,r]of c)this.#y.add(e,t,n,r);return this.#y.attach(),!0}detach(){this.#y.remove_all(),this.#C=null,this.#E=void 0}inject_key_event(e){this.#E?.(e)}#I(){const e=this.is_attached;this.detach(),e&&this.attach()}}r()}catch(e){r(e)}}))},8395:(e,t,n)=>{n.d(t,{d:()=>o});var r=n(6306);class o{constructor(e=null,t=null){Object.defineProperties(this,{bindings:{value:e,enumerable:!0},mapping:{value:this.constructor.#B(e),enumerable:!0},recognizer:{value:t,enumerable:!0}})}create_mapper(e=null){return new this.constructor.Mapper(this.mapping,this.recognizer,e)}static multi_mapper(...e){if(e.length<=0)throw new Error("at least one KeyMap instance must be given");if(!e.every((e=>e instanceof this)))throw new Error("arguments must all be KeyMap instances");return e.reduce(((e,t)=>t.create_mapper(e)),null)}static#B(e){if(null!=e&&"object"!=typeof e)throw new Error("bindings must be null/undefined or an object");const t={};for(const n in e){if(n.length<=0)throw new Error("bindings keys (command names) must not be empty strings");for(const o of e[n]){let e=t;const a=o.split(r.k.canonical_key_string_separator);for(let t=0;t<a.length;t++){const o=a[t],i=t>=a.length-1,s=new r.k(o).canonical,l=e[s];if("string"==typeof l||"object"==typeof l&&i){const e=a.slice(0,t+1).join(r.k.canonical_key_string_separator);throw new Error(`duplicate bindings specified for key sequence: ${e}`)}i?e[s]=n:e=l??(e[s]={})}}}return t}static Mapper=class e{constructor(e,t,n=null){if(null!=e&&"object"!=typeof e)throw new Error("mapping must be null/undefined or an object");if(null!=t&&"function"!=typeof t)throw new Error("recognizer must be null/undefined or a function");if(null!=n&&!(n instanceof this.constructor))throw new Error("fallback_mapper must be null/undefined or a KeyMap instance");if(!e&&!n)throw new Error("at least one of mapping or fallback_mapper must be given");Object.defineProperties(this,{mapping:{value:e,enumerable:!0},recognizer:{value:t,enumerable:!0},fallback_mapper:{value:n,enumerable:!0}})}consume(t){const n=t instanceof r.k?t:new r.k(t),o=this.recognizer?.(n);if("string"==typeof o)return o;const a=n.canonical,i=this.mapping?.[a];if("string"==typeof i)return i;const s=this.fallback_mapper?.consume(n);return"string"==typeof s?s:i||s?i?new e(i,null,s):s:void 0}}}},6306:(e,t,n)=>{n.d(t,{k:()=>r});class r{constructor(e,t=null){if("string"!=typeof e||e.length<=0)throw new Error("key_string must be a non-empty string");Object.defineProperties(this,{key_string:{value:e,enumerable:!0},context:{value:t,enumerable:!0}}),this.#x()}static canonical_key_modifier_separator="+";static canonical_key_string_separator=" ";static#D={meta:{code:"m",event_prop:"metaKey",glyph:"⌘",display_order:3,alternates:["cmd","command"]},ctrl:{code:"c",event_prop:"ctrlKey",glyph:"⌃",display_order:1,alternates:["control"]},shift:{code:"s",event_prop:"shiftKey",glyph:"⇧",display_order:2,alternates:[]},alt:{code:"a",event_prop:"altKey",glyph:"⌥",display_order:4,alternates:[]}};static#T={arrowleft:"←",arrowup:"↑",arrowright:"→",arrowdown:"↓",enter:"Enter",backspace:"Backspace",delete:"Delete"};static from_keyboard_event(e){const t=[];for(const n in this.#D){const r=this.#D[n];e[r.event_prop]&&t.push(r)}return new this([...t.map((e=>this.#j[e.code])),event.key].join(this.canonical_key_modifier_separator),e)}get glyphs(){if(void 0===this.#S){const e=this.key,t=e.toLowerCase(),n=this.modifier_descs.map((e=>e.glyph));t in this.constructor.#T?n.push(this.constructor.#T[t]):e.match(/^[a-zA-Z]$/)||e.match(/^[fF][0-9]{1,2}$/)?n.push(e.toUpperCase()):n.push(e),this.#S=n.join("")}return this.#S}#S;#x(){const e=this.key_string.split(/[+-]/);if(e.length<1||e.some((e=>e.length<=0)))if(this.key_string.match(/^[+-]$/))e.splice(0),e.push(this.key_string);else{if(!this.key_string.match(/[+-][+-]$/))throw new Error(`invalid key_string ${this.key_string}`);e.splice(-1),e[e.length-1]=this.key_string[this.key_string.length-1]}let t=e.at(-1);e.splice(-1);for(let t=0;t<e.length;t++)e[t]=e[t].toLowerCase();let n=t.toLowerCase();["up","down","left","right"].includes(n)&&(t=`Arrow${t}`,n=`arrow${n}`);const r=[];for(const t of e){const e=this.constructor.#L(t);if(!e)throw new Error(`invalid modifier "${t}" in key_string ${this.key_string}`);if(e.code in r)throw new Error(`redundant modifier "${t}" in key_string ${this.key_string}`);r.push(e)}r.sort(((e,t)=>e.display_order-t.display_order));const o=Object.values(r).reduce(((e,t)=>e|this.constructor.#N[t.code]),0),a=r.map((e=>e.code)).join("");let i=!0;i=0==(o&~this.constructor.shift_flag)&&!(1!==t.length||t.match(/^[\p{C}]$/u));const s=`${a}${this.constructor.canonical_key_modifier_separator}${i?t:n}`;Object.freeze(e),Object.freeze(r),Object.defineProperties(this,{key:{value:t,enumerable:!0},modifiers:{value:e,enumerable:!0},modifier_descs:{value:r,enumerable:!0},modifier_flags:{value:o,enumerable:!0},canonical_modifiers:{value:a,enumerable:!0},canonical:{value:s,enumerable:!0},is_printable:{value:i,enumerable:!0}});for(const e in this.constructor.#D)Object.defineProperty(this,`has_${e}`,{value:this.modifiers.includes(e),enumerable:!0})}static#z;static#O;static#M;static#L(e){return e=e.toLowerCase(),["cmdorctrl","commandorctrl"].includes(e)&&(e=(this.#M?"meta":"ctrl").toLowerCase()),this.#z[e]}static#j;static#F;static#U;static#N;static _init_static(){this.#M=(globalThis.navigator?.userAgentData?.platform??globalThis.navigator?.platform??"").toLowerCase().startsWith("mac"),this.#j={};for(const e in this.#D){const t=this.#D[e];this.#j[t.code]=e}this.#F=Object.fromEntries(Object.entries(this.#D).map((([e,{code:t,glyph:n}])=>[t,n]))),this.#U=Object.fromEntries(Object.entries(this.#D).map((([e,{code:t,display_order:n}])=>[t,n]))),this.#z=this.#Z(),this.#O=Object.freeze(Object.fromEntries(Object.keys(this.#D).map((e=>this.#z[e])).map((e=>[e.code,e]))));let e=1;this.#N={};for(const t in this.#D){const n=this.#D[t];this.#N[t]=e,this.#N[n.code]=e,e<<=1}Object.freeze(this.#N);for(const e in this.#D)Object.defineProperty(this,`${e}_flag`,{value:this.#N[e],enumerable:!0})}static#Z(){{const e="+-"+this.canonical_key_modifier_separator+this.canonical_key_string_separator,t=Object.keys(this.#D);if(t.some((e=>e!==e.toLowerCase())))throw new Error("KeySpec.#basic_modifier_desc_map keys must be lowercase");const n=t.map((e=>this.#D[e].alternates)).reduce(((e,t)=>[...e,...t]));if(n.some((e=>e!==e.toLowerCase())))throw new Error("KeySpec.#basic_modifier_desc_map alternates must be lowercase");if(new Set([...t,...n]).size!==t.length+n.length)throw new Error("KeySpec.#basic_modifier_desc_map keys and alternates must all be distinct");const r=t.map((e=>this.#D[e].code));for(const t of r){if(1!==t.length)throw new Error("KeySpec.#basic_modifier_desc_map codes must be single characters");if(e.includes(t))throw new Error(`KeySpec.#basic_modifier_desc_map codes are not allowed to be any of following: ${e}`)}if(new Set(r).size!==r.length)throw new Error("KeySpec.#basic_modifier_desc_map code values must be distinct");const o=t.map((e=>this.#D[e].event_prop));if(new Set(o).size!==o.length)throw new Error("KeySpec.#basic_modifier_desc_map event_prop values must be distinct")}const e={};function t(e,t,n){const r={modifier:t,basic_modifier:e,...n,alternates:[...new Set([e,t,...n.alternates])]};return Object.freeze(r)}for(const n in this.#D){const r=this.#D[n];e[n]=t(n,n,r);for(const o of r.alternates)e[o]=t(n,o,r)}return Object.freeze(e)}}r._init_static()},3231:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{j:()=>c});var o=n(6092),a=n(1896),i=n(984),s=n(2050),l=(n(6973),n(2534),e([o,s]));[o,s]=l.then?(await l)():l;class c{static menu_element_tag_name="menu";static menuitem_element_tag_name="li";static find_previous_menuitem(e){let t=e.previousElementSibling;for(;t&&(!t.classList.contains("menuitem")||t.classList.contains("disabled"));)t=t.previousElementSibling;return t}static find_next_menuitem(e){let t=e.nextElementSibling;for(;t&&(!t.classList.contains("menuitem")||t.classList.contains("disabled"));)t=t.nextElementSibling;return t}static create(e,t,n){return new this(e,t,n)}constructor(e,t,n){if(!(e instanceof Element))throw new Error("parent must be an instance of Element");if(null!=n&&"function"!=typeof n)throw new Error("get_command_bindings must be null, undefined, or a function");n??=()=>[];const r=new o.l,a=new o.l;Object.defineProperties(this,{get_command_bindings:{value:n,enumerable:!0},commands:{value:r,enumerable:!0},selects:{value:a,enumerable:!0}}),this.#q={},this.#P=this.#G(e,t)}#q;#P;get element(){return this.#P}#$(e){const t=this.#q[e];if(!t)throw new Error(`no element found for menu id "${e}"`);if(!t.classList.contains("menuitem"))throw new Error(`element for menu id "${e}" is not a menuitem`);return t}async activate(e=null){if(!(this.#P instanceof Element&&this.#P.classList.contains("menubar")))throw new Error('this.#menubar_container must be an Element with class "menubar"');const{set_focus:t}=e??{};if(!this.#P.querySelector(".selected")){const e=this.#P.querySelector(".menuitem");e&&this.#R(e)}if(t)return new Promise((e=>setTimeout((()=>{this.#P.focus(),e()}))))}deactivate(){this.#W(this.#P)}set_menu_state(e,t){if(t??={},"object"!=typeof t)throw new Error("state_specs must be an object");const n=this.#$(e);for(const[e,r]of Object.entries(t??{}))switch(e){case"enabled":r?n.classList.remove("disabled"):n.classList.add("disabled");break;case"checked":r?n.classList.add("checked"):n.classList.remove("checked");break;default:throw new Error("unknown state name")}}#W(e){if(e){if(!(e instanceof Element)||!e.classList.contains("menubar")&&!e.classList.contains("menu"))throw new Error('menu_element must be an Element with class "menubar" or "menu"');e.classList.remove("active"),e.classList.remove("selected");for(const t of e.children)t.classList.remove("selected"),t.classList.contains("collection")&&this.#W(t.querySelector(".menu"));e.classList.contains("menubar")&&this.selects.dispatch({select:!1,target:e})}}#R(e){if(!e.classList.contains("selected")){const t=e.closest(".menubar, .menu");if(t.classList.contains("menubar")&&!this.#P.querySelector(".selected")&&this.selects.dispatch({select:!0,target:e}),e.classList.add("selected"),e.classList.contains("collection")){e.querySelector(".menu").classList.add("active");const t=e.querySelector(".menu"),n=e.getBoundingClientRect();e.parentElement.classList.contains("menubar")?(t.style.top=`${n.y+n.height}px`,t.style.left=`${n.x}px`):(t.style.top=n.y-n.height+"px",t.style.left=`${n.x+n.width}px`)}for(const n of t.children)n!==e&&this.#Q(n)}}#Q(e){e.classList.contains("selected")&&(e.classList.remove("selected"),e.parentElement.classList.contains("menubar")&&!this.#P.querySelector(".selected")&&this.selects.dispatch({select:!1,target:e})),e.classList.contains("collection")&&this.#W(e.querySelector(".menu"))}#H(e){if(!(e instanceof Element))throw new Error("parent must be an instance of Element");(0,i.T1)({parent:e,tag:this.constructor.menuitem_element_tag_name,attrs:{class:"disabled menuitem menuitem-separator"}})}#K(e,t,n=!1){if(!(t instanceof Element))throw new Error("parent must be an instance of Element");if("string"==typeof e)return this.#H(t);const{label:r,collection:o,item:a,id:s}=e;if("string"!=typeof r)throw new Error("label must be specified as a string");if(a&&o)throw new Error("item and collection must not both be specified");if(o&&!Array.isArray(o))throw new Error("collection must be an array");if(a&&("object"!=typeof a||"string"!=typeof a.command))throw new Error('item must specify an object with a string property "command"');if(!["undefined","string"].includes(typeof s)||""===s)throw new Error("id must be a non-empty string");const l=this.#V(r,n);if(a)this.#X(l,a.command);else{l.classList.add("collection");const e=(0,i.T1)({parent:l,tag:this.constructor.menu_element_tag_name,attrs:{class:"menu"}});n||((0,i.T1)({parent:l,attrs:{class:"menuitem-annotation collection-arrow"}}).innerText="▸"),o.forEach((t=>this.#K(t,e))),n&&l.addEventListener("click",(e=>{e.target.closest(".menuitem")===l&&(l.classList.contains("selected")?this.#Q(l):this.#R(l),e.stopPropagation(),e.preventDefault())}))}return s&&(this.#q[s]=l),t&&t.appendChild(l),l}#V(e,t=!1){const n=(0,a.pk)(),r=(0,i.T1)({tag:this.constructor.menuitem_element_tag_name,attrs:{id:n,class:"menuitem"}});return(0,i.T1)({parent:r,attrs:{class:"menuitem-label"}}).innerText=e,r.addEventListener("mousemove",(e=>{t&&!this.#P.querySelector(".selected")||r.classList.contains("disabled")||this.#R(r)})),r}#X(e,t){if(t){const n=this.get_command_bindings()[t];if(n){const t=(0,i.T1)({parent:e,attrs:{class:"menuitem-annotation"}});n.forEach((e=>{const n=new s.k7(e).glyphs;(0,i.T1)({parent:t,tag:"kbd"}).innerText=n}))}}e.addEventListener("click",(n=>{this.#W(e.closest(".menubar"));const r={command:t,event:n,target:n.target};this.commands.dispatch(r),n.stopPropagation(),n.preventDefault()}))}#G(e,t){const n=(0,i.T1)({parent:e,tag:this.constructor.menu_element_tag_name,attrs:{class:"active menubar",role:"navigation",tabindex:0},before:e.firstChild});return t.forEach((e=>this.#K(e,n,!0))),n.addEventListener("blur",(e=>{this.#W(n)})),n.addEventListener("keydown",(e=>{const t=n.querySelectorAll(".selected");if(t.length<=0){if(!["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"," "].includes(e.key))return;{const e=n.querySelector(".menuitem");e&&this.#R(e)}}else{const r=t[t.length-1],o=r.parentElement===n;let a,i,s,l;switch(o?(a="ArrowLeft",i="ArrowRight",s="ArrowUp",l="ArrowDown"):(a="ArrowUp",i="ArrowDown",s="ArrowLeft",l="ArrowRight"),e.key){case"Enter":case" ":r.click();break;case"Escape":this.#W(n);break;case a:{const e=this.constructor.find_previous_menuitem(r);e?this.#R(e):o||r.classList.remove("selected");break}case i:{const e=this.constructor.find_next_menuitem(r);e&&this.#R(e);break}case s:if(!o){const e=n.querySelector(".menuitem.selected"),t=this.constructor.find_previous_menuitem(e);t&&this.#R(t)}break;case l:{let e=!1;if(r.classList.contains("collection")){const t=r.querySelector(".menuitem:not(.disabled)");t&&(this.#R(t),e=!0)}if(!e&&!o){const e=n.querySelector(".menuitem.selected"),t=this.constructor.find_next_menuitem(e);t&&this.#R(t)}break}default:return}}e.stopPropagation(),e.preventDefault()}),{capture:!0}),n}}r()}catch(e){r(e)}}))},6973:(e,t,n)=>{n.d(t,{h:()=>i});const r=document.querySelector("script");if(!r||!r.src)throw new Error("no script for assets server found in document");const o=new URL("..",r.src),a=new URL("..","file:///home/ed/code/logbook/src/assets-server-url.js");function i(e){if("string"==typeof e&&(e=new URL(e,a)),!(e instanceof URL))throw new Error("local_url must be a string or an instance of URL");if("file:"===e.protocol&&"file:"===a.protocol&&"file:"!==o.protocol&&e.href.startsWith(a.href)){const t=e.href.slice(a.href.length);return new URL(o.href+t)}return e}},3088:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{W:()=>h});var o=n(984),a=n(53),i=n(9886),s=n(2050),l=n(1117),c=n(3653),d=n(1951),u=(n(1456),e([a,s,l,c]));[a,s,l,c]=u.then?(await u)():u;class h extends HTMLElement{static custom_element_name="editor-cell";static attribute__active="data-active";static attribute__visible="data-visible";constructor(){super(),this.#y=new i.w,this.#Y=new s.Qm(this,this.#J.bind(this)),this.#ee(),this.#te=this.get_command_bindings();const e=new s.d4(this.constructor.get_initial_key_map_bindings(),this.constructor.key_map_insert_self_recognizer);this.push_key_map(e),this._tool_bar=null}#y;#Y;#te;get editable(){return!!this.hasAttribute("contenteditable")&&this.getAttribute("contenteditable")!==(!1).toString()}set_editable(e){e?this.setAttribute("contenteditable",(!0).toString()):this.removeAttribute("contenteditable")}reset_key_map_stack(){this.#Y.reset_key_map_stack()}push_key_map(e){this.#Y.push_key_map(e)}pop_key_map(){return this.#Y.pop_key_map()}remove_key_map(e,t=!1){return this.#Y.remove_key_map(e,t)}static key_map_insert_self_recognizer(e){return!!e.is_printable&&"insert-self"}establish_tool_bar(){this._tool_bar||(this._tool_bar=c.d.create_for(this,{editable:!1,visible:{initial:this.visible,on:e=>this.set_visible(!this.visible)},autoeval:!1,modified:!0}),this.parentElement.insertBefore(this._tool_bar,this))}remove_tool_bar(){this._tool_bar&&(this._tool_bar.remove(),this._tool_bar=void 0)}get_dom_extent(){if(document.body!==this&&document.body?.contains(this)){let e=this,t=this;return this._tool_bar&&(e.compareDocumentPosition(this._tool_bar)&Node.DOCUMENT_POSITION_PRECEDING&&(e=this._tool_bar),t.compareDocumentPosition(this._tool_bar)&Node.DOCUMENT_POSITION_FOLLOWING&&(t=this._tool_bar)),{first:e,last:t}}return null}static create_cell(e=null){const{parent:t=document.body,before:n=null,editable:r=a.E.singleton.editable,innerText:i}=e??{},s=(0,o.T1)({parent:t,before:n,tag:this.custom_element_name,attrs:{tabindex:0}});return s.set_editable(r),i&&(s.innerText=i),s.establish_tool_bar(),s}adjacent_cell(e=!1){const t=[...document.querySelectorAll(this.tagName)],n=t.indexOf(this);return-1===n?null:e?n>=t.length-1?null:t[n+1]:n<=0?null:t[n-1]}move_cell(e=null){const{parent:t,before:n}=(0,o.Aj)(e);if(t){const e=!!this._tool_bar;this.remove_tool_bar(),t.insertBefore(this,n),e&&this.establish_tool_bar()}else this.parentNode&&this.remove_cell()}remove_cell(){this.remove_tool_bar(),this.remove()}reset(){return this}inject_key_event(e){if(!this.contains(e.target)){const t=a.E.singleton.active_cell;t&&(e={...e,key:e.key,metaKey:e.metaKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,preventDefault:event.preventDefault.bind(event),stopPropagation:event.stopPropagation.bind(event),target:t,currentTarget:t})}this.#Y.inject_key_event(e)}static get_initial_key_map_bindings(){return{...(0,l.ZD)()}}get_command_bindings(){return{...(0,l.$R)(),"insert-self":this.command_handler__insert_self.bind(this),"insert-line-break":this.command_handler__insert_line_break.bind(this),"delete-text-forward":this.create_command_handler___delete({element_too:!1,reverse:!1}),"delete-text-reverse":this.create_command_handler___delete({element_too:!1,reverse:!0}),"delete-forward":this.create_command_handler___delete({element_too:!0,reverse:!1}),"delete-reverse":this.create_command_handler___delete({element_too:!0,reverse:!0}),cut:this.command_handler__cut.bind(this),copy:this.command_handler__copy.bind(this),paste:this.command_handler__paste.bind(this),"reset-cell":this.command_handler__reset_cell.bind(this),"toggle-cell-visible":this.command_handler__toggle_visible.bind(this)}}#J(e){try{this.perform_command(e)||(0,d.V)()}catch(t){console.error("error processing command",e,t),(0,d.V)()}}perform_command(e){if(e){const t=e.target;if(t&&this.contains(t)){const t=this.#te[e.command];return!!t&&t(e)}return!1}return!1}command_handler__insert_self(e){if(!this.editable)return!1;const t=e.key_spec,n=t?.key??t?.canonical??"";return!!n&&(0,o.Sh)((e=>(0,o.yU)(e,n)))}command_handler__insert_line_break(e){return!!this.editable&&(0,o.Sh)((e=>(0,o.yU)(e,"\n")))}create_command_handler___delete(e){return!!this.editable&&(t=>(0,o.cj)((t=>(0,o.r1)(t,e))))}command_handler__cut(e){return!!this.editable&&(document.execCommand("cut"),!0)}command_handler__copy(e){return document.execCommand("copy"),!0}async command_handler__paste(e){if(!this.editable)return!1;const t=await navigator.clipboard.readText();return!!t&&(0,o.Sh)((e=>(0,o.yU)(e,t)))}command_handler__reset_cell(e){return this.reset(),!0}command_handler__toggle_visible(e){return this.set_visible(!this.visible),!0}get active(){return!!this.hasAttribute(this.constructor.attribute__active)}set_active(e=!1){e?this.setAttribute(this.constructor.attribute__active,!0):this.removeAttribute(this.constructor.attribute__active)}get visible(){return!!this.hasAttribute(this.constructor.attribute__visible)}set_visible(e=!1){e=!!e,this._tool_bar.set_for("visible",e),e?this.setAttribute(this.constructor.attribute__visible,!0):this.removeAttribute(this.constructor.attribute__visible)}#ee(){const e=[[this,"focus",function(e){a.E.singleton.set_active_cell(this)},{capture:!0}]];for(const[t,n,r,o]of e)this.#y.add(t,n,r,o)}connectedCallback(){this.#y.attach(),this.#Y.attach()}disconnectedCallback(){this.#Y.detach(),this.#y.detach()}adoptedCallback(){this.#y.attach(),this.#Y.attach()}attributeChangedCallback(e,t,n){}static get observedAttributes(){return["xyzzy"]}static _init_static(){globalThis.customElements.define(this.custom_element_name,this)}}h._init_static(),r()}catch(e){r(e)}}))},6179:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{p:()=>u});var o=n(984),a=n(53),i=n(3088),s=n(9026),l=n(4429),c=n(3653),d=(n(6973),n(812),e([a,i,s,c]));[a,i,s,c]=d.then?(await d)():d;class u extends i.W{static custom_element_name="eval-cell";static#ne="data-input-type";static#re="data-output-element-id";get input_type(){return this.getAttribute(this.constructor.#ne)}set input_type(e){return this.setAttribute(this.constructor.#ne,e),this._tool_bar?.set_type(e),e}constructor(){super(),this.#oe=this.#ae.bind(this),this.#ie=this.#se.bind(this)}static get output_element_class(){return"eval-cell-output"}get output_element_id(){return this.getAttribute(this.constructor.#re)}set output_element_id(e){if(null==e||""===e)this.setAttribute(this.constructor.#re,"");else{const t=document.getElementById(e);if(!t)throw new Error("element with specified id does not exist");if(!(t instanceof HTMLElement))throw new Error("element specified by id must be an instance of HTMLElement");this.setAttribute(this.constructor.#re,e)}return e}get output_element(){const e=this.output_element_id;if(e){const t=document.getElementById(e);return t&&t instanceof HTMLElement?t:(console.warn("bad configuration of EvalCellElement: id does not specify an HTMLElement"),null)}return null}set output_element(e){if(e??=null,e&&(!e.id||!(e instanceof HTMLElement)))throw new Error("element must be null, undefined, or an instance of HTMLElement with an id");const t=this.output_element;return t!==e&&(t&&(t.removeEventListener("dblclick",this.#ie),t.removeEventListener("pointerdown",this.#oe)),e&&(e.addEventListener("pointerdown",this.#oe),e.addEventListener("dblclick",this.#ie))),this.output_element_id=e?e.id:null,e}establish_output_element(){let e=this.output_element;if(!e){const t=this.get_dom_extent(),n=t?t.last.nextSibling:this.nextSibling,r=n?.parentElement??this.parentElement;e=(0,o.T1)({tag:"output",parent:r,before:n}),this.output_element=e}return e.classList.add(this.constructor.output_element_class),e}remove_output_element(){const e=this.output_element;return e&&(this.output_element=null,e.remove()),this}#ae(e){this.contains(document.activeElement)||(this.focus(),e.preventDefault(),e.stopPropagation())}#oe;#se(e){this.set_visible(!this.visible),e.preventDefault(),e.stopPropagation()}#ie;move_cell(e=null){const{parent:t,before:n}=(0,o.Aj)(e),r=this.output_element,a=r&&!!(this.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING);if(super.move_cell(e),t&&r){const e=a?this:n;t.insertBefore(r,e)}}remove_cell(){this.remove_output_element(),super.remove_cell()}reset(){super.reset();const e=this.output_element;return e&&(this.output_element=null,e.remove()),this}async eval(e=null){const{evaluator_class:t,output_element:n,eval_context:r}=e??{},i=t??s.v.class_for_content(this);if(!(i===s.v||i.prototype instanceof s.v))throw new Error("evaluator_class must be an instance of Evaluator");let c;this.stop(),n?(c=n,this.output_element=c):c=this.establish_output_element(),(0,o.gX)(c);const d=new i(this,c,r);return this.#le=new l.X(d),this.#ce=!0,this._tool_bar?.set_for("running",!0),a.E.singleton.emit_eval_state(this,!0),d._perform_eval().then((()=>{this.#ce=void 0,this._tool_bar?.set_for("running",!1),a.E.singleton.emit_eval_state(this,!1)})).catch((e=>(this.stop(),d.output_context.invoke_renderer_for_type("error",e))))}#ce;#le;get evaluator_foreground(){return!!this.#ce}get can_stop(){return!!this.#le}stop(){if(this.#le)try{this.#le.stop()}catch(e){console.warn("error stopping evaluator",e,this.#le)}this.#le=void 0,this.#ce=void 0,this._tool_bar?.set_for("running",!1),a.E.singleton.emit_eval_state(this,!1)}establish_tool_bar(){if(!this._tool_bar){let e=this.input_type||void 0;this._tool_bar=c.d.create_for(this,{editable:!1,visible:{initial:this.visible,on:e=>this.set_visible(e.target.get_state())},autoeval:!1,type:{...e?{initial:e}:{},on:e=>{this.input_type=e.target.value}},running:!0,modified:!1,run:!1}),this.parentElement.insertBefore(this._tool_bar,this)}}get_dom_extent(){if(document.body!==this&&document.body?.contains(this)){let{first:e,last:t}=super.get_dom_extent();const n=this.output_element;return n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING&&(e=n),t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING&&(t=n)),{first:e,last:t}}return null}static get_initial_key_map_bindings(){return{...super.get_initial_key_map_bindings(),eval:["CmdOrCtrl-Enter"]}}get_command_bindings(){return{...super.get_command_bindings(),eval:this.command_handler__eval.bind(this),"set-mode-markdown":this.command_handler__set_mode_markdown.bind(this),"set-mode-tex":this.command_handler__set_mode_tex.bind(this),"set-mode-javascript":this.command_handler__set_mode_javascript.bind(this)}}async command_handler__eval(e){return await this.eval({eval_context:a.E.singleton.global_eval_context}),!0}command_handler__set_mode_markdown(e){return this.input_type="markdown",!0}command_handler__set_mode_tex(e){return this.input_type="tex",!0}command_handler__set_mode_javascript(e){return this.input_type="javascript",!0}static _init_static(){globalThis.customElements.define(this.custom_element_name,this,{})}}u._init_static(),r()}catch(e){r(e)}}))},9026:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{P:()=>c,v:()=>o.v});var o=n(9728),a=n(6257),i=n(4687),s=n(6781),l=e([o,a,i,s]);function c(){return[a.I,i.F,s.J]}[o,a,i,s]=l.then?(await l)():l,r()}catch(d){r(d)}}))},9728:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{v:()=>c});var o=n(1896),a=n(4429),i=n(266),s=n(9026),l=e([i,s]);[i,s]=l.then?(await l)():l;class c extends a.T{static async eval(e,t,n=null){const r=new this(e,t,n);return r._perform_eval().catch((e=>r.output_context.invoke_renderer_for_type("error",e)))}constructor(e,t,n){if(super(),!(e instanceof HTMLElement))throw new Error("input_element must be an instance of HTMLElement");if(!(t instanceof HTMLElement))throw new Error("output_element must be an instance of HTMLElement");if(n??={},"object"!=typeof n)throw new Error("eval_context must be undefined, null, or an object");const r=new i.l(t);Object.defineProperties(this,{id:{value:(0,o.kE)(),enumerable:!0},input_element:{value:e,enumerable:!0},output_element:{value:t,enumerable:!0},eval_context:{value:n,enumerable:!0},output_context:{value:r,enumerable:!0}})}async _perform_eval(){throw new Error("NOT UNIMPLEMENTED")}static handled_input_types=[];static class_for_content(e){if(!(e instanceof Element))throw new Error("input_element must be an instance of Element");const t=(0,s.P)(),n=t[0],r=e.input_type;if(r)for(const e of t)if(e.handled_input_types.includes(r))return e;return n}}r()}catch(e){r(e)}}))},6781:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{J:()=>s});var o=n(9728),a=n(4429),i=e([o]);o=(i.then?(await i)():i)[0];class s extends o.v{static handled_input_types=["javascript"];async _perform_eval(){const e={style:void 0,eval_context:this.eval_context},t=this.output_context.renderer_for_type("javascript");return this.add_stoppable(new a.X(t)),this.output_context.invoke_renderer(t,this.input_element.innerText,e)}}r()}catch(e){r(e)}}))},6257:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{I:()=>s});var o=n(9728),a=n(4429),i=e([o]);o=(i.then?(await i)():i)[0];class s extends o.v{static handled_input_types=["markdown"];async _perform_eval(){const e=this.output_context.renderer_for_type("markdown");return this.add_stoppable(new a.X(e)),this.output_context.invoke_renderer(e,this.input_element.innerText,{})}}r()}catch(e){r(e)}}))},4687:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F:()=>s});var o=n(9728),a=n(4429),i=e([o]);o=(i.then?(await i)():i)[0];class s extends o.v{static handled_input_types=["tex"];async _perform_eval(){const e=this.output_context.renderer_for_type("tex");return this.add_stoppable(new a.X(e)),this.output_context.invoke_renderer(e,this.input_element.innerText,{style:void 0,inline:!1,rtl:!1})}}r()}catch(e){r(e)}}))},1117:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$R:()=>c,ZD:()=>l,p7:()=>s});var o=n(53),a=n(9713),i=e([o,a]);function s(){return[{label:"File",collection:[{label:"Recent logbooks",id:"recents",collection:[]},"---",{label:"Reset cells",item:{command:"reset"}},{label:"Clear document",item:{command:"clear"}},"---",{label:"Editable",item:{command:"toggle-editable"},id:"toggle-editable"},"---",{label:"Save",item:{command:"save"},id:"save"},{label:"Save as...",item:{command:"save-as"}},"---",{label:"Settings...",item:{command:"settings"}}]},{label:"Edit",collection:[{label:"Undo",item:{command:"undo"},id:"undo"},{label:"Redo",item:{command:"redo"},id:"redo"}]},{label:"Cell",collection:[{label:"Eval",item:{command:"eval-and-refocus"},id:"eval-and-refocus"},{label:"Eval and stay",item:{command:"eval"},id:"eval"},{label:"Eval before",item:{command:"eval-before"},id:"eval-before"},{label:"Eval all",item:{command:"eval-all"},id:"eval-all"},"---",{label:"Stop cell",item:{command:"stop"},id:"stop"},{label:"Stop all",item:{command:"stop-all"},id:"stop-all"},"---",{label:"Reset cell",item:{command:"reset-cell"}},{label:"Visible",item:{command:"toggle-cell-visible"},id:"toggle-cell-visible"},"---",{label:"Focus up",item:{command:"focus-up"},id:"focus-up"},{label:"Focus down",item:{command:"focus-down"},id:"focus-down"},"---",{label:"Move up",item:{command:"move-up"},id:"move-up"},{label:"Move down",item:{command:"move-down"},id:"move-down"},{label:"Add before",item:{command:"add-before"}},{label:"Add after",item:{command:"add-after"}},{label:"Delete",item:{command:"delete"},id:"delete"}]},{label:"Help",collection:[{label:"Help...",item:{command:"help"}}]}]}function l(){return{"create-cell":["CmdOrCtrl-Shift-Alt-N"],reset:[],clear:[],save:["CmdOrCtrl-S"],"save-as":["CmdOrCtrl-Shift-S"],settings:["CmdOrCtrl-,"],"eval-and-refocus":["Shift-Enter"],"eval-before":["CmdOrCtrl-Shift-Enter"],"eval-all":["CmdOrCtrl-Shift-Alt-Enter"],stop:["CmdOrCtrl-Alt-!"],"stop-all":["CmdOrCtrl-Shift-Alt-!"],"focus-up":["Alt-Up"],"focus-down":["Alt-Down"],"move-up":["CmdOrCtrl-Alt-Up"],"move-down":["CmdOrCtrl-Alt-Down"],"add-before":["CmdOrCtrl-Alt-Shift-Up"],"add-after":["CmdOrCtrl-Alt-Shift-Down"],delete:["CmdOrCtrl-Alt-Backspace"],"set-mode-markdown":["Alt-M m"],"set-mode-tex":["Alt-M t"],"set-mode-javascript":["Alt-M j"],"toggle-cell-visible":["Alt-M v"],"toggle-editable":["Alt-M e"],undo:["CmdOrCtrl-Z"],redo:["CmdOrCtrl-Shift-Z"]}}function c(){return{"create-cell":d,reset:u,clear:h,save:m,"save-as":_,"toggle-editable":g,settings:A,"eval-and-refocus":p,"eval-before":b,"eval-all":f,stop:v,"stop-all":y,"focus-up":w,"focus-down":k,"move-up":C,"move-down":E,"add-before":I,"add-after":B,delete:x,undo:D,redo:T}}function d(e){return o.E.singleton.command_handler__create_cell(e)}function u(e){return o.E.singleton.reset(),!0}function h(e){return o.E.singleton.clear(),!0}async function m(e){return o.E.singleton.command_handler__save(e)}async function _(e){return o.E.singleton.command_handler__save_as(e)}function g(e){return o.E.singleton.set_editable(!o.E.singleton.editable),!0}function A(e){return a.D.run(),!0}async function p(e){return o.E.singleton.command_handler__eval_and_refocus(e)}async function b(e){return o.E.singleton.command_handler__eval_before(e)}async function f(e){return o.E.singleton.command_handler__eval_all(e)}function v(e){return o.E.singleton.command_handler__stop(e)}function y(e){return o.E.singleton.command_handler__stop_all(e)}function w(e){return o.E.singleton.command_handler__focus_up(e)}function k(e){return o.E.singleton.command_handler__focus_down(e)}function C(e){return o.E.singleton.command_handler__move_up(e)}function E(e){return o.E.singleton.command_handler__move_down(e)}function I(e){return o.E.singleton.command_handler__add_before(e)}function B(e){return o.E.singleton.command_handler__add_after(e)}function x(e){return o.E.singleton.command_handler__delete(e)}function D(e){return o.E.singleton.command_handler__undo(e)}function T(e){return o.E.singleton.command_handler__redo(e)}[o,a]=i.then?(await i)():i,r()}catch(j){r(j)}}))},7027:(e,t,n)=>{n.a(e,(async(e,t)=>{try{n(9475);var r=n(3653),o=n(3088),a=n(6179),i=n(53),s=e([r,o,a,i]);function l(){i.E.singleton,globalThis.logbook_manager=i.E.singleton}[r,o,a,i]=s.then?(await s)():s,"interactive"===document.readyState?l():window.addEventListener("load",(e=>{l()}),{once:!0}),t()}catch(c){t(c)}}))},53:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{E:()=>p});var o=n(3088),a=n(6179),i=n(3653),s=n(1117),l=n(6092),c=n(984),d=n(3231),u=n(3688),h=n(345),m=n(9713),_=n(1951),g=n(6973),A=(n(7654),n(7451),e([o,a,i,s,l,d,u,m]));[o,a,i,s,l,d,u,m]=A.then?(await A)():A;class p{static get singleton(){return this.#de||(this.#de=new this,this.#de.initialize()),this.#de}static#de;constructor(){this.#ue=!1,this.#he=null,this.#me=!1,this.reset_global_eval_context(),this.#_e=new l.l,this.#ge=this.#_e.subscribe(this.#Ae.bind(this))}#ue;#he;#me;#pe;#be;#_e;#ge;#fe;#ve;#ye;#we;#ke;#Ce;#Ee;get editable(){return this.#ue}set_editable(e){e=!!e,this.#ue=e,this.#fe.set_menu_state("toggle-editable",{checked:e}),this.#we.set_for("editable",e);for(const t of this.constructor.get_cells())t.set_editable(e)}get active_cell(){return this.#he}set_active_cell(e){this.#he=e??null;for(const e of this.constructor.get_cells())e.set_active(e===this.active_cell)}get controls_element(){return this.#pe}get content_element(){return this.#be}get global_eval_context(){return this.#ke}reset_global_eval_context(){this.#ke={}}reset(){for(const e of this.constructor.get_cells())e.reset();return this.reset_global_eval_context(),this.#Ee=void 0,this}clear(){(0,c.gX)(this.content_element),this.create_cell().focus()}stop(){for(const e of this.constructor.get_cells())e.stop()}initialize(){if(this.#me)throw new Error("initialize() called more than once");this.#me=!0;try{this.#Ie(),this.#Be(),this.#xe(),this.set_editable(this.editable);const e=this.constructor.get_cells();e.length;const t=e.find((e=>e.active))??e[0]??this.create_cell();this.set_active_cell(t),t.focus(),this.#Ce=new u.a(this.content_element,{neutral_changes_observer:this.#De.bind(this)}),window.addEventListener("beforeunload",(e=>{if(!this.#Ce.is_neutral)return e.preventDefault(),e.returnValue=""})),document.body.addEventListener("keydown",(e=>{e.target===document.body&&(this.active_cell?.inject_key_event(e),e.preventDefault(),e.stopPropagation())})),this.#Ce.set_neutral()}catch(e){(0,c.Ru)(e)}}create_cell(e=null){return a.p.create_cell({...e??{},parent:this.content_element})}static get_cells(){return[...document.getElementsByTagName(o.W.custom_element_name),...document.getElementsByTagName(a.p.custom_element_name)]}static controls_element_id="controls";static content_element_id="content";#Ie(){if(document.getElementById(this.constructor.controls_element_id))throw new Error(`bad format for document: element with id ${this.constructor.controls_element_id} already exists`);if(document.getElementById(this.constructor.content_element_id))throw new Error(`bad format for document: element with id ${this.constructor.content_element_id} already exists`);for(document.querySelector('link[rel="icon"]')||(0,c.T1)({parent:document.head,tag:"link",attrs:{rel:"icon",href:(0,g.h)("dist/favicon.ico")}}),document.body||document.documentElement.appendChild(document.createElement("body")),this.#be=document.createElement("div"),this.#be.id=this.constructor.content_element_id;document.body.firstChild;)this.#be.appendChild(document.body.firstChild);this.#pe=document.createElement("div"),this.#pe.id=this.constructor.controls_element_id,document.body.appendChild(this.#pe),document.body.appendChild(this.#be);for(const e of this.constructor.get_cells()){e.establish_tool_bar();const t=e.output_element;e.output_element=null,e.output_element=t}}#Te;#je;#Se(){const e=document.getElementById(this.constructor.content_element_id);if(!e||e!==this.content_element)throw new Error("bad format for document");return`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="utf-8">\n    <script type="module" src="../src/init.js"><\/script>\n</head>\n<body>\n${[...this.content_element?.querySelectorAll(`${a.p.custom_element_name}, .${a.p.output_element_class}`)].map((e=>e.outerHTML)).join("\n")}\n</body>\n</html>\n`}#Be(){}get_suggested_file_name(){return window.location.pathname.split("/").slice(-1)[0]}update_menu_state(){const e=this.constructor.get_cells(),t=this.active_cell,n=e.indexOf(t),r=this.#Ce.can_perform_undo,o=this.#Ce.can_perform_redo;this.#fe.set_menu_state("undo",{enabled:r}),this.#fe.set_menu_state("redo",{enabled:o}),this.#fe.set_menu_state("toggle-cell-visible",{checked:t?.visible}),this.#fe.set_menu_state("focus-up",{enabled:t&&n>0}),this.#fe.set_menu_state("focus-down",{enabled:t&&n<e.length-1}),this.#fe.set_menu_state("move-up",{enabled:t&&n>0}),this.#fe.set_menu_state("move-down",{enabled:t&&n<e.length-1}),this.#fe.set_menu_state("delete",{enabled:!!t}),this.#fe.set_menu_state("eval-and-refocus",{enabled:!!t}),this.#fe.set_menu_state("eval",{enabled:!!t}),this.#fe.set_menu_state("eval-before",{enabled:!!t}),this.#fe.set_menu_state("eval-all",{enabled:!!t}),this.#fe.set_menu_state("stop",{enabled:t?.can_stop}),this.#fe.set_menu_state("stop-all",{enabled:e.some((e=>e.can_stop))})}#xe(){if(!this.controls_element)throw new Error("bad format for document: controls element does not exist");this.#fe=d.j.create(this.controls_element,(0,s.p7)(),(()=>a.p.get_initial_key_map_bindings()),null),this.#ve=this.#fe.commands.subscribe(this.#Le.bind(this)),this.#ye=this.#fe.selects.subscribe(this.update_menu_state.bind(this)),this.#we=i.d.create_for(this.controls_element,{editable:{initial:this.editable,on:e=>this.set_editable(e.target.get_state())},modified:!0,running:!0}),this.#pe.appendChild(this.#we)}#Le(e){const t=this.active_cell;if(t)if(t instanceof o.W){const n={...e,target:t};t.perform_command(n)}else(0,_.V)();else(0,_.V)()}#De(e){const{is_neutral:t}=e;this.#we.set_for("modified",!t),this.#fe.set_menu_state("save",{enabled:!t})}emit_eval_state(e,t){this.#_e.dispatch({cell:e,eval_state:t})}#Ae(e){const{cell:t,eval_state:n}=e,r=this.constructor.get_cells().some((e=>e.evaluator_foreground));this.#we.set_for("running",r)}command_handler__create_cell(e){let t=null;const n=e.target?.adjacent_cell?.(!0);n&&(t=n.get_dom_extent().first);const r=this.create_cell({before:t});return!!r&&(r.focus(),!0)}async command_handler__eval_and_refocus(e){const t=e.target;return!!(t&&t instanceof a.p)&&(await t.eval({eval_context:this.global_eval_context}),(t.adjacent_cell(!0)??this.create_cell()).focus(),!0)}async command_handler__eval_before(e){const t=e.target;if(t&&t instanceof a.p){this.reset_global_eval_context();for(const e of this.constructor.get_cells()){if(e.focus(),e===t)break;await e.eval({eval_context:this.global_eval_context})}return!0}return!1}async command_handler__eval_all(e){const t=e.target;if(t&&t instanceof a.p){this.stop(),this.reset_global_eval_context();for(const e of this.constructor.get_cells())e.focus(),await e.eval({eval_context:this.global_eval_context});return!0}return!1}command_handler__stop(e){const t=e.target;return!!(t&&t instanceof a.p)&&(t.stop(),!0)}command_handler__stop_all(e){return this.stop(),!0}command_handler__focus_up(e){const t=e.target.adjacent_cell(!1);return!!t&&(t.focus(),!0)}command_handler__focus_down(e){const t=e.target.adjacent_cell(!0);return!!t&&(t.focus(),!0)}command_handler__move_up(e){const t=e.target;if(t){const e=t.adjacent_cell(!1);return!!e&&(t.move_cell({before:e.get_dom_extent().first}),t.focus(),!0)}return!1}command_handler__move_down(e){const t=e.target;if(t){const e=t.adjacent_cell(!0);return!!e&&(t.move_cell({before:e.get_dom_extent().last.nextSibling,parent:t.parentElement}),t.focus(),!0)}return!1}command_handler__add_before(e){const t=e.target;return this.create_cell({before:t.get_dom_extent().first}).focus(),!0}command_handler__add_after(e){const t=e.target;return this.create_cell({before:t.get_dom_extent().last.nextSibling,parent:t.parentElement}).focus(),!0}command_handler__delete(e){const t=e.target;let n=t.adjacent_cell(!0)??t.adjacent_cell(!1);return t.remove_cell(),n||(n=this.create_cell()),n.focus(),!0}async command_handler__save(e){const t=await h.H.save(this.#Se.bind(this),{file_handle:this.#Ee,prompt_options:{suggestedName:this.get_suggested_file_name()}}),{canceled:n,file_handle:r,stats:o}=t;return n||(this.#Ee=r??void 0,this.#Ce.set_neutral()),!0}async command_handler__save_as(e){return this.#Ee=void 0,await h.H.save(this.#Se.bind(this),{prompt_options:{suggestedName:this.get_suggested_file_name()}}),!0}command_handler__undo(e){return this.#Ce?.perform_undo()}command_handler__redo(e){return this.#Ce?.perform_redo()}}r()}catch(e){r(e)}}))},266:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{l:()=>s});var o=n(984),a=n(4571),i=e([a]);a=(i.then?(await i)():i)[0];class s{constructor(e){if(!(e instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");Object.defineProperties(this,{element:{value:e,enumerable:!0}})}static get_svg_string(e){let t=(new XMLSerializer).serializeToString(e);return t=t.replace(/(\w+)?:?xlink=/g,"xmlns:xlink="),t=t.replace(/NS\d+:href/g,"xlink:href"),t}static clear_element(e){return(0,o.gX)(e)}static scroll_element_into_view(e){return(0,o.v0)(e)}static set_element_attrs(e,t){return(0,o.Dz)(e,t)}static update_element_style(e,t){return(0,o.Hp)(e,t)}static create_element_child(e,t=null){return(0,o.T1)({parent:e,...t??{}})}static create_element_child_text_node(e,t,n=null){return(0,o.Xc)(e,t,n)}static normalize_element_text(e){return(0,o.rb)(e)}clear(){return this.constructor.clear_element(this.element),this}scroll_into_view(){return this.constructor.scroll_element_into_view(this.element),this}set_attrs(e){return this.constructor.set_element_attrs(this.element,e),this}update_style(e){return this.constructor.update_element_style(this.element,e),this}create_child(e=null){return this.constructor.create_element_child(this.element,e)}create_child_text_node(e,t=null){return this.constructor.create_element_child_text_node(this.element,e,t)}normalize_text(){return this.constuctor.normalize_element_text(this.element),this}renderer_for_type(e){const t=a.T.class_from_type(e);if(t)return new t;throw new Error(`unknown output type: ${e}`)}async invoke_renderer(e,t,n=null){return e.render(this,t,n).catch((t=>{throw e.stop(),t}))}async invoke_renderer_for_type(e,t,n=null){const r=this.renderer_for_type(e);return this.invoke_renderer(r,t,n)}}r()}catch(e){r(e)}}))},4571:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F:()=>g,T:()=>o.T});var o=n(3393),a=n(1672),i=n(9072),s=n(6187),l=n(9947),c=n(6919),d=n(3050),u=n(8125),h=n(8567),m=n(7012),_=e([o,a,i,s,l,c,d,u,h,m]);function g(){return[a.t,i.F,s.$,l._,c.f,d.I,u.D,h.L,m.G]}[o,a,i,s,l,c,d,u,h,m]=_.then?(await _)():_,r()}catch(A){r(A)}}))},8125:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{D:()=>s});var o=n(9037),a=n(3393),i=e([o,a]);[o,a]=i.then?(await i)():i;class s extends a.T{static type="chart";async render(e,t,n){const r=n?.style,a=e.create_child({attrs:{"data-type":this.type}}),i=e.constructor.create_element_child(a,{tag:"canvas",style:r}).getContext("2d");return o.k.defaults.global.animation.duration=0,new o.k(i,t),a}}r()}catch(e){r(e)}}))},9037:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{k:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/Chart.bundle.min.js"));const e=globalThis.Chart;r()}catch(e){r(e)}}),1)},5717:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{d3:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/d3.min.js"));const e=globalThis.d3;r()}catch(e){r(e)}}),1)},9072:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{F:()=>i});var o=n(3393),a=e([o]);o=(a.then?(await a)():a)[0];class i extends o.T{static type="error";static error_element_class="error";static error_element_text_color="red";async render(e,t,n){const r=n?.style,o=[];t.stack?o.push(t.stack):o.push(t.message||"error");const a=o.join("\n"),i=e.create_child({tag:"pre",attrs:{"data-type":this.type},style:{...r??{},color:this.constructor.error_element_text_color}});return i.innerText=a,i}}r()}catch(e){r(e)}}))},8567:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{L:()=>s});var o=n(3393),a=n(6105),i=e([o,a]);[o,a]=i.then?(await i)():i;class s extends o.T{static type="graphviz";async render(e,t,n){const r=n?.style,o=e.create_child({attrs:{"data-type":this.type},style:r}),i=`#${o.id}`,s=[];t.node_config&&s.push(`node ${node_config}`);for(const e of t.nodes??[])if("string"==typeof e){const t=e;s.push(t)}else{const[t,n]=e;s.push(`${t} [${n}]`)}for(const[e,n,r]of t.edges??[])s.push(`${e}->${n}${r?`[${r}]`:""}`);const l=`digraph { ${s.join(";")} }`;return await(0,a.s)(i,l,{}),o}}r()}catch(e){r(e)}}))},6105:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{s:()=>l});var o=n(5717),a=n(984),i=n(6973),s=e([o]);async function l(e,t,n){const{transition:r="main",ease:a=o.d3.easeLinear,delay:i=500,duration:s=1500,logEvents:l=!0}=n??{};try{return new Promise(((n,c)=>{function d(...e){c(new Error(e[0]))}const u=o.d3.select(e).graphviz({useWorker:!1,useSharedWorker:!1});u.transition((function(){return o.d3.transition(r).ease(a).delay(i).duration(s)})).logEvents(l).onerror(d).on("initEnd",(function(){u.renderDot(t).onerror(d).on("end",n)}))}))}catch(e){reject(e)}}o=(s.then?(await s)():s)[0],await(0,a.h0)(document.head,(0,i.h)("dist/graphviz.umd.js")),await(0,a.h0)(document.head,(0,i.h)("dist/d3-graphviz.min.js")),r()}catch(c){r(c)}}),1)},3050:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{I:()=>i});var o=n(3393),a=e([o]);o=(a.then?(await a)():a)[0];class i extends o.T{static type="image-data";async render(e,t,n){const r=n?.style,o=e.create_child({attrs:{"data-type":this.type}}),a=e.constructor.create_element_child(o,{tag:"canvas",style:r}).getContext("2d"),i=Array.isArray(t)?t:[t];for(const{x:e=0,y:t=0,image_data:n}of i)a.putImageData(n,e,t);return o}}r()}catch(e){r(e)}}))},6919:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{f:()=>f});var o=n(6973),a=n(53),i=n(3393),s=n(7783),l=n(266),c=n(4429),d=n(6227),u=n(2724),h=n(7098),m=n(984),_=e([a,i,s,l,d,u,h]);[a,i,s,l,d,u,h]=_.then?(await _)():_;const g="file:///home/ed/code/logbook/src/renderer/javascript-renderer/_.js",A=new URL("../../../lib/",(0,o.h)(g)),p=new Function("path","return import(path);"),b=Object.getPrototypeOf((async function*(){})).constructor;class f extends i.T{static type="javascript";async render(e,t,n=null){const{style:r,eval_context:o=a.E.singleton.global_eval_context,inline:i}=n??{};if(r||!i){const t=e.create_child({tag:i?"span":"div",attrs:{"data-type":this.type},style:r});e=new l.l(t)}const s=this.#Ne(o,e),c=Object.entries(s),d=c.map((([e,t])=>e)),u=c.map((([e,t])=>t)),h=o,m=new b(...d,t).apply(h,u);for(;;){const{value:e,done:t}=await m.next();if(void 0!==e&&(t&&await s.render_text("\n>>> "),await s.render_value(e)),t)break}}#Ne(e,t){const n=this;async function r(e,r,o=null){const a=t.renderer_for_type(e);return n.add_stoppable(new c.X(a)),t.invoke_renderer(a,r,o).catch((e=>t.invoke_renderer_for_type("error",e)))}async function o(e,t=null){return e??="","string"!=typeof e&&(e=e?.toString()??""),r("text",e,t)}const a=r.bind(null,"error");function i(e){if("function"!=typeof e)throw new Error("f must be a function");return e instanceof(async()=>{}).constructor?async(...t)=>(l(e.name??"FUNCTION"),e.apply(this,t)):(...t)=>(l(e.name??"FUNCTION"),e.apply(this,t))}function l(e){if(n.stopped)throw new Error(`${e} called after ${n.constructor.name} stopped`)}return{settings:(0,u.oj)(),theme_settings:(0,h.VI)(),sprintf:i(d.g),is_stopped:function(){return n.stopped},create_worker:i((async function(e){const t=new s.V(e);return n.add_stoppable(new c.X(t,(e=>e.terminate()))),t})),import_lib:i((async function(e){return p(new URL(e,A))})),vars:i((function(...t){Object.assign(e,...t)})),delay_ms:i((async function(e){return(0,m.li)(e)})),next_tick:i((async function(){return(0,m.rf)()})),next_micro_tick:i((async function(){return(0,m.pX)()})),sleep:i((async function(e){return(0,m.li)(1e3*e)})),render:i(r),render_text:i(o),render_error:i(a),render_value:i((async function(e){let t;return t=void 0===e?"[undefined]":"function"==typeof e?.toString?e.toString():"[unprintable value]",o(t)})),println:i((async function(e){return o((e??"")+"\n")})),print__:i((async function(){t.create_child({tag:"hr",attrs:{id:void 0}})})),printf:i((async function(e,...n){if(null!=e)return"string"!=typeof e&&(e=e.toString()),o((0,d.g)(e,...n)).catch((e=>t.invoke_renderer_for_type("error",e)))})),markdown:i(r.bind(null,"markdown")),tex:i(r.bind(null,"tex")),image_data:i(r.bind(null,"image-data")),chart:i(r.bind(null,"chart")),graphviz:i(r.bind(null,"graphviz")),plotly:i(r.bind(null,"plotly")),javascript:i((async function(e,t){return r("javascript",e,t)}))}}}r()}catch(e){r(e)}}))},7783:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{V:()=>e});var o=n(1896),a=n(4889),i=n(6973);class e{constructor(e=null){const{keepalive:t=!1}=e??{};this.keepalive=!!t,Object.defineProperties(this,{id:{value:(0,o.pk)(),enumerable:!0}}),this._worker=new Worker(this.constructor.#ze),this._terminated=!1,this._current_expression=void 0}get terminated(){return this._terminated}terminate(){this._terminated||(this._reset_event_handlers(),this._current_expression?.terminate(),this._current_expression=void 0,this._worker.terminate(),this._worker=void 0,this._terminated=!0)}async eval(e,t){if(this.terminated)throw new Error(`eval worker ${this.id}: worker has been terminated`);if(this._current_expression)throw new Error(`eval worker ${this.id}: an expression evaluation is already in process`);const n=new a.i;let r=!1;const i=()=>{this._current_expression=void 0,this._reset_event_handlers(),r||n.reject(new Error(`eval worker ${this.id} / expression ${s}: evaluation terminated`)),this.keepalive||this.terminate()},s=(0,o.pk)(),l={request:"eval",id:s,worker_id:this.id,expression:e,eval_context:t};return this._current_expression={...l,terminate(){i()}},this._worker.onmessage=e=>{const t=e.data;"value"in t?n.resolve(t.value):n.reject(t.error),r=!0,i()},this._worker.onerror=e=>{n.reject(new Error(`eval worker ${this.id} / expression ${s}: error in worker`)),r=!0,i()},this._worker.onmessageerror=e=>{n.reject(new Error(`eval worker ${this.id} / expression ${s}: serialization error in worker`)),r=!0,i()},this._worker.postMessage(l),n.promise}stream_eval(e,t){if(this.terminated)throw new Error(`eval worker ${this.id}: worker has been terminated`);if(this._current_expression)throw new Error(`eval worker ${this.id}: an expression evaluation is already in process`);const n=[],r=[];let i=!1;const s=()=>{for(i=!0,this._current_expression=void 0,this._reset_event_handlers();r.length>0;)r.shift().resolve({done:!0});this.keepalive||this.terminate()},l=e=>{i?console.warn(`eval worker ${this.id} / expression ${c}: result received after done`,e):(r.length>0?"value"in e?r.shift().resolve({value:e.value}):r.shift().reject(e.error):n.push(e),e.error&&s())},c=(0,o.pk)(),d={request:"stream_eval",id:c,worker_id:this.id,expression:e,eval_context:t};return this._current_expression={...d,terminate(){s()}},this._worker.onmessage=e=>{const t=e.data;t.done?s():l(t)},this._worker.onerror=e=>{l({error:new Error(`eval worker ${this.id} / expression ${c}: error in worker`)}),s()},this._worker.onmessageerror=e=>{l({error:new Error(`eval worker ${this.id} / expression ${c}: serialization error in worker`)}),s()},this._worker.postMessage(d),{[Symbol.asyncIterator]:()=>({next(){if(n.length>0){const e=n.shift();return"value"in e?Promise.resolve({value:e.value}):Promise.reject(e.error)}if(i){for(;r.length>0;)r.shift().reject(new Error(`eval worker ${this.id} / expression ${c}: no further results available`));return Promise.resolve({done:!0})}{const e=new a.i;return r.push(e),e.promise}},return:()=>({done:!0})})}}_reset_event_handlers(){this.terminated||(this._worker.onmessage=void 0,this._worker.onerror=void 0,this._worker.onmessageerror=void 0)}static async _async_init_static(){const e=(0,i.h)("dist/web-worker.js");return fetch(e).then((e=>e.text())).catch((e=>{throw new Error("unable to fetch worker code")})).then((t=>{const n=`{\n    const original_importScripts = globalThis.importScripts;\n    globalThis.importScripts = (...urls) => {\n        return original_importScripts( ...urls.map(url => new URL(url, "${e.href}")) );\n    };\n}\n`;this.#ze=`data:text/javascript,${encodeURIComponent(n+t)}`}))}static#ze}await e._async_init_static(),r()}catch(e){r(e)}}),1)},6187:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$:()=>c});var o=n(3393),a=n(6243),i=n(7343),s=n(266),l=e([o,a,i,s]);[o,a,i,s]=l.then?(await l)():l;class c extends o.T{static type="markdown";async render(e,t,n=null){t??="";const{style:r}=n??{},o=e.create_child({attrs:{"data-type":this.type},style:r}),i=await a.T.parse(t);return o.innerHTML=i,o}}const d="inline-tex",u="block-tex",h="eval-code";a.T.use({extensions:[{name:d,level:"inline",start:e=>e.indexOf("$"),tokenizer(e,t){const n=e.match(/^\$+([^$]+?)\$+/);if(n)return{type:d,raw:n[0],text:n[1].trim()}},renderer:e=>i.w.toMathMLString(e.text,!1,!1,!1)},{name:u,level:"block",start:e=>e.indexOf("$$"),tokenizer(e,t){const n=e.match(/^\$\$([^$]+?)\$\$/);if(n)return{type:u,raw:n[0],text:n[1].trim()}},renderer:e=>`<p>${i.w.toMathMLString(e.text,!0,!1,!1)}</p>`},{name:h,level:"block",start:e=>e.match(/^[`]{3}[ ]*[!]/)?.index,tokenizer(e,t){const n=e.match(/^[`]{3}[ ]*[!](.*?)[`]{3}/s);if(n)return{type:h,raw:n[0],text:n[1],html:""}},renderer:e=>e.html}],async:!0,async walkTokens(e){if(e.type===h){const t=document.createElement("div"),n=new s.l(t),r={},o=n.renderer_for_type("javascript");await n.invoke_renderer(o,e.text,r).catch((e=>n.invoke_renderer_for_type("error",e))),o?.stop(),e.html=t.innerHTML}}}),r()}catch(e){r(e)}}))},6243:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{T:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/marked.min.js"));const e=globalThis.marked;r()}catch(e){r(e)}}),1)},7012:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{G:()=>s});var o=n(3393),a=n(1946),i=e([o,a]);[o,a]=i.then?(await i)():i;class s extends o.T{static type="plotly";async render(e,t,n){const r=n?.style,o=e.create_child({attrs:{"data-type":this.type}}),i=e.constructor.create_element_child(o,{style:r});return await a.N.newPlot(i,t),o}}r()}catch(e){r(e)}}))},1946:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{N:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/plotly.js"));const e=globalThis.Plotly;r()}catch(e){r(e)}}),1)},3393:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{T:()=>s});var o=n(4429),a=n(4571),i=e([a]);a=(i.then?(await i)():i)[0];class s extends o.T{static type=void 0;get type(){return this.constructor.type}async render(e,t,n){throw new Error("NOT UNIMPLEMENTED")}static class_from_type(e){return this.#Oe()[e]}static#Oe(){return this.#Me||(this.#Me=Object.fromEntries((0,a.F)().map((e=>[e.type,e])))),this.#Me}static#Me;static#Fe=["./text-renderer.js","./error-renderer.js","./markdown-renderer.js","./tex-renderer.js","./javascript-renderer/_.js","./image-data-renderer.js","./chart-renderer.js","./graphviz-renderer.js","./plotly-renderer.js"]}r()}catch(e){r(e)}}))},9947:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{_:()=>s});var o=n(3393),a=n(7343),i=e([o,a]);[o,a]=i.then?(await i)():i;class s extends o.T{static type="tex";async render(e,t,n=null){t??="";const{style:r,inline:o,rtl:i}=n??{},s=e.create_child({attrs:{"data-type":this.type},style:r}),l=a.w.toMathMLString(t,!o,i,!1);return s.innerHTML=l,s}}r()}catch(e){r(e)}}))},1672:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{t:()=>i});var o=n(3393),a=e([o]);o=(a.then?(await a)():a)[0];class i extends o.T{static type="text";async render(e,t,n){if(n?.style){const r=e.create_child({tag:"span",attrs:{"data-type":this.type},style:n.style});return r.innerText=t,r}return e.create_child_text_node(t)}}r()}catch(e){r(e)}}))},7343:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{w:()=>e});var o=n(984),a=n(6973);await(0,o.h0)(document.head,(0,a.h)("dist/TeXZilla.js"));const e=globalThis.TeXZilla;r()}catch(e){r(e)}}),1)},9713:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{D:()=>u});var o=n(984),a=n(2161),i=n(2007),s=n(2724),l=n(1951),c=(n(6973),n(9642),e([s]));const d=[{section:{name:"Editor",settings:[{id:"editor_options_indentUnit",label:"Indent",type:"text",settings_path:["editor_options","indentUnit"],analyze:e=>(0,s.Xg)(e,"Indent"),convert_to_number:!0},{id:"editor_options_tabSize",label:"Tab size",type:"text",settings_path:["editor_options","tabSize"],analyze:e=>(0,s.aD)(e,"Tab size"),convert_to_number:!0},{id:"editor_options_indentWithTabs",label:"Indent with tabs",type:"checkbox",settings_path:["editor_options","indentWithTabs"],analyze:e=>(0,s.hZ)(e,"Indent with tabs")},{id:"editor_options_keyMap",label:"Key map",type:"select",options:(s=(c.then?(await c)():c)[0]).$I.map((e=>({value:e,label:e}))),settings_path:["editor_options","keyMap"],analyze:e=>(0,s.Br)(e,"Key map")}]}},{section:{name:"TeX Formatting",settings:[{id:"formatting_options_align",label:"Horizontal alignment",type:"select",options:s.Kp.map((e=>({value:e,label:e}))),settings_path:["formatting_options","align"],analyze:e=>(0,s.yj)(e,"Align")},{id:"formatting_options_indent",label:"Indentation",type:"text",settings_path:["formatting_options","indent"],analyze:e=>(0,s.fe)(e,"Indentation")}]}},{section:{name:"Appearance",settings:[{id:"theme_colors",label:"Theme",type:"select",options:s.LI.map((e=>({value:e,label:e}))),settings_path:["theme_colors"],analyze:e=>(0,s.K4)(e,"Theme colors")}]}}];class u extends a.Vq{static settings_dialog_css_class="settings-dialog";static run(e,t){const n=document.querySelector(`#content #ui .${this.settings_dialog_css_class}`);if(n){const e=a.Vq.instance_from_element(n);if(!e)throw new Error(`unexpected: Dialog.instance_from_element() returned null for element with class ${this.settings_dialog_css_class}`);return e.promise}return(new this).run()}_populate_dialog_element(){const e=(0,s.oj)();this._dialog_element.classList.add(this.constructor.settings_dialog_css_class),this._dialog_text_container.innerText="Settings";for(const{section:t}of d){const{name:n,settings:r}=t,c=(0,o.T1)({parent:this._dialog_form,attrs:{class:"section"}}),d=(0,o.T1)({parent:c,attrs:{"data-section":n}}),u=(0,o.T1)({parent:c,attrs:{class:"error-message"}});for(const t of r){const{id:n,label:r,type:c,settings_path:h,options:m,analyze:_,convert_to_number:g}=t,A=(0,o.T1)({parent:d,attrs:{"data-setting":void 0}});let p;p="select"===c?(0,a.cK)(A,n,{label:r,options:m}):(0,a.L_)(A,n,{label:r,type:c}),"checkbox"===c?p.checked=(0,i.Z)(e,h):p.value=(0,i.Z)(e,h);const b=async e=>{const t=(0,s.oj)(),n=async e=>{u.classList.add("active"),u.innerText=e;const t=document.getElementById(p.id);!this._completed&&t?(t.focus(),t instanceof HTMLInputElement&&"text"===t.type&&t.select(),await(0,l.V)()):await a.aR.run(`settings update failed: ${e}`)},r="checkbox"===c?p.checked:p.value;if(_){const e=_(r);if(e)return void await n(e)}(0,i.$)(t,h,g?+r:r);try{await(0,s.ZA)(t),u.classList.remove("active")}catch(e){await n(e.message)}};p.addEventListener("change",b),p.addEventListener("blur",b)}}(0,o.T1)({parent:this._dialog_form,tag:"input",attrs:{type:"button",value:"Done"}}).onclick=e=>this._dialog_element.close(),this._dialog_element.onclose=e=>this._complete()}}r()}catch(e){r(e)}}))},2724:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{$I:()=>A,Br:()=>p,K4:()=>E,Kp:()=>f,LI:()=>C,Xg:()=>m,ZA:()=>j,aD:()=>_,fe:()=>w,hZ:()=>g,oj:()=>T,yj:()=>v});var o=n(6092),a=n(2176),i=n(6659),s=e([o]);o=(s.then?(await s)():s)[0];const l={editor_options:{indentUnit:2,tabSize:4,indentWithTabs:!1,keyMap:"default"},formatting_options:{align:"left",indent:"0em"},theme_colors:"system"};(0,a.j)(l);const c=new o.l,d=/^([+-]?[0-9]+[.][0-9]*[Ee][+-]?[0-9]+|[+-]?[.][0-9]+[Ee][+-]?[0-9]+|[+-]?[0-9]+[Ee][+-]?[0-9]+|[+-]?[0-9]+[.][0-9]*|[+-]?[.][0-9]+|[+-]?[0-9]+)$/;function u(e,t){const{require_integer:n,reject_negative:r,reject_zero:o,reject_positive:a}=t??{};let i;if("number"==typeof e)i=e;else{if("string"!=typeof e)return!1;if(!e.trim().match(d))return!1;i=Number.parseFloat(e)}return!(isNaN(i)||n&&!Number.isInteger(i)||a&&i>0||o&&0===i||r&&i<0)}function h(e,t,n){if(!t.includes(e))return`${n??"value"} must be one of: ${t.join(", ")}`}function m(e,t){if(!u(e,{require_integer:!0,reject_negative:!0}))return`${t??"indentUnit"} must be a non-negative integer`}function _(e,t){if(!u(e,{require_integer:!0,reject_negative:!0}))return`${t??"tabSize"} must be a non-negative integer`}function g(e,t){if("boolean"!=typeof e)return`${t??"indentWithTabs"} must be a boolean value`}const A=["default","emacs","sublime","vim"];function p(e,t){return h(e,A,t??"keyMap")}function b(e,t){if("object"!=typeof e)return`${t??"editor_options"} must be an object`;if(!Object.keys(e).every((e=>["indentUnit","tabSize","indentWithTabs","keyMap"].includes(e))))return`${t??"editor_options"} may only have the keys "indentUnit", "tabSize", "indentWithTabs" and "keyMap"`;if("indentUnit"in e){const t=m(e.indentUnit);if(t)return t}if("tabSize"in e){const t=_(e.tabSize);if(t)return t}if("indentWithTabs"in e){const t=g(e.indentWithTabs);if(t)return t}if("keyMap"in e){const t=p(e.keyMap);if(t)return t}}const f=["left","center","right"];function v(e,t){return h(e,f,t??"align")}const y=["pt","pc","in","cm","mm","em","ex","mu"];function w(e,t){if(!y.every((e=>2===e.length)))throw new Error("unexpected: valid units contains a string whose length is not 2");const n=`${t??"indent"} must be a string containing a non-negative number followed by one of: ${y.join(", ")}`;if("string"!=typeof e)return n;const r=(e=e.trim()).slice(0,-2),o=e.slice(-2);return u(r,{reject_negative:!0})&&y.includes(o)?void 0:n}function k(e,t){if("object"!=typeof e)return`${t??"formatting_options"} must be an object`;if(!Object.keys(e).every((e=>["align","indent"].includes(e))))return`${t??"formatting_options"} may only have the keys "align" and "indent"`;if("align"in e){const t=v(e.align);if(t)return t}if("indent"in e){const t=w(e.indent);if(t)return t}}const C=["system","dark","light"];function E(e,t){return h(e,C,t??"theme_colors")}function I(e,t){if("object"!=typeof e)return`${t??"settings"} must be an object`;if(!Object.keys(e).every((e=>["editor_options","formatting_options","theme_colors"].includes(e))))return`${t??"settings"} may only have the keys "editor_options", "formatting_options" and "theme_colors"`;if(!("editor_options"in e))return`${t??"settings"} must contain an editor_options property`;{const t=b(e.editor_options);if(t)return t}if(!("formatting_options"in e))return`${t??"settings"} must contain an formmating_options property`;{const t=k(e.formatting_options);if(t)return t}if(!("theme_colors"in e))return`${t??"settings"} must contain an theme_colors property`;{const t=E(e.theme_colors);if(t)return t}}async function B(e){return i.zS.put(i.Fx,e)}async function x(){try{const e=await i.zS.get(i.Fx);if(!I(e))return e}catch(e){}return await B(l),l}(()=>{const e=I(l);if(e)throw new Error(`initial_settings: ${e}`)})();let D=await x();function T(){return e=D,JSON.parse(JSON.stringify(e));var e}async function j(e){const t=I(e);if(t)throw new Error(t);await B(e),D=e,c.dispatch()}r()}catch(S){r(S)}}),1)},6659:(e,t,n)=>{n.d(t,{Fx:()=>r,zS:()=>o});const r="settings-6c32f9d6-796c-4588-8a4b-35165a13d14d",o=new class{constructor(e="property-database-7a11272a-fce1-4e39-951c-44c375bc75ca",t="property-database-store-7a11272a-fce1-4e39-951c-44c375bc75ca"){Object.defineProperties(this,{database_name:{value:e},database_store_name:{value:t,enumerable:!0},_startup_promise:{value:new Promise(((n,r)=>{const o=indexedDB.open(e,1);o.onerror=()=>r(o.error),o.onsuccess=()=>n(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(t)}}))}})}async with_object_store(e,t){const n=await this._startup_promise;return new Promise(((r,o)=>{const a=n.transaction(this.database_store_name,e);a.oncomplete=()=>r(),a.onabort=a.onerror=()=>o(a.error),t(a.objectStore(this.database_store_name))}))}async get(e){let t;return await this.with_object_store("readonly",(n=>{t=n.get(e)})),t.result}async put(e,t){return this.with_object_store("readwrite",(n=>{n.put(t,e)}))}async delete(e){return this.with_object_store("readwrite",(t=>{t.delete(e)}))}async clear(){return this.with_object_store("readwrite",(e=>{e.clear()}))}async keys(){let e;return await this.with_object_store("readonly",(t=>{e=t.getAllKeys()})),e.result}}},7098:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{VI:()=>s});var o=n(6092),a=(n(6973),n(5350),e([o]));o=(a.then?(await a)():a)[0];const i=globalThis.matchMedia("(prefers-color-scheme: dark)");function s(){return{shouldUseDarkColors:i.matches}}i.addEventListener("change",(function(e){l.dispatch()}));const l=new o.l;document.documentElement,r()}catch(c){r(c)}}))},9475:(e,t,n)=>{n.d(t,{O:()=>f});var r=n(9886),o=n(984),a=(n(6973),n(3379)),i=n.n(a),s=n(7795),l=n.n(s),c=n(569),d=n.n(c),u=n(3565),h=n.n(u),m=n(9216),_=n.n(m),g=n(4589),A=n.n(g),p=n(4267),b={};b.styleTagTransform=A(),b.setAttributes=h(),b.insert=d().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=_(),i()(p.Z,b),p.Z&&p.Z.locals&&p.Z.locals;class f extends HTMLElement{static custom_element_name="toggle-switch";static create(e=null){const{parent:t,class:n,title_for_on:r,title_for_off:a,svg:i}=e??{},s=(0,o.T1)({parent:t,tag:this.custom_element_name,attrs:{class:n,role:"switch","aria-checked":!1,title:a}});return s.#y.add(s,"change",(e=>{s.title=s.get_state()?r:a})),s}constructor(){super(),this.#y=new r.w,this.#y.add(this,"click",(e=>{this.set_state()}))}#y;get_state(){return"true"===this.getAttribute("aria-checked")}set_state(e=null){const t=this.get_state();e??=!t,e=!!e,this.setAttribute("aria-checked",e),t!==e&&this.dispatchEvent(new Event("change"))}connectedCallback(){this.#y.attach()}disconnectedCallback(){this.#y.detach()}adoptedCallback(){this.#y.attach()}attributeChangedCallback(e,t,n){}static get observedAttributes(){return["xyzzy"]}static _init_static(){globalThis.customElements.define(this.custom_element_name,this)}}f._init_static()},3653:(e,t,n)=>{n.a(e,(async(e,r)=>{try{n.d(t,{d:()=>c});var o=n(9475),a=n(9886),i=n(9026),s=n(984),l=(n(6973),n(7263),e([i]));i=(l.then?(await l)():l)[0];class c extends HTMLElement{static custom_element_name="tool-bar";static indicator_control__class="tool-bar-indicator";static indicator_control__attribute__value="data-indicator-value";static toggle_switch__editable__class="tool-bar-toggle-editable";static toggle_switch__visible__class="tool-bar-toggle-visible";static toggle_switch__autoeval__class="tool-bar-toggle-autoeval";static create_for(e,t){const n=document.createElement(this.custom_element_name);if(!n)throw new Error("error creating tool bar");try{return n.set_target(e,t),n}catch(e){throw n.remove(),e}}constructor(){super(),this.#l=null,this.#y=new a.w,this.#Ue()}#y;#Ze;set_type(e){this.set_for("type",e)}#l;get target(){return this.#l}set_target(e,t=null){if(null!=e&&!(e instanceof EventTarget))throw new Error("target must be null, undefined, or and instance of EventTarget");e?this.#l!==e&&(this.#l=e,this.#qe(t)):(this.#l=null,this.#Ue())}get_for(e,t){if(!(e in this.#Ze))throw new Error("unknown name");return this.#Ze[e].get()}set_for(e,t){if(!(e in this.#Ze))throw new Error("unknown name");this.#Ze[e].set(t)}#qe(e=null){e??={},this.#Ue();try{for(const[t,n,r,o]of this.#Pe()){let a=e[t];if(a){"object"!=typeof a&&(a={});const e=n(a.on);"initial"in a&&o(e,a.initial),this.#Ze[t]={name:t,control:e,get:r.bind(c,e),set:o.bind(c,e)}}}this.#y.add(this,"pointerdown",(e=>{this.#l.focus(),e.target instanceof c&&(e.preventDefault(),e.stopPropagation())})),this.#y.add(this,"dblclick",(e=>{this.#l.focus(),e.target instanceof c&&(this.#l.set_visible(!this.#l.visible),e.preventDefault(),e.stopPropagation())}))}catch(e){throw this.#Ue(),e}}#Ue(){this.#y.remove_all(),(0,s.gX)(this),this.#Ze={}}#Pe(){return[["running",this.#Ge.bind(this),this.constructor.#$e,this.constructor.#Re],["modified",this.#We.bind(this),this.constructor.#Qe,this.constructor.#He],["editable",this.#Ke.bind(this),this.constructor.#Ve,this.constructor.#Xe],["visible",this.#Ye.bind(this),this.constructor.#Je,this.constructor.#et],["autoeval",this.#tt.bind(this),this.constructor.#nt,this.constructor.#rt],["run",this.#ot.bind(this),this.constructor.#at,this.constructor.#it],["type",this.#st.bind(this),this.constructor.#lt,this.constructor.#ct]]}#Ke(e=null){const t=o.O.create({parent:this,class:this.constructor.toggle_switch__editable__class,title_for_on:"edit mode on",title_for_off:"edit mode off"});return t.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n\x3c!--\n    Adapted from: https://commons.wikimedia.org/wiki/File:Ei-pencil.svg\n    Alexander Madyankin, Roman Shamin, MIT <http://opensource.org/licenses/mit-license.php>, via Wikimedia Commons\n--\x3e\n<svg\n  xmlns="http://www.w3.org/2000/svg"\n  version="1.1"\n  viewBox="0 0 50 50"\n>\n  <path class="accent-fill" d="M9.6 40.4 l2.5 -9.9 L27 15.6 l7.4 7.4 -14.9 14.9 -9.9 2.5z m4.3 -8.9 l-1.5 6.1 6.1 -1.5 L31.6 23 27 18.4 13.9 31.5z"/>\n  <path class="accent-fill" d="M17.8 37.3 c-.6 -2.5 -2.6 -4.5 -5.1 -5.1 l.5 -1.9 c3.2 .8 5.7 3.3 6.5 6.5 l-1.9 .5z"/>\n  <path class="accent-fill" d="M29.298 19.287 l1.414 1.414 -13.01 13.02 -1.414 -1.412z"/>\n  <path class="accent-fill" d="M11 39 l2.9 -.7 c-.3 -1.1 -1.1 -1.9 -2.2 -2.2 L11 39z"/>\n  <path class="accent-fill" d="M35 22.4 L27.6 15 l3-3 .5.1 c3.6 .5 6.4 3.3 6.9 6.9 l.1 .5 -3.1 2.9z M30.4 15 l4.6 4.6 .9 -.9 c-.5 -2.3 -2.3 -4.1 -4.6 -4.6 l-.9 .9z"/>\n</svg>\n',e&&this.#y.add(t,"change",e),t}static#Ve(e){return e.get_state()}static#Xe(e,t){e.set_state(t)}#Ye(e=null){const t=o.O.create({parent:this,class:this.constructor.toggle_switch__visible__class,title_for_on:"visible",title_for_off:"not visible"});return t.innerHTML='<?xml version="1.0" encoding="UTF-8"?>\n\x3c!--\n    Adapted from: https://commons.wikimedia.org/wiki/File:ISO_7000_-_Ref-No_2030.svg\n    Vectorization:  Mrmw, CC0, via Wikimedia Commons\n--\x3e\n<svg\n  xmlns="http://www.w3.org/2000/svg"\n  version="1.1"\n  viewBox="0 0 200 170"\n>\n  <path class="accent-stroke" stroke="#000" stroke-width="5" fill="transparent"\n    d="m100 49.738 a97.452 97.452 0 0 0 -78.246 39.775 97.452 97.452 0 0 0 78.246 39.773 97.452 97.452 0 0 0 78.396 -39.975 97.452 97.452 0 0 0 -78.396 -39.574z"\n  />\n  <circle class="accent-stroke accent-fill" stroke="#000" stroke-width="5"\n    cx="100" cy="89.438" r="19.85"\n  />\n</svg>\n',e&&this.#y.add(t,"change",e),t}static#Je(e){return e.get_state()}static#et(e,t){e.set_state(t)}#tt(e=null){const t=(0,s.T1)({parent:this,tag:"input",attrs:{type:"checkbox",title:"autoeval..."}});return e&&this.#y.add(t,"change",e),this.#y.add(t,"change",(e=>{t.title=t.checked?"autoeval off...":"autoeval on..."})),t}static#nt(e){return e.checked}static#rt(e,t){e.checked=!!t}#st(e=null){const t=(0,s.T1)({parent:this,tag:"select",attrs:{title:"type..."}}),n=new Set((0,i.P)().map((e=>e.handled_input_types)).flat()).values();let r=!1;for(const e of n)(0,s.T1)({parent:t,tag:"option",attrs:{title:"type...",label:e,...r?{}:{selected:!r},value:e}}),r=!0;return e&&this.#y.add(t,"change",e),this.#y.add(t,"change",(e=>{t.title=`type ${t.value}`})),t}static#lt(e){return e.value}static#ct(e,t){if(![...e.options].map((e=>e.value)).includes(t))throw new Error("setting unknown/illegal value");e.value=t}#Ge(e=null){return this.#dt("running","running...","done...",e)}static#$e(e){return this.#ut(e)}static#Re(e,t){this.#ht(e,t)}#We(e=null){return this.#dt("modified","modified...","not modified...",e)}static#Qe(e){return this.#ut(e)}static#He(e,t){this.#ht(e,t)}#ot(e=null){}static#at(e){}static#it(e,t){}#dt(e,t,n,r=null){const o=(0,s.T1)({parent:this,attrs:{title:n,class:`${this.constructor.indicator_control__class} ${e}`}});return r&&this.#y.add(o,"change",r),this.#y.add(o,"change",(e=>{o.title=this.constructor.#ut(o)?t:n})),o}static#ut(e){return!!e.getAttribute(this.indicator_control__attribute__value)}static#ht(e,t){if(t!==this.#ut(e)){e.setAttribute(this.indicator_control__attribute__value,t?"on":"");const n=new Event("change",{});e.dispatchEvent(n)}}connectedCallback(){this.#y.attach()}disconnectedCallback(){this.#y.detach()}adoptedCallback(){this.#y.attach()}attributeChangedCallback(e,t,n){}static get observedAttributes(){return["xyzzy"]}static _init_static(){globalThis.customElements.define(this.custom_element_name,this)}}c._init_static(),r()}catch(e){r(e)}}))}},a={};function i(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,exports:{}};return o[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(o,a,i)=>{var s;i&&((s=[]).d=-1);var l,c,d,u=new Set,h=o.exports,m=new Promise(((e,t)=>{d=t,c=e}));m[t]=h,m[e]=e=>(s&&e(s),u.forEach(e),m.catch((e=>{}))),o.exports=m,a((o=>{var a;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var a=[];a.d=0,o.then((e=>{i[t]=e,r(a)}),(e=>{i[n]=e,r(a)}));var i={};return i[e]=e=>e(a),i}}var s={};return s[e]=e=>{},s[t]=o,s})))(o);var i=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(a=()=>t(i)).r=0;var n=e=>e!==s&&!u.has(e)&&(u.add(e),e&&!e.d&&(a.r++,e.push(a)));l.map((t=>t[e](n)))}));return a.r?c:i()}),(e=>(e?d(m[n]=e):c(h),r(s)))),s&&s.d<0&&(s.d=0)},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nc=void 0,i(7027)})();
//# sourceMappingURL=main.js.map