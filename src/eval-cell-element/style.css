:root {
    /* color */

    --bgcolor-tool:          hsl(0deg 0% 98% / 100%);
    --bgcolor-cell:          hsl(0deg 0% 99% / 100%);

    --color-type-markdown:   hsl(205deg 100%  94% / 100%);
    --color-type-tex:        hsl( 45deg  81%  87% / 100%);
    --color-type-javascript: hsl( 85deg 100%  85% / 100%);


    /* border */

    --border-radius-cell:      0.125em;
    --border-width-cell:       1px;
    --border-style-cell:       solid;
    --border-width-tool:       1px;
    --border-style-tool:       solid;
    --border-color-tool:       #ccc;
    --border-color-cell:       #ccc;
    --border-color-tool-focus: black;
    --border-color-cell-focus: black;


    /* focus transition */

    --focus-x1-delay:    0s;
    --focus-x1-duration: 0.2s;
    --focus-x1-easing:   cubic-bezier(0.42, 0.0, 0.0, 1.0);

    --focus-x2-delay:    calc(var(--focus-x1-duration) / 4);
    --focus-x2-duration: 0.1s;
    --focus-x2-easing:   cubic-bezier(0.42, 0.0, 0.0, 1.0);
}


tool-bar {
    background-color: var(--bgcolor-tool);

    padding: 0.3em 0.5em;
}

eval-cell {
    background-color: var(--bgcolor-cell);

    outline: 0px solid transparent;  /* disable default outline */

    white-space: pre-wrap;  /* properly display white-space */
    font-family: monospace;
    line-height: 140%;

    display: block;
    margin:  0;
    padding: 0.3em 0.5em;
}

.eval-cell-output {
    display: block;
    padding: 0.5em;

    white-space: pre-wrap;  /* properly display white-space */
    line-height: 140%;

    background-color: white;
}
.eval-cell-output:has(+ tool-bar),
.eval-cell-output:has(+ eval-cell) {
    padding-bottom: 1em;
}


/* border / animated attributes */

tool-bar {
    overflow: hidden;

    max-height:   0;
    border-width: 0;
    padding:      0 0.5em;

    transition: max-height   var(--focus-x1-duration) var(--focus-x1-easing) var(--focus-x1-delay);
    transition: border-width var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);
    transition: padding      var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);

    border-radius: var(--border-radius-cell) var(--border-radius-cell) 0 0;
    border-style:  var(--border-style-tool);
    border-color:  var(--border-color-tool);
}
eval-cell {
    overflow: hidden;

    max-height:   0;
    border-width: 0;
    padding:      0 0.5em;

    transition: max-height   var(--focus-x1-duration) var(--focus-x1-easing) var(--focus-x1-delay);
    transition: border-width var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);
    transition: padding      var(--focus-x2-duration) var(--focus-x2-easing) var(--focus-x2-delay);

    border-radius: 0 0 var(--border-radius-cell) var(--border-radius-cell);
    border-style:  var(--border-style-cell);
    border-color:  transparent var(--border-color-cell) var(--border-color-cell) var(--border-color-cell);
}

#controls > tool-bar {
    max-height:   100vh;
    border-width: var(--border-width-tool);
    padding:      0 0.5em;
}

tool-bar:has(+ eval-cell[data-visible]),
tool-bar:has(+ eval-cell[contenteditable]) {
    border-top-color:   var(--border-color-tool-focus);
    border-left-color:  var(--border-color-tool-focus);
    border-right-color: var(--border-color-tool-focus);
}
eval-cell[data-visible],
eval-cell[contenteditable] {
    border-color: transparent var(--border-color-cell-focus) var(--border-color-cell-focus) var(--border-color-cell-focus);
}

tool-bar:has(+ eval-cell[data-visible]),
tool-bar:has(+ eval-cell[contenteditable]) {
    max-height:   100vh;
    border-width: var(--border-width-tool);
    padding:      0 0.5em;
}
eval-cell[data-visible],
eval-cell[contenteditable] {
    max-height:   100vh;
    border-width: var(--border-width-cell);
    padding:      0.3em 0.5em;
}


/* color selected by eval-cell input-type */


tool-bar option,
tool-bar select {
    background-color: var(--color-type-markdown);
}

tool-bar option[value="javascript"],
tool-bar > select:has(> option[value="javascript"]:checked) {
    background-color: var(--color-type-javascript);
}

tool-bar option[value="tex"],
tool-bar > select:has(> option[value="tex"]:checked) {
    background-color: var(--color-type-tex);
}


tool-bar {
    border-bottom-color: var(--color-type-markdown);
}

tool-bar:has(option[value="javascript"]:checked) {
    border-bottom-color: var(--color-type-javascript);
}

tool-bar:has(option[value="tex"]:checked) {
    border-bottom-color: var(--color-type-tex);
}
